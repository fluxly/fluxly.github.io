{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;;;AAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,E;;;;;;;;;;;;;;AC/GO;AACP;AACA,mBAAmB;AACnB,mBAAmB;AACnB;AACA;AACA,yCAAyC,UAAU,6BAA6B;AAChF;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;;;;;;AC9BO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uBAAuB,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,MAAM;AAC/C;;AAEA,C;;;;;;;;;;;;;;ACrBA;AACO;AACP,GAAG,KAA+C,IAAI,aAAwB;AAC9E,KAAK,CAGC,C;;;;;;;;;;;;;;ACNN;AACA;AACA,wEAAwE,IAAI,IAAI;AAChF;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;;ACL5B;AACO;AACP,GAAG,KAA+C,IAAI,aAAwB;AAC9E,KAAK,CAGC,C;;;;;;;;;;;;;;;;;;;;;;;;AENN;AACA;AACA;;AAEqE;;AAErE,gDAAgD,8EAAoB;;;;;;;;;;;;;;;;;;ACNW;AACP;AACT;;AAExD,mCAAmC,iFAAY;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,oEAAa;AACzB;AACA,gBAAgB,oEAAa;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,oEAAa;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,oEAAa;AACrB,oBAAoB,oEAAa;AACjC;;AAEA;AACA;AACA,wBAAwB,oEAAa;AACrC,4CAA4C,IAAI,IAAI,IAAI;AACxD;AACA,6CAA6C,WAAW;AACxD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AE9IA;AACA;AACA;;AAEqD;;AAErD,wCAAwC,8DAAY;;;;;;;;;;;;;;;;;;;ACP2B;AAChB;AACG;AACY;;AAEvE,2BAA2B,iFAAY;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,SAAS,UAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,6EAAkB,CAAC;AACzC;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC,UAAU;AAC/C,yBAAyB,YAAY;AACrC,iBAAiB,0CAA0C;;AAE3D;AACA,cAAc,UAAU;AACxB;AACA,kBAAkB;AAClB;AACA,+BAA+B,UAAU,oBAAoB,WAAW;AACxE,6BAA6B,uBAAuB;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AClL4C;AACY;AAChB;AACI;AACJ;AACI;AACA;AACA;;;;;;;;;;;;;ACP5C;AACA;AACA;;AAEqD;;AAErD,wCAAwC,8DAAY;;;;;;;;;;;;;;;;;ACNmB;AACR;;AAExD,2BAA2B,4EAAY;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7EA;AACA;AACA;;AAEuD;;AAEvD,wCAAwC,gEAAa;;;;;;;;;;;;;;;;;;ACNkB;AACR;AACS;;AAEjE,4BAA4B,4EAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,oCAAoC,WAAW;AAC/C;AACA;AACA,iCAAiC,WAAW;AAC5C,+DAA+D,WAAW;AAC1E,8DAA8D,UAAU;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,oEAAa,gBAAgB,gBAAgB;AACrD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,oEAAa,gBAAgB,gBAAgB;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,UAAU;AAC5E;AACA;AACA;AACA,mEAAmE,WAAW;AAC9E;AACA;AACA,qFAAqF,SAAS;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC7J0E;;AAEnE;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,oEAAa;AACrB;;AAEA;AACA,yCAAyC,UAAU,6BAA6B;AAChF;AACA;;AAEA;AACA;AACA,YAAY,oEAAa;AACzB;AACA;AACA;AACA;AACA;AACA,GAAG,oEAAa;AAChB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,uBAAuB,IAAI,uBAAuB,IAAI,uBAAuB;AAC/F;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,OAAO,oEAAa;AACpB;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,E;;;;;;;;;;;;AC/KA;AACA;AACA;;AAEqD;;AAErD,wCAAwC,8DAAY;;;;;;;;;;;;;;;;;ACNmB;AACR;;AAExD,2BAA2B,4EAAY;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3EA;AACA;AACA;;AAEiE;;AAEjE,8CAA8C,0EAAkB;;;;;;;;;;;;;;;;;ACNO;AACR;;AAExD,iCAAiC,4EAAY;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,mBAAmB,EAAE,gBAAgB,EAAE,oBAAoB;AAC9G;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChEA;AACA;AACA;;AAEqD;;AAErD,wCAAwC,8DAAY;;;;;;;;;;;;;;;;;ACNmB;AACR;;AAExD,2BAA2B,4EAAY;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5EA;AACA;AACA;;AAEmD;;AAEnD,sCAAsC,4DAAW;;;;;;;;;;;;;;;;;ACNsB;AACR;;AAExD,0BAA0B,4EAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC3DA;AACA;AACA;;AAEuD;;AAEvD,wCAAwC,gEAAa;;;;;;;;;;;;;;;;;;ACP0B;AAChB;AACG;;AAE3D,4BAA4B,iFAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,8DAAU;AACpC,4BAA4B,8DAAU;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,gBAAgB;AACxC;AACA,sEAAsE,EAAE,IAAI,kBAAkB;AAC9F;AACA;AACA;AACA;AACA;AACA,uDAAuD,aAAa;AACpE;AACA,uDAAuD,aAAa;AACpE,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,QAAQ;AACvD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA,0EAA0E,EAAE,IAAI,kBAAkB;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnIA;AACA;AACA;;AAEmD;;AAEnD,sCAAsC,4DAAW;;;;;;;;;;;;;;;;;ACNsB;AACR;;AAExD,0BAA0B,4EAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,UAAU;AACxE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpEA;AACA;AACA;;AAEqD;;AAErD,wCAAwC,8DAAY;;;;;;;;;;;;;;;;;ACNmB;AACR;;AAExD,2BAA2B,4EAAY;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AE3EA;AACA;AACA;;AAEyD;;AAEzD,yCAAyC,kEAAc;;;;;;;;;;;;;;;;;;ACPwB;AAChB;AACe;;AAEvE,6BAA6B,iFAAY;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,6EAAkB,CAAC;AACnE;AACA;AACA;AACA;AACA;AACA,gCAAgC,6EAAkB,CAAC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,6EAAkB,CAAC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;AErbA;AACA;AACA;;AAEmD;;AAEnD,sCAAsC,4DAAW;;;;;;;;;;;;;;;;;;ACN8B;AAChB;AACS;;AAEjE,0BAA0B,iFAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sBAAsB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,WAAW;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,sBAAsB;AACtB;AACA;AACA,qBAAqB;AACrB,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,mCAAmC,kBAAkB;AACrD;;AAEA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACja0C;AACF;AACsB;AACM;AACtB;AACF;AACN;AACF;AACY;AACQ;AAChB;AAC0B;AAChC;AACA;AACY;AACV;AACF;AACY;AACQ;AACoB;AACI;AAClC;AACE;AACN;AACI;AACJ;AACQ;AACF;AACM;;;;;;;;;;;;;;AC3BpD;AACA;AACA;;AAEqD;;AAErD,uCAAuC,8DAAY;;;;;;;;;;;;;;;;;;ACP4B;AAChB;AACe;;AAEvE,2BAA2B,iFAAY;;AAE9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,QAAQ;AAC5C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yCAAyC,SAAS,UAAU;;AAE5D,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,oCAAoC;AACtD,kBAAkB,sCAAsC;AACxD,kBAAkB,oCAAoC;AACtD,kBAAkB,6BAA6B;AAC/C,kBAAkB,mCAAmC;AACrD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/HA;AACA;AACA;;AAEmD;;AAEnD,sCAAsC,4DAAW;;;;;;;;;;;;;;;;;;ACP8B;AAChB;AACe;;AAEvE,0BAA0B,iFAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA,sCAAsC,OAAO;AAC7C,uCAAuC,OAAO;AAC9C,wCAAwC,WAAW;AACnD,yCAAyC,YAAY;AACrD;;AAEA,qCAAqC,gCAAgC;AACrE,sCAAsC,iCAAiC;;AAEvE;AACA,oFAAoF,6EAAkB,CAAC,GAAG,WAAW;AACrH,qCAAqC,6EAAkB,CAAC,GAAG,WAAW;AACtE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,QAAQ;AACzC,8DAA8D,iDAAiD;AAC/G;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,QAAQ,EAAE,OAAO;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,GAAG,oBAAoB,EAAE;AACnE,0CAA0C,GAAG,qBAAqB,EAAE;AACpE;;AAEA;AACA,0CAA0C,GAAG,kBAAkB,EAAE;AACjE,0CAA0C,GAAG,mBAAmB,EAAE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACvVA;AACA;AACA;;AAEuD;;AAEvD,wCAAwC,gEAAa;;;;;;;;;;;;;;;;;;ACN0B;AAChB;AACW;;AAE1E;AACA;;AAEO,4BAA4B,iFAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;;AAEA;AACA,mCAAmC;;AAEnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sBAAsB;AACtB,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM,gEAAY;;AAElB,wBAAwB,cAAc;AACtC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gEAAgE,eAAe;AAC/E;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,MAAM;AACpC;;AAEA;AACA;AACA;AACA,gCAAgC,mCAAmC;AACnE;;AAEA;AACA;AACA,sDAAsD,eAAe;AACrE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3SA;AACA;AACA;;AAEuD;;AAEvD,yCAAyC,gEAAa;;;;;;;;;;;;;;;;;;ACPyB;AAChB;AACe;;AAEvE,4BAA4B,iFAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,0BAA0B;;AAE1B;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;;AAEA;AACA,sCAAsC,OAAO;AAC7C,uCAAuC,OAAO;AAC9C,mDAAmD,WAAW;AAC9D,0DAA0D,UAAU;AACpE,6DAA6D,UAAU;;AAEvE;;AAEA;AACA,+DAA+D,uEAAuE;;AAEtI;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,8CAA8C,YAAY;AAC1D;AACA;AACA;AACA,cAAc;AACd;AACA,0DAA0D,YAAY;AACtE;AACA;;AAEA;AACA,wBAAwB,eAAe;AACvC;AACA;;AAEA,4BAA4B,eAAe;AAC3C,oDAAoD;AACpD;AACA;AACA;AACA;AACA,kCAAkC,MAAM;AACxC,yCAAyC,MAAM;;AAE/C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,eAAe;AACvC,4BAA4B,eAAe;AAC3C;AACA;AACA;;AAEA;AACA;;AAEA,wBAAwB,eAAe;AACvC;;AAEA,4BAA4B,eAAe;AAC3C;AACA;AACA;AACA,2EAA2E,MAAM;;AAEjF;;AAEA;AACA;AACA,cAAc;AACd;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,6EAAkB,CAAC,GAAG,mBAAmB;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACnRA;AACA;AACA;;AAEuE;;AAEvE,iDAAiD,gFAAqB;;;;;;;;;;;;;;;;;ACNS;AAChB;;AAExD,oCAAoC,iFAAY;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW;AACnD,yCAAyC,YAAY;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;;AAEA;AACA,kEAAkE;AAClE;AACA;AACA;AACA,wCAAwC,EAAE;AAC1C,uCAAuC,EAAE;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,EAAE;AAClC,+BAA+B,EAAE;AACjC;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;AC5JA;AACA;AACA;;AAEiD;;AAEjD,qCAAqC,0DAAU;;;;;;;;;;;;;;;;;;;ACPgC;AAChB;AACG;AACY;;AAEvE,yBAAyB,iFAAY;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA,oEAAoE;AACpE;;AAEA,sCAAsC,OAAO;AAC7C,uCAAuC,OAAO;AAC9C,2CAA2C,WAAW;AACtD,4CAA4C,YAAY;AACxD,+CAA+C,WAAW;AAC1D,+CAA+C,WAAW;AAC1D,mCAAmC,8DAAU;AAC7C,qCAAqC,8DAAU,eAAe;AAC9D,+CAA+C,eAAe;AAC9D,0CAA0C,6BAA6B;AACvE,0CAA0C,mBAAmB;AAC7D,gDAAgD,gBAAgB;AAChE;AACA;AACA;AACA;AACA,8EAA8E,WAAW;AACzF,+EAA+E,YAAY;AAC3F,sGAAsG,WAAW;AACjH;AACA,0CAA0C,cAAc;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,QAAQ;AACzC;AACA,8DAA8D,uEAAuE;AACrI;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iEAAiE;AACjE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB,YAAY;AACxD;AACA;AACA;AACA,2BAA2B,eAAe,YAAY;AACtD;AACA;AACA,2BAA2B,qBAAqB,qBAAqB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9WA;AACA;AACA;;AAE6E;;AAE7E,oDAAoD,sFAAwB;;;;;;;;;;;;;;;;;;ACNG;AAChB;AACe;;AAEvE,uCAAuC,iFAAY;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,6EAAkB,CAAC;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,WAAW;AACpD,0CAA0C,YAAY;AACtD,yCAAyC,WAAW;AACpD,0CAA0C,YAAY;AACtD,uDAAuD,iBAAiB,GAAG,8CAA8C;AACzH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sDAAsD,iBAAiB;AACvE,iEAAiE,iBAAiB;AAClF,8DAA8D,iBAAiB;AAC/E,iEAAiE,iBAAiB;AAClF,sDAAsD,iBAAiB;AACvE,iEAAiE,iBAAiB;AAClF,8DAA8D,iBAAiB;AAC/E,iEAAiE,iBAAiB;AAClF;;AAEA;AACA;AACA;AACA,kCAAkC,iBAAiB,GAAG,8CAA8C;AACpG,2DAA2D,iBAAiB,GAAG,8CAA8C;AAC7H;AACA;AACA;AACA,UAAU;AACV,kCAAkC,iBAAiB,GAAG,8CAA8C;AACpG,2DAA2D,iBAAiB,GAAG,8CAA8C;AAC7H;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,C;;;;;;;;;;;;ACjIA;AACA;AACA;;AAE+C;;AAE/C,oCAAoC,wDAAS;;;;;;;;;;;;;;;;;;ACNkC;AAChB;AACW;;AAEnE,wBAAwB,iFAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,WAAW;AAC/C;AACA,iCAAiC,WAAW;AAC5C,+DAA+D,WAAW;AAC1E,8DAA8D,UAAU;AACxE;AACA;AACA;AACA;AACA,oCAAoC,UAAU;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAiC,yBAAyB,2BAA2B,wBAAwB;AAC7G,2CAA2C,yBAAyB;AACpE;AACA;AACA;AACA;AACA;AACA,gBAAgB,oEAAa,gBAAgB,yBAAyB;AACtE,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/IA;AACA;AACA;;AAEyD;;AAEzD,0CAA0C,kEAAc;;;;;;;;;;;;;;;;;ACPuB;AAChB;;AAExD,6BAA6B,iFAAY;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,qEAAqE,YAAY,aAAa,WAAW,qBAAqB,OAAO,kBAAkB,UAAU,MAAM,WAAW;AACzP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvEA;AACA;AACA;;AAEiE;;AAEjE,8CAA8C,0EAAkB;;;;;;;;;;;;;;;;;;ACPe;AAChB;AACG;;AAE3D,iCAAiC,iFAAY;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,wBAAwB,QAAQ;AAChC,wBAAwB,8DAAU;AAClC,gEAAgE,EAAE,IAAI,MAAM;AAC5E;AACA,wBAAwB,QAAQ;AAChC,wDAAwD,EAAE;AAC1D,kFAAkF,EAAE;AACpF,qFAAqF,EAAE;AACvF;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,+DAA+D,cAAc;AAC7E,kEAAkE,cAAc;AAChF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3JA;AACA;AACA;;AAEyE;;AAEzE,mDAAmD,kFAAsB;;;;;;;;;;;;;;;;;ACNM;AAChB;;AAExD,qCAAqC,iFAAY;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,eAAe;AACnD;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA,oDAAoD,gCAAgC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kCAAkC;AAC1D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uCAAuC,eAAe;AACtD,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,wCAAwC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,sBAAsB;AAC1C;;AAEA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;ACvRA;AACA;AACA;;AAEmD;;AAEnD,sCAAsC,4DAAW;;;;;;;;;;;;;;;;;;;ACP8B;AAChB;AACG;AACQ;;AAEnE,0BAA0B,iFAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,UAAU;AACpD,4CAA4C,UAAU;AACtD,sCAAsC,yBAAyB;AAC/D,uCAAuC,yBAAyB;AAChE,mDAAmD,UAAU;AAC7D,wCAAwC,UAAU;AAClD,yCAAyC,UAAU;AACnD,mDAAmD,WAAW;AAC9D,oCAAoC,OAAO;AAC3C,mCAAmC,YAAY;AAC/C;AACA;AACA;AACA,0EAA0E,UAAU;AACpF,2EAA2E,UAAU;AACrF,+GAA+G,WAAW;AAC1H,+GAA+G,WAAW;AAC1H;AACA;AACA,mDAAmD,sEAAc;AACjE,kEAAkE,sEAAc,wCAAwC;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,OAAO;AACzD,mDAAmD,OAAO;AAC1D,mDAAmD,MAAM;AACzD,oCAAoC,OAAO;AAC3C,mCAAmC,YAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,8DAAU;AAC/C;AACA;AACA;AACA;AACA;AACA,gDAAgD,SAAS;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,eAAe;AAC7D;AACA;AACA,0BAA0B,aAAa,eAAe;AACtD;AACA;AACA;AACA;AACA;AACA,4BAA4B,aAAa,eAAe;AACxD;AACA;AACA,4BAA4B,aAAa,eAAe;AACxD;AACA,4BAA4B,aAAa,eAAe;AACxD;AACA;AACA;AACA;AACA;AACA,4BAA4B,aAAa,eAAe;AACxD;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;AC3PA;AACA;AACA;;AAE6C;;AAE7C,mCAAmC,sDAAQ;;;;;;;;;;;;;;;;;ACPoC;AAChB;;AAExD,uBAAuB,iFAAY;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxFA;AACA;AACA;;AAEuD;;AAEvD,yCAAyC,gEAAa;;;;;;;;;;;;;;;;;ACPyB;AAChB;;AAExD,4BAA4B,iFAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,aAAa;AACjD;AACA;AACA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC,4BAA4B,eAAe;AAC3C;AACA,uDAAuD,MAAM,+BAA+B,MAAM,SAAS,EAAE,SAAS,EAAE;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,iBAAiB;AACpD,iEAAiE,aAAa;AAC9E,oEAAoE,eAAe;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,MAAM;AAC5D,2BAA2B,gBAAgB,IAAI,kBAAkB,IAAI,iBAAiB;AACtF,cAAc;AACd;AACA,sDAAsD,MAAM;AAC5D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA,0BAA0B,IAAI;AAC9B;AACA,2BAA2B;AAC3B;AACA;AACA,wEAAwE,eAAe;AACvF;;AAEA;AACA;AACA;AACA;AACA;AACA,yFAAyF;AACzF,yEAAyE;AACzE,aAAa;AACb;AACA,oEAAoE,eAAe;AACnF;;AAEA;AACA,wBAAwB,mBAAmB;AAC3C;AACA,sDAAsD,EAAE;AACxD,2BAA2B,YAAY,IAAI,cAAc,IAAI,aAAa;AAC1E,cAAc;AACd,sDAAsD,EAAE;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3LA;AACA;AACA;;AAE6C;;AAE7C,mCAAmC,sDAAQ;;;;;;;;;;;;;;;;;ACPoC;AAChB;;AAExD,uBAAuB,iFAAY;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,eAAe;AACnD;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;AACA,+DAA+D,UAAU;AACzE,gEAAgE,UAAU;AAC1E;AACA;AACA,iCAAiC,eAAe;AAChD;AACA;AACA;AACA;AACA;AACA,mDAAmD,cAAc,KAAK,cAAc,KAAK,eAAe;AACxG;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,aAAa,YAAY,qBAAqB,qBAAqB,sBAAsB,sBAAsB;AACvI;AACA;AACA;AACA;AACA;AACA,2BAA2B,YAAY,sBAAsB,qBAAqB;AAClF;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,aAAa,YAAY,qBAAqB,qBAAqB,sBAAsB;AACxH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;ACzMA;AACA;AACA;;AAE+C;;AAE/C,oCAAoC,wDAAS,E;;;;;;;;;;;;;;;;ACPkC;AAChB;;AAExD,wBAAwB,iFAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3DA;AACA;AACA;;AAEuD;;AAEvD,yCAAyC,gEAAa;;;;;;;;;;;;;;;;;;ACNyB;AAChB;AACW;;AAEnE,4BAA4B,iFAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;;AAEA;AACA;AACA;AACA,yBAAyB,gEAAY;AACrC,wBAAwB,cAAc;AACtC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAwB;AACxB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,qCAAqC,+CAA+C;AACpF,uDAAuD,IAAI,KAAK,YAAY,EAAE,eAAe;AAC7F;;AAEA,8CAA8C;AAC9C;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,uBAAuB;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,OAAO;;AAEnB;AACA;AACA;AACA,YAAY,+BAA+B;AAC3C;;AAEA;AACA,0BAA0B,EAAE;AAC5B,2BAA2B,EAAE;AAC7B;;AAEA;AACA,YAAY,OAAO;;AAEnB;AACA,0BAA0B,EAAE;AAC5B,2BAA2B,EAAE;;AAE7B;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mCAAmC;AAC9D,2BAA2B;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,OAAO;AACrB;AACA;;AAEA;AACA,uDAAuD;AACvD,4CAA4C,oCAAoC;AAChF,4CAA4C,oCAAoC;;AAEhF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,UAAU;AACvD,eAAe;AACf;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,6CAA6C,UAAU;AACvD,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA,kBAAkB,OAAO;;AAEzB;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;AC3VA;AACA;AACA;;AAE+D;;AAE/D,6CAA6C,wEAAiB;;;;;;;;;;;;;;;;;;;ACNiB;AAChB;AACe;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACO,gCAAgC,iFAAY;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,QAAQ,EAAE,OAAO;AAC9C;AACA;AACA,4BAA4B,YAAY,EAAE,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,YAAY,EAAE,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kCAAkC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,aAAa;AACnC;AACA;AACA;AACA,6BAA6B,WAAW;AACxC,uBAAuB,WAAW,WAAW,YAAY;AACzD,0BAA0B,YAAY,IAAI,WAAW;AACrD,iCAAiC,YAAY;AAC7C;AACA,oEAAoE;AACpE,8EAA8E;AAC9E,8EAA8E;AAC9E,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,QAAQ,EAAE,OAAO;AACvD,SAAS;AACT;AACA;AACA;AACA;AACA,wBAAwB,kCAAkC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kCAAkC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,MAAM;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kCAAkC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;;;ACldA;AACA;AACA;;AAE6C;;AAE7C,mCAAmC,sDAAQ;;;;;;;;;;;;;;;;;;;ACPoC;AAChB;AACG;AACY;;AAEvE,uBAAuB,iFAAY;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA,oEAAoE;AACpE;;AAEA,sCAAsC,OAAO;AAC7C,uCAAuC,OAAO;AAC9C,2CAA2C,WAAW;AACtD,4CAA4C,YAAY;AACxD,+CAA+C,WAAW;AAC1D,+CAA+C,WAAW;AAC1D,mCAAmC,8DAAU;AAC7C,qCAAqC,8DAAU,eAAe;AAC9D,+CAA+C,eAAe;AAC9D,0CAA0C,6BAA6B;AACvE,0CAA0C,mBAAmB;AAC7D,gDAAgD,gBAAgB;AAChE;AACA;AACA;AACA,4EAA4E,WAAW;AACvF,6EAA6E,YAAY;AACzF,oGAAoG,WAAW;AAC/G;AACA,0CAA0C,cAAc;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,QAAQ;AACzC;AACA,8DAA8D,uEAAuE;AACrI;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,+BAA+B,gBAAgB,EAAE,aAAa;AAC9D;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB,YAAY;AACxD;AACA;AACA;AACA,2BAA2B,eAAe,YAAY;AACtD;AACA;AACA,2BAA2B,eAAe,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpWA;AACA;AACA;;AAEqF;;AAErF,yDAAyD,8FAA4B;;;;;;;;;;;;;;;;;;ACPN;AAChB;AACG;;AAE3D,2CAA2C,iFAAY;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA,6CAA6C,EAAE,gCAAgC,EAAE;AACjF;AACA;;AAEA;AACA,wBAAwB,mBAAmB;AAC3C,oEAAoE,EAAE;AACtE,uCAAuC,EAAE;AACzC;AACA,aAAa;AACb;AACA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA,kCAAkC,EAAE,sBAAsB,KAAK;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,cAAc;AACd;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,wBAAwB,kCAAkC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,EAAE;AACtE;AACA,wEAAwE,yBAAyB;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9LA;AACA;AACA;;AAEmF;;AAEnF,uDAAuD,4FAA2B;;;;;;;;;;;;;;;;;;ACPH;AAChB;AACG;;AAE3D,0CAA0C,iFAAY;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA,6CAA6C,EAAE;AAC/C;AACA;;AAEA;AACA,wBAAwB,mBAAmB;AAC3C,oEAAoE,EAAE;AACtE,uCAAuC,EAAE;AACzC;AACA,aAAa;AACb;AACA;AACA,wBAAwB,qBAAqB;AAC7C,uBAAuB,8DAAU;AACjC;AACA;AACA;AACA,kCAAkC,EAAE,IAAI,KAAK;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,wBAAwB,kCAAkC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,EAAE;AACtE;AACA;AACA,wEAAwE,yBAAyB;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChOA;AACA;AACA;;AAEuD;;AAEvD,wCAAwC,gEAAa;;;;;;;;;;;;;;;;;;ACN0B;AAChB;AACe;;;AAGvE,4BAA4B,iFAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,6EAAkB,CAAC;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,UAAU;AAC9C;AACA;AACA;AACA;AACA,iCAAiC,UAAU;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,aAAa;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,iBAAiB,GAAG;AACvF;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,yEAAyE,IAAI;AAC7E,aAAa;AACb,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4BAA4B,wBAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,QAAQ;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,oBAAoB;AACpD;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,mDAAmD;AACnD,cAAc;AACd;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,gCAAgC;AACvD;;AAEA;AACA,kBAAkB,kBAAkB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA,sCAAsC,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvOA;AACA;AACA;;AAEyD;;AAEzD,yCAAyC,kEAAc;;;;;;;;;;;;;;;;;ACNwB;AAChB;;;AAGxD,6BAA6B,iFAAY;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5DA;AACA;AACA;;AAEqD;;AAErD,wCAAwC,8DAAY;;;;;;;;;;;;;;;;;;ACP2B;AAChB;AACe;;AAEvE,2BAA2B,iFAAY;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA,sCAAsC,OAAO;AAC7C,uCAAuC,OAAO;AAC9C,wCAAwC,WAAW;AACnD,yCAAyC,YAAY;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,gCAAgC;AACrE,sCAAsC,iCAAiC;;AAEvE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,QAAQ;AACzC;AACA,8DAA8D,uEAAuE;AACrI;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,6BAA6B;AAC3E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,KAAK;AAC/C,4CAA4C,4BAA4B;AACxE;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C,iBAAiB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,0CAA0C,GAAG,oBAAoB,EAAE;AACnE,0CAA0C,GAAG,qBAAqB,EAAE;AACpE;;AAEA;AACA,0CAA0C,GAAG,kBAAkB,EAAE;AACjE,0CAA0C,GAAG,mBAAmB,EAAE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;ACrYA;AACA;AACA;;AAEmD;;AAEnD,sCAAsC,4DAAW;;;;;;;;;;;;;;;;ACN8B;;AAExE,0BAA0B,iFAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC;AACzC;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B,mCAAmC;AACnC;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,UAAU;AACzD;AACA,+CAA+C,UAAU;AACzD,UAAU;AACV,8CAA8C,UAAU;AACxD,oDAAoD,UAAU;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,8CAA8C;AAC9C,qFAAqF,cAAc,cAAc;AACjH,iFAAiF,cAAc,cAAc;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,gBAAgB,EAAE,mBAAmB;AAChE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,cAAc;AACnC,sBAAsB,cAAc;AACpC,2BAA2B,eAAe,EAAE,cAAc;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,mBAAmB,eAAe,iBAAiB,uBAAuB,aAAa,eAAe;AAC7I;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,UAAU;AAC/B,mCAAmC,UAAU,MAAM,MAAM;AACzD;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACzPA;AACA;AACA;;AAEmD;;AAEnD,sCAAsC,4DAAW;;;;;;;;;;;;;;;;;;ACN8B;AAChB;AACG;;AAE3D,0BAA0B,iFAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA,wCAAwC,WAAW;AACnD,yCAAyC,YAAY;AACrD,sCAAsC,OAAO;AAC7C,uCAAuC,OAAO;AAC9C;AACA;;AAEA;AACA,gCAAgC,iBAAiB;AACjD;AACA;AACA;AACA;;AAEA,wBAAwB,kBAAkB;AAC1C;AACA,iCAAiC,EAAE,gCAAgC,gBAAgB;AACnF;AACA,gDAAgD,WAAW;AAC3D;AACA;;AAEA,iCAAiC,QAAQ;AACzC;AACA,8DAA8D,yFAAyF;AACvJ;AACA;AACA;AACA,gDAAgD,WAAW;AAC3D;AACA;AACA;AACA;AACA;AACA,gDAAgD,WAAW;AAC3D;AACA,mEAAmE,WAAW;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxMA;AACA;AACA;;AAEyD;;AAEzD,0CAA0C,kEAAc;;;;;;;;;;;;;;;;;ACNuB;AAChB;;AAExD,6BAA6B,iFAAY;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA,6DAA6D,UAAU;AACvE,0DAA0D,UAAU;AACpE,iCAAiC,QAAQ;AACzC,wBAAwB,2BAA2B;AACnD;AACA;AACA,8BAA8B,EAAE;AAChC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,mBAAmB;AAC1E,uDAAuD,mBAAmB;AAC1E;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACvHA;AACA;AACA;;AAEuD;;AAEvD,yCAAyC,gEAAa;;;;;;;;;;;;;;;;;ACNyB;AAChB;;AAExD,4BAA4B,iFAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW;AACnD,yCAAyC,YAAY;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,qBAAqB;AACrB,QAAQ;AAAyC;AACjD,EAAE;AAKC;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACxJA;AACA;AACA;;AAE6D;;;AAG7D,4CAA4C,sEAAgB;;;;;;;;;;;;;;;;;ACPmB;AAChB;;AAExD,+BAA+B,iFAAY;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,OAAO;AAC7C,uCAAuC,OAAO;AAC9C,wCAAwC,WAAW;AACnD,yCAAyC,YAAY;AACrD;AACA,+CAA+C,WAAW;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,QAAQ,EAAE,OAAO;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,GAAG,oBAAoB,EAAE;AACnE,0CAA0C,GAAG,qBAAqB,EAAE;AACpE;;AAEA;AACA,0CAA0C,GAAG,kBAAkB,EAAE;AACjE,0CAA0C,GAAG,mBAAmB,EAAE;AAClE;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,2BAA2B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACtPA;AACA;AACA;;AAE6D;;;AAG7D,4CAA4C,sEAAgB;;;;;;;;;;;;;;;;;ACPmB;AAChB;;AAExD,+BAA+B,iFAAY;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,gEAAY;AACzC;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,OAAO;AAC7C,uCAAuC,OAAO;AAC9C,wCAAwC,WAAW;AACnD,yCAAyC,YAAY;AACrD;AACA,+CAA+C,WAAW;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,QAAQ,EAAE,OAAO;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,GAAG,oBAAoB,EAAE;AACnE,0CAA0C,GAAG,qBAAqB,EAAE;AACpE;;AAEA;AACA,0CAA0C,GAAG,kBAAkB,EAAE;AACjE,0CAA0C,GAAG,mBAAmB,EAAE;AAClE;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,4BAA4B,aAAa;AACzC;AACA;AACA,gCAAgC,UAAU;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,UAAU;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;AC1R+C;AACF;AACJ;AACI;AACD;;;;;;;UCJ5C;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D,E;;;;;;;;;;;;;ACNoE;AACxB;;AAE5C;;AAEA;AACA;AACA,gBAAgB,yEAAa;AAC7B,CAAC;;AAED;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://ravel-2/../../core/modules/RavelEmoji.js","webpack://ravel-2/../../core/modules/RavelMessages.js","webpack://ravel-2/../../core/modules/RavelUtilities.js","webpack://ravel-2/../../core/web-components/common/RavelComponentPath.js","webpack://ravel-2/../../core/web-components/common/global-styles.js","webpack://ravel-2/../../core/web-components/common/ravelComponentPath.js","webpack://ravel-2/../../core/web-components/custom-elements/assemblies/index.js","webpack://ravel-2/../../core/web-components/custom-elements/assemblies/ravel-signal-collector/ravel-signal-collector.js","webpack://ravel-2/../../core/web-components/custom-elements/assemblies/ravel-signal-collector/src/RavelSignalCollector.js","webpack://ravel-2/../../core/web-components/custom-elements/ballyhoo/index.js","webpack://ravel-2/../../core/web-components/custom-elements/ballyhoo/ravel-rss-card/ravel-rss-card.js","webpack://ravel-2/../../core/web-components/custom-elements/ballyhoo/ravel-rss-card/src/RavelRSSCard.js","webpack://ravel-2/../../core/web-components/custom-elements/base/index.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-a-stream/ravel-a-stream.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-a-stream/src/RavelAStream.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-assembly/ravel-assembly.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-assembly/src/RavelAssembly.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-element/src/RavelElement.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-m-stream/ravel-m-stream.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-m-stream/src/RavelMStream.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-message-bridge/ravel-message-bridge.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-message-bridge/src/RavelMessageBridge.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-q-stream/ravel-q-stream.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-q-stream/src/RavelQStream.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-sample/ravel-sample.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-sample/src/RavelSample.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-sequence/ravel-sequence.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-sequence/src/RavelSequence.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-signal/ravel-signal.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-signal/src/RavelSignal.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-v-stream/ravel-v-stream.js","webpack://ravel-2/../../core/web-components/custom-elements/base/ravel-v-stream/src/RavelVStream.js","webpack://ravel-2/../../core/web-components/custom-elements/document/index.js","webpack://ravel-2/../../core/web-components/custom-elements/document/ravel-scrapbook/ravel-scrapbook.js","webpack://ravel-2/../../core/web-components/custom-elements/document/ravel-scrapbook/src/RavelScrapbook.js","webpack://ravel-2/../../core/web-components/custom-elements/gadgets/index.js","webpack://ravel-2/../../core/web-components/custom-elements/gadgets/ravel-gadget/ravel-gadget.js","webpack://ravel-2/../../core/web-components/custom-elements/gadgets/ravel-gadget/src/RavelGadget.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/index.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-blockly/ravel-blockly.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-blockly/src/RavelBlockly.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-button/ravel-button.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-button/src/RavelButton.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-carousel/ravel-carousel.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-carousel/src/RavelCarousel.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-cgol-grid/ravel-cgol-grid.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-cgol-grid/src/RavelCgolGrid.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-circular-sequence/ravel-circular-sequence.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-circular-sequence/src/RavelCircularSequence.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-crank/ravel-crank.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-crank/src/RavelCrank.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-crossfade-background/ravel-crossfade-background.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-crossfade-background/src/RavelCrossfadeBackground.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-dock/ravel-dock.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-dock/src/RavelDock.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-emoji-grid/ravel-emoji-grid.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-emoji-grid/src/RavelEmojiGrid.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-field-recorder/ravel-field-recorder.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-field-recorder/src/RavelFieldRecorder.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-fluxly-sound-engine/ravel-fluxly-sound-engine.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-fluxly-sound-engine/src/RavelFluxlySoundEngine.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-fluxum/ravel-fluxum.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-fluxum/src/RavelFluxum.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-lcd/ravel-lcd.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-lcd/src/RavelLCD.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-led-array/ravel-led-array.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-led-array/src/RavelLedArray.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-led/ravel-led.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-led/src/RavelLed.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-menu/ravel-menu.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-menu/src/RavelMenu.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-p5-canvas/ravel-p5-canvas.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-p5-canvas/src/RavelP5Canvas.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-physics-world/ravel-physics-world.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-physics-world/src/RavelPhysicsWorld.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-pot/ravel-pot.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-pot/src/RavelPot.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-progressive-composition-2/ravel-progressive-composition-2.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-progressive-composition-2/src/RavelProgressiveComposition2.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-progressive-composition/ravel-progressive-composition.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-progressive-composition/src/RavelProgressiveComposition.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-recorder/ravel-recorder.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-recorder/src/RavelRecorder.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-sequencer/ravel-sequencer.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-sequencer/src/RavelSequencer.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-slider-2/ravel-slider-2.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-slider-2/src/RavelSlider2.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-slider/ravel-slider.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-slider/src/RavelSlider.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-switch/ravel-switch.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-switch/src/RavelSwitch.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-tally-grid/ravel-tally-grid.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-tally-grid/src/RavelTallyGrid.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-touch-pad/ravel-touch-pad.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-touch-pad/src/RavelTouchPad.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-visualizer-1/ravel-visualizer-1.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-visualizer-1/src/RavelVisualizer1.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-visualizer-2/ravel-visualizer-2.js","webpack://ravel-2/../../core/web-components/custom-elements/gidgets/ravel-visualizer-2/src/RavelVisualizer2.js","webpack://ravel-2/../../core/web-components/index.js","webpack://ravel-2/webpack/bootstrap","webpack://ravel-2/webpack/runtime/define property getters","webpack://ravel-2/webpack/runtime/hasOwnProperty shorthand","webpack://ravel-2/webpack/runtime/make namespace object","webpack://ravel-2/./index.js"],"sourcesContent":["export const RavelEmoji = {\n    \"red-circle\": \"\",\n    \"orange-circle\": \"\",         \n    \"yellow-circle\": \"\",\n    \"green-circle\": \"\",\n    \"blue-circle\": \"\",\n    \"purple-circle\": \"\",\n    \"black-circle\": \"\",\n    \"white-circle\": \"\",\n    \"brown-circle\": \"\",\n    \"red-square\": \"\",\n    \"orange-square\": \"\",         \n    \"yellow-square\": \"\",\n    \"green-square\": \"\",\n    \"blue-square\": \"\",\n    \"purple-square\": \"\",\n    \"black-square\": \"\",\n    \"white-square\": \"\",\n    \"brown-square\": \"\",\n    \"flower\": \"\",\n    \"hamburger\": \"\",\n    \"red\": \"#ff0000\",\n    \"orange\": \"#ff8800\",         \n    \"yellow\": \"#ffff00\",\n    \"green\": \"#00ff00\",\n    \"blue\": \"#0000ff\",\n    \"purple\": \"#ff00ff\",\n    \"black\": \"#000000\",\n    \"white\": \"#ffffff\",\n    \"brown\": \"#5f3e3e\",\n    \"donut\": '',\n    \"roundColors\": [\n        \"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"\n    ],\n    \"squareColors\": [\n        \"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"\n    ],\n    \"roundSelection\": [\n        '','','','','','','','','','', '','','','','','','','','','','','','','','','','','','',''\n    ],\n    \"animals\": [\n        \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\",  \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"\n    ],\n    \"devices\": [\n        '','','','','','','','','','',\n        '','','','','',''\n    ],\n    \"buildings\": [\n        \"\", \"\", \"\", \"\", \"\", \"\", \"\"\n    ],\n    \"emojis\": [ \t'','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','','',\n        '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',''\n],\n\n    getRandomEmoji: function() {\n        return this.emojis[Math.floor(Math.random() * this.emojis.length)];\n    },\n    getRandomRoundEmoji: function() {\n        return this.roundSelection[Math.floor(Math.random() * this.roundSelection.length)];\n    },\n    getRandomRoundColor: function() {\n        return this.roundColors[Math.floor(Math.random() * this.roundColors.length)];\n    },\n    getRandomSquareColor: function() {\n        return this.squareColors[Math.floor(Math.random() * this.squareColors.length)];\n    },\n    getRandomAnimalEmoji: function() {\n        return this.animals[Math.floor(Math.random() * this.roundSelection.length)];\n    }\n}\n\n/* Cut and paste:\n,,,,,,,,,\n,,,,,,,,,\n,,,,,,,,,,\n,,,,,,,,,\n,,,,,,,,,,,\n,,,,,,,,,,,,\n,,,,,,,,,\n,,,,,,,,,,,,\n,,,,,,,,,,,\n,,,,,,,,,,\n,,,,,,,,,,,\n,,,,,,,,,,,\n,,,,,,,,,,,,\n,,,,,,,,,,,,\n,,,,,,,,,,    \n\n*/","export const RavelMessages = {\n\t\n    signalList : {},\n\tsubscriptions : {},\n    \n\tsendMessage:  function(msg, cmd, content) {\n        let evt = new CustomEvent(msg, { detail: { cmd: cmd, content: content }});\n        if (Object.keys(this.subscriptions).includes(msg)) {\n            for (let target of this.subscriptions[msg]) {\n                target.dispatchEvent(evt);\n            }\n        }\n    },\n    \n\tsubscribe: function(msg, target) {\n        if (Object.keys(this.subscriptions).includes(msg)) {\n            this.subscriptions[msg].push(target);\n        } else {\n            this.subscriptions[msg] = [];\n            this.subscriptions[msg].push(target);\n        }\n\t},\n\t\n\tunsubscribe: function(msg, target) {\n\t\tif (Object.keys(this.subscriptions).includes(msg)) {\n            // console.log('removing ' + msg + ' ' + this.subscriptions);\n            if (this.subscriptions[msg].includes(target)) {\n                this.subscriptions[msg].splice(this.subscriptions[msg].indexOf[target], 1);\n            }\n           // console.log('after ' + this.subscriptions);\n        }\n\t}\n} ","\n\nexport const RavelUtilities = {\n\n    convertHexToRgbaColor: function(hex, alpha) {\n        // Remove the leading # if present\n        hex = hex.replace(/^#/, '');\n\n        // Parse 3-digit hex (e.g., #fff) into 6-digit form\n        if (hex.length === 3) {\n            hex = hex.split('').map(c => c + c).join('');\n        }\n\n        // Extract r, g, b\n        const r = parseInt(hex.substring(0, 2), 16);\n        const g = parseInt(hex.substring(2, 4), 16);\n        const b = parseInt(hex.substring(4, 6), 16);\n\n        return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n    }\n\n}","// If building with Webpack, honor the __RAVEL_COMPONENT_BASE__ value instead\nexport const ravelComponentPath =\n  (typeof __RAVEL_COMPONENT_BASE__ !== \"undefined\" && __RAVEL_COMPONENT_BASE__)\n  || (() => {\n    const pathItems = import.meta.url.split(\"//\")[1].split(\"/\");\n    return pathItems.length === 0 ? \"\" : \"/\" + pathItems.slice(1, -2).join(\"/\");\n  })();","const globalStyles = `\n<style>\n@import url('https://fonts.googleapis.com/css2?family=Quantico:wght@400;500;700;900&display=swap');\n</style>\n`\nexport default globalStyles;\n","// If building with Webpack, honor the __RAVEL_COMPONENT_BASE__ value instead\nexport const ravelComponentPath =\n  (typeof __RAVEL_COMPONENT_BASE__ !== \"undefined\" && __RAVEL_COMPONENT_BASE__)\n  || (() => {\n    const pathItems = import.meta.url.split(\"//\")[1].split(\"/\");\n    return pathItems.length === 0 ? \"\" : \"/\" + pathItems.slice(1, -2).join(\"/\");\n  })();","import './ravel-signal-collector/ravel-signal-collector.js';","/*\nDefines the custom element <ravel-v-stream>\n*/\n\nimport { RavelSignalCollector } from './src/RavelSignalCollector.js';\n\ncustomElements.define('ravel-signal-collector', RavelSignalCollector);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport { RavelMessages } from '../../../../../modules/RavelMessages.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelSignalCollector extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #assembly {\n            position: fixed;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n        }\n        #container {\n\n            display: flex;\n            flex-direction: column;\n            padding: 20px;\n            justify-content: center;\n            align-items: center;\n            border-radius: 20px;\n            max-width: 500px;\n            background-color: #ffffff;\n        }\n        #content {\n            display: flex;\n            flex-wrap: wrap;\n            max-width: 400px;\n        }\n        .content > ravel-signal {\n            flex: 1 1 50px;\n        }\n        #icon {\n            font-size: 48px;\n        }\n        #label {\n            font-size: 24px;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <ravel-assembly id=\"assembly\" docked dock-target=\"collectors\" icon=\"\" label=\"signal-collector\">\n        <div id=\"container\">\n        <div id=\"content\">\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <ravel-signal icon=\"\"></ravel-signal>\n            <slot></slot>\n        </div>\n        </div>\n        </ravel-assembly>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n        for (let child of this.shadowRoot.querySelector('slot').assignedElements()) {\n            this.shadowRoot.querySelector('#content').appendChild(child);\n        }\n        this.shadowRoot.querySelector('slot').remove();\n        let count = 0;\n        for (let child of this.shadowRoot.querySelector('#content').children) {\n            let icon = child.getAttribute('icon');\n            RavelMessages.signalList[icon] = count;\n            if (child.getAttribute('value')) {\n                RavelMessages.signalList[icon] = child.getAttribute('value');\n            }\n            count++;   \n        }\n        this.addEventListener('signal', this.handleEvent);\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        RavelMessages.signalList = {};\n    }\n  \n    setup = () => {\n        this.observedMessages = ['signal'];\n        this.subscribe(this.observedMessages);   \n    }\n    \n    teardown = () => {\n        this.unsubscribe(this.observedMessages);\n    }\n\n    handleEvent = (evt) => {\n        // console.log(evt.detail.cmd + ' : ' + evt.detail.content);\n        RavelMessages.signalList[evt.detail.cmd] = evt.detail.content;\n        console.log(RavelMessages.signalList[evt.detail.cmd]);\n    }\n\n    getPicklist = () => {\n        let htmlString = '';\n        for (let key in RavelMessages.signalList) {\n            htmlString += `<option value=\"${key}\">${key}</option>`;\n        }\n        return `<select name=\"signal-list\">${htmlString}</select>`;\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        \n    }\n}\n\n","import './ravel-rss-card/ravel-rss-card.js';","\n/*\nDefines the custom element <rss-card>\n*/\n\nimport { RavelRSSCard } from './src/RavelRSSCard.js';\n\ncustomElements.define('ravel-rss-card', RavelRSSCard);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { RavelEmoji } from '../../../../../modules/RavelEmoji.js';\nimport { ravelComponentPath } from '../../../../common/RavelComponentPath.js';\n\nexport class RavelRSSCard extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n            #card {\n              border: 1px solid #ccc;\n              padding: 1em;\n              border-radius: 8px;\n              cursor: pointer;\n              background: #fafafa;\n              max-width: 400px;\n              transition: box-shadow 0.2s;\n            }\n            #card:hover {\n              box-shadow: 0 2px 6px rgba(0,0,0,0.2);\n            }\n            #modal {\n              position: fixed;\n              top: 0; left: 0; right: 0; bottom: 0;\n              background: rgba(0,0,0,0.7);\n              display: none;\n              justify-content: center;\n              align-items: center;\n              z-index: 9999;\n            }\n            #modal.active {\n              display: flex;\n            }\n            #modal-content {\n              background: #fff;\n              padding: 2em;\n              border-radius: 8px;\n              max-height: 80vh;\n              overflow-y: auto;\n              max-width: 600px;\n              width: 90%;\n            }\n            #modal-content h2 {\n              margin-top: 0;\n            }\n            #modal-content ul {\n              padding-left: 1em;\n            }\n            #modal-content li {\n              margin-bottom: 1em;\n            }\n            #close {\n              font-size: 150px;\n              color: #ffffff;\n              position: fixed;\n              cursor: pointer;\n              top: 0px;\n              right: 50px;\n            }\n          </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n          <div id=\"card\">\n          <img src=\"${ravelComponentPath}/images/loading.svg\">\n          </div>\n          <div id=\"modal\">\n          <span id=\"close\">&times;</span>\n            <div id=\"modal-content\">\n              Foo.\n            </div>\n          </div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, \n            'feed'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.card = this.shadowRoot.querySelector(\"#card\");\n        this.modal = this.shadowRoot.querySelector(\"#modal\");\n        this.close = this.shadowRoot.querySelector(\"#close\");\n        this.signals = [];\n    }\n    \n    connectedCallback() {\n        this.setup();\n        this.feed = this.getAttribute('feed');\n        if (this.feed) this.loadFeed(this.feed);\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    setup = () => {\n       // this.observedMessages = [`${this.id}`];\n       // this.subscribe(this.observedMessages);\n        this.subscribe(this.signals); \n        this.card.addEventListener(\"click\", () =>  this.modal.classList.add(\"active\"));\n        this.close.addEventListener(\"click\", () =>  this.modal.classList.remove(\"active\"));\n        this.modal.addEventListener(\"click\", e => {\n            if (e.target === modal) modal.classList.remove(\"active\");\n        }); \n    }\n\n\n    teardown = () => {\n        this.unsubscribe(this.signals);\n    }\n    \n    loadFeed = async (url) => {\n        try {\n            const proxy = \"https://api.allorigins.win/raw?url=\"; \n            const res = await fetch(proxy + encodeURIComponent(url));\n            const text = await res.text();\n            const parser = new DOMParser();\n            const xml = parser.parseFromString(text, \"application/xml\");\n            const channel = xml.querySelector(\"channel\");\n            const title = channel.querySelector(\"title\")?.textContent ?? \"Feed\";\n            const items = [...xml.querySelectorAll(\"item\")].map(item => ({\n                title: item.querySelector(\"title\")?.textContent,\n                link: item.querySelector(\"link\")?.textContent,\n                description: item.querySelector(\"description\")?.textContent\n            }));\n            this.renderCard(title, items);\n        } catch (err) {\n            console.error(\"Error loading feed:\", err);\n            this.shadowRoot.innerHTML = `<p>Failed to load feed.</p>`;\n        }\n      }\n\n    renderCard(feedTitle, items) {\n        if (!items.length) {\n            this.container.innerHTML = `<p>No items found.</p>`;\n            return;\n        }\n        const first = items[0];\n\n        this.card.innerHTML = `<h3>${feedTitle}</h3>\n            <p><strong>${first.title}</strong></p>\n            <p>${first.description?.substring(0,100) ?? \"\"}...</p>`;\n\n        this.shadowRoot.querySelector(\"#modal-content\").innerHTML = `\n        <h2>${feedTitle}</h2>\n              <ul>\n                ${items.map(item =>\n                  `<li>\n                    <a href=\"${item.link}\" target=\"_blank\">${item.title}</a><br>\n                    <small>${item.description ?? \"\"}</small>\n                  </li>`).join(\"\")}\n              </ul>\n        `;\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n       \n    }\n}\n","import './ravel-assembly/ravel-assembly.js';\nimport './ravel-message-bridge/ravel-message-bridge.js';\nimport './ravel-sample/ravel-sample.js';\nimport './ravel-sequence/ravel-sequence.js';\nimport './ravel-signal/ravel-signal.js';\nimport './ravel-a-stream/ravel-a-stream.js';\nimport './ravel-m-stream/ravel-m-stream.js';\nimport './ravel-q-stream/ravel-q-stream.js';\nimport './ravel-v-stream/ravel-v-stream.js';","/*\nDefines the custom element <ravel-a-stream>\n*/\n\nimport { RavelAStream } from './src/RavelAStream.js';\n\ncustomElements.define('ravel-a-stream', RavelAStream);\n","import { RavelElement } from '../../ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelAStream extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            padding: 20px;\n            margin: 20px;\n            border: 4px solid #777777;\n            border-radius: 18px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"type\">a-stream</div>\n        <div id=\"name\">Foo Bar</div>\n        <div id=\"inputs\">signal 1, signal 2</div>\n        <div id=\"outputs\">signal 3</div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'src'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n        console.log('set up a stream!');\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        // e.g. this.icon = this.shadowRoot.querySelector('#icon');\n    }\n  \n    setup = () => {\n        this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);   \n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'attribute') {\n            // Do something\n        }\n    }\n}\n\n","/*\nDefines the custom element <ravel-assembly>\n*/\n\nimport { RavelAssembly } from './src/RavelAssembly.js';\n\ncustomElements.define('ravel-assembly', RavelAssembly);\n","import { RavelElement } from '../../ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { RavelMessages } from '../../../../../modules/RavelMessages.js';\n\nexport class RavelAssembly extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            border: 10px solid #eeeeee;\n            border-radius: 12px;\n            display: flex;\n            flex-direction: column;\n            padding: 20px;\n            justify-content: center;\n            align-items: center;\n            max-width: 500px;\n            background-color: #ffffff;\n            z-index: 10;\n        }\n        #content {\n            display: flex;\n            justify-content: space-around;\n        }\n        #icon {\n            font-size: 48px;\n        }\n        #label {\n            font-size: 24px;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"icon\"></div>\n        <div id=\"label\">foo</div>\n        <div id=\"content\">\n        <slot></slot>\n        </div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'rows', 'cols', 'show-header', 'border-color'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html\n            + this.constructor.baseStyles\n            + this.constructor.baseHtml;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.rows = 1;\n        this.cols = 1;\n        this.icon = '';\n        this.label = 'assembly';\n        this.showControls = false;   // Assemblies don't generally need signals\n        this.showHeader = true;\t\t\n        window.addEventListener('load', this.onPageLoaded);\n    }\n  \n    setup = () => {\n        this.observedMessages = [`${this.label}`, 'on-page-load'];\n        this.subscribe(this.observedMessages);   \n        this.shadowRoot.querySelector('#icon').addEventListener('click', this.minimize);\n        this.addEventListener(`${this.label}`, this.handleEvents);\n        this.shadowRoot.querySelector('#label').innerHTML = `${this.label}`;\n        this.shadowRoot.querySelector('#icon').innerHTML = `${this.icon}`;\n        if (!this.showHeader) {\n            this.shadowRoot.querySelector('#icon').style.display = 'none';\n            this.shadowRoot.querySelector('#label').style.display = 'none';\n        }\n        if (!this.showControls) {\n            this.shadowRoot.querySelector('#controls-container').style.display = 'none';\n        }\n    }\n    \n    teardown = () => {\n       this.unsubscribe(this.observedMessages);\n       this.shadowRoot.querySelector('#icon').removeEventListener('click', this.minimize);\n    }\n\n    handleEvents = (evt) => {\n        if (evt.detail.cmd === 'maximize') {\n            this.maximize();\n        }\n    }\n\n    minimize = () => {\n        RavelMessages.sendMessage(`${this.dockTarget}`, 'minimize', this);\n        this.shadowRoot.querySelector('#container').style.display = 'none';\n    }\n\n    maximize = () => {\n        this.shadowRoot.querySelector('#container').style.display = 'flex';\n    }\n\n    onPageLoaded = () => {\n        console.log('on-page-load-assembly');\n        if (this.dockTarget) {\n            RavelMessages.sendMessage(`${this.dockTarget}`, 'register', this);\n        }\n        if (this.docked) this.minimize();\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'rows') {\n            this.rows = parseInt(newValue, 10);\n        }\n        if (name === 'cols') {\n            this.cols = parseInt(newValue, 10);\n        }\n        if (name === 'show-header') {\n            if (newValue === 'false') this.showHeader = false;\n        }\n        if (name === 'show-controls') {\n            if (newValue === 'false') this.showControls = false;\n        }\n        if (name === 'icon') {\n            this.icon = newValue;\n            this.shadowRoot.querySelector('#icon').innerHTML = `${this.icon}`;\n        }\n        if (name === 'label') {\n            this.label = newValue;\n            this.shadowRoot.querySelector('#label').innerHTML = `${this.label}`;\n        }\n        if (name === 'border-color') {\n            this.shadowRoot.querySelector('#container').style.border = `10px solid ${newValue}`;\n        }\n        if (name === 'docked') {\n            console.log('dock');\n            this.docked = true;\n        }\n    }\n}\n","import  { RavelMessages }  from '../../../../../modules/RavelMessages.js';\n\nexport class RavelElement extends HTMLElement {\n\tstatic get baseStyles() {\n        return `\n        <style>\n\t\t#container {\n\t\t    pointer-events: auto;\n\t\t}\n\t\t#controls-container {\n\t\t    margin: 20px 10px;\n\t\t    display: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t    font-size: 14px;\n\t\t\tbackground-color: #ffffff;\n\t\t}\n\t\t#signals-in, #signals-out {\n\t\t    margin-right: 10px;\n\t\t}\n\t\t#controls-container {\n\t\t    display:none;\n\t\t}\n        </style>\n        `;\n    }\n  \n    static get baseHtml() { \n        return `\n    <div id=\"controls-container\">\n    <div id=\"signals-in\" class=\"control\"></div>\n\t<div id=\"signals-out\" class=\"control\"></div>\n\t<!--<div id=\"streams\" class=\"control\"></div>-->\n    </div>\n    `;\n    }\n\n\tconstructor() {\n\t\tsuper();\n        this.dockTarget = '';\n\t\tthis.name = '';\n\t\tthis.icon = '';\n\t\tthis.signalsIn = [];\n\t\tthis.signalsOut = [];\n\t\tthis.streams = [];\n\t\tthis.docked = false;\n\t\tthis.showControls = false;\n\t\tthis.messageOnClick = [];\n\t\twindow.addEventListener('load', this.onPageLoaded);\n\t}\n\t\n\tstatic get baseObservedAttributes() { \n        return [ 'icon', 'label', 'type', 'show-close', 'show-controls',\n\t\t\t\t 'docked', 'dock-target', 'state', 'size', 'theme',\n\t\t\t     'positioned', 'width', 'height', 'x', 'y', 'scale', \n\t\t\t\t 'no-click', 'show-feedback', 'virtual-click', 'virtual-drag', 'virtual-release',\n\t\t\t\t 'message-on-click', 'signals-in', 'signals-out', 'streams',\n\t\t\t\t'role', 'aria-roledescription', 'tabindex', 'aria-label', 'aria-description'\n\t\t];\n    }\n\n\tsendMessage(msg, cmd, content) {\n        RavelMessages.sendMessage(msg, cmd, content);\n\t}\n\n\tbroadcastMessage(msg, cmd, content) {\n        let evt = new CustomEvent(msg, { detail: { cmd: cmd, content: content }});\n        window.dispatchEvent(evt);\n\t}\n\n\tsubscribe(msgList) {\n        for (let msg of msgList) {\n            RavelMessages.subscribe(msg, this);\n\t\t}\n\t}\n\t\n\tunsubscribe(msgList) {\n\t\tfor (let msg of msgList) {\n\t\t\tRavelMessages.unsubscribe(msg, this);\n\t\t}\n\t}\n\n\tonPageLoaded = () => {\n\t    this.updateSignals();\n\t}\n\n\thandleMessageOnClick = () => {\n\t\tconsole.log('message-on-click!');\n\t\tif (this.messageOnClick.length > 0) {\n\t\t\tthis.sendMessage(this.messageOnClick[0], this.messageOnClick[1], this.messageOnClick[2]);\n\t\t\tconsole.log(`${this.messageOnClick[0]}, ${this.messageOnClick[1]}, ${this.messageOnClick[2]}`);\n\t\t}\n\t}\n\n\tupdateSignals = () => {\n\t\tthis.removeDuplicateSignals();\n\t\t/*if (this.signalsIn.length > 0) {\n\t\t\tthis.shadowRoot.querySelector('#signals-in').innerHTML = '';\n\t\t}\n\t\tfor (let inputIcon of this.signalsIn) {\n\t\t\tthis.shadowRoot.querySelector('#signals-in').innerHTML += this.checkSignal(inputIcon);\n\t\t}\n\t\tif (this.signalsOut.length > 0) {\n\t\t\tthis.shadowRoot.querySelector('#signals-out').innerHTML = '';\n\t\t}\n\t\tfor (let outputIcon of this.signalsOut) {\n\t\t\tthis.shadowRoot.querySelector('#signals-out').innerHTML += this.checkSignal(outputIcon);\n\t\t}\n\t\t*/\n\t}\n\n\n\tcheckSignal = (signalIcon) => {\t\n\t\tif (signalIcon) {\n\t\t\tif (RavelMessages.signalList[signalIcon])  {\n\t\t\t\treturn signalIcon;\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveDuplicateSignals = () => {\n\n\t}\n\n\tcheckStream = (streamIcon) => {\n\t\treturn streamIcon;\n\t}\n\n\tattributeChangedCallback(name, oldValue, newValue) {\n\t\tif (name === 'icon') {\n\t\t\tthis.icon = newValue;\n\t\t}\n\t\tif (name === 'label') {\n\t\t\tthis.label = newValue;\n\t\t}\n\t\tif (name === 'docked') {\n\t\t\tthis.docked = true;\n\t\t}\n\t\tif (name === 'dock-target') {\n\t\t\tthis.dockTarget = newValue;\n\t\t}\n\t\tif (name === 'width') {\n            this.width = Number(newValue);\n        }\n        if (name === 'height') {\n            this.height = Number(newValue);\n        }\n\t\tif (name === 'size') {\n            this.size = Number(newValue);\n        }\n        if (name === 'x') {\n            this.x = Number(newValue);\n        }\n        if (name === 'y') {\n            this.y = Number(newValue);\n        }\n\t\tif (name === 'message-on-click') {\n\t\t\tthis.messageOnClick = newValue.split(',');\n\t\t}\n\t\tif (name === 'signals-in') {\n\t\t\tthis.signalsIn = newValue.split(',');\n\t\t}\n\t\tif (name === 'signals-out') {\n\t\t\tthis.signalsOut = newValue.split(',');\n\t\t}\n\t\tif (name === 'streams') {\n\t\t\tthis.streams = newValue.split(',');\n\t\t}\n\t\tif (name === 'show-controls') {\n\t\t\tthis.showControls = true;\n\t\t}\n\t}\n\n} ","/*\nDefines the custom element <ravel-m-stream>\n*/\n\nimport { RavelMStream } from './src/RavelMStream.js';\n\ncustomElements.define('ravel-m-stream', RavelMStream);\n","import { RavelElement } from '../../ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelMStream extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            padding: 20px;\n            margin: 20px;\n            border: 4px solid #777777;\n            border-radius: 18px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"type\">m-stream</div>\n        <div id=\"name\">Foo Bar</div>\n        <div id=\"inputs\">signal 1, signal 2</div>\n        <div id=\"outputs\">signal 3</div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'attribute'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        // e.g. this.icon = this.shadowRoot.querySelector('#icon');\n    }\n  \n    setup = () => {\n        this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);   \n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'attribute') {\n            // Do something\n        }\n    }\n}\n\n","/*\nDefines the custom element\n*/\n\nimport { RavelMessageBridge } from './src/RavelMessageBridge.js';\n\ncustomElements.define('ravel-message-bridge', RavelMessageBridge);\n","import { RavelElement } from '../../ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelMessageBridge extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        // e.g. this.icon = this.shadowRoot.querySelector('#icon');\n    }\n  \n    setup = () => {\n        this.observedMessages = ['ravel-message-bridge'];\n        this.subscribe(this.observedMessages);\n        this.addEventListener('ravel-message-bridge', (evt) => {\n            console.log(`Message from elsewhere: ${evt.detail.target} ${evt.detail.cmd} ${evt.detail.content} `);\n            this.sendMessage(evt.detail.target, evt.detail.cmd, evt.detail.content);\n        });\n    }\n    \n    teardown = () => {\n        this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'attribute') {\n            // Do something\n        }\n    }\n}\n\n","/*\nDefines the custom element <ravel-q-stream>\n*/\n\nimport { RavelQStream } from './src/RavelQStream.js';\n\ncustomElements.define('ravel-q-stream', RavelQStream);\n","import { RavelElement } from '../../ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelQStream extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            padding: 20px;\n            margin: 20px;\n            border: 4px solid #777777;\n            border-radius: 18px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"type\">q-stream</div>\n        <div id=\"name\">Foo Bar</div>\n        <div id=\"inputs\">signal 1, signal 2</div>\n        <div id=\"outputs\">signal 3</div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'attribute'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        // e.g. this.icon = this.shadowRoot.querySelector('#icon');\n    }\n  \n    setup = () => {\n        this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);   \n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'attribute') {\n            // Do something\n        }\n    }\n}\n\n","/*\nDefines the custom element <ravel-sample>\n*/\n\nimport { RavelSample } from './src/RavelSample.js';\n\ncustomElements.define('ravel-sample', RavelSample);\n","import { RavelElement } from '../../ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelSample extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'attribute'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        // e.g. this.icon = this.shadowRoot.querySelector('#icon');\n    }\n  \n    setup = () => {\n        this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);   \n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'attribute') {\n            // Do something\n        }\n    }\n}\n\n","\n/*\nDefines the custom element <ravel-sequence>\n*/\n\nimport { RavelSequence } from './src/RavelSequence.js';\n\ncustomElements.define('ravel-sequence', RavelSequence);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { RavelEmoji } from '../../../../../modules/RavelEmoji.js';\n\nexport class RavelSequence extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            position: absolute;\n        }\n        .cell {\n            display: inline-block;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\"></div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'cells', 'icon-active', 'icon-inactive', 'size', 'x', 'y', 'orientation', 'sequence-id', 'period'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.iconActive = RavelEmoji.getRandomEmoji();\n        this.iconInactive = RavelEmoji.getRandomEmoji();\n        this.period = 400;\n        this.shuttle = 0;\n    }\n  \n    setup = () => {\n        this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);   \n        this.cellList = [];\n        this.container.innerHTML = '';\n        for (let i = 0; i < this.cells; i++) {\n            this.cellList.push(this.iconInactive);\n            this.container.innerHTML += `<div class=\"cell\" id=\"cell-${i}\">${this.iconInactive}</div>`;\n        }\n        this.setFontSize();\n        this.timer = setInterval(\n            () => {\n                if (this.shuttle > this.cells) this.shuttle = 0;\n                this.shadowRoot.querySelector(`#cell-${this.shuttle}`).innerText = this.iconInactive;\n                this.shuttle = (this.shuttle + 1) % this.cells;\n                this.shadowRoot.querySelector(`#cell-${this.shuttle}`).innerText = this.iconActive;\n            },\n            this.period\n        );\n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n    \n    setFontSize() {\n        let size = this.size * 20;\n        let newSize = size / this.cells;\n        console.log(this.size);\n        console.log(this.cells);\n        console.log(newSize);\n        if (newSize > 100) newSize = 100;\n        this.container.style['font-size'] = `${newSize}px`;\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'icon-active') {\n            this.iconActive = newValue;\n        }\n        if (name === 'icon-inactive') {\n            this.iconInactive = newValue;\n        }\n        if (name === 'cells') {\n            this.cells = parseInt(newValue, 10);\n            this.cellList = [];\n            this.container.innerHTML = '';\n            for (let i = 0; i < this.cells; i++) {\n                this.cellList.push(this.iconInactive);\n                this.container.innerHTML += `<div class=\"cell\" id=\"cell-${i}\">${this.iconInactive}</div>`;\n            }\n            if (this.shuttle > this.cells) this.shuttle = 0;\n            if (this.size) this.setFontSize();\n        }\n        if (name === 'size') {\n            this.size = parseInt(newValue, 10);\n        }\n        if (name === 'x') {\n            this.container.style.position = 'fixed';\n            this.x = newValue;\n            this.container.style.left = newValue;\n        }\n        if (name === 'y') {\n            this.container.style.position = 'fixed';\n            this.y = newValue;\n            this.container.style.top = newValue;\n        }\n        if (name === 'orientation') {\n            this.orientation = newValue;\n        }\n        if (name === 'sequence-id') {\n            this.sliderId = newValue;\n        }\n    }\n}\n","/*\nDefines the custom element <ravel-signal>\n*/\n\nimport { RavelSignal } from './src/RavelSignal.js';\n\ncustomElements.define('ravel-signal', RavelSignal);\n","import { RavelElement } from '../../ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelSignal extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #icon {\n            font-size: 32px;\n            margin: 5px;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"icon\"></div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        // e.g. this.icon = this.shadowRoot.querySelector('#icon');\n    }\n  \n    setup = () => {\n        this.observedMessages = [];\n        //this.subscribe(this.observedMessages);   \n        this.shadowRoot.querySelector('#icon').innerHTML = `${this.icon}`;\n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    getIcon = () => {\n        return this.icon;\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        // Element doesn't have any for now\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n    }\n}\n\n","/*\nDefines the custom element <ravel-v-stream>\n*/\n\nimport { RavelVStream } from './src/RavelVStream.js';\n\ncustomElements.define('ravel-v-stream', RavelVStream);\n","import { RavelElement } from '../../ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelVStream extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            padding: 20px;\n            margin: 20px;\n            border: 4px solid #777777;\n            border-radius: 18px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"type\">v-stream</div>\n        <div id=\"name\">Foo Bar</div>\n        <div id=\"inputs\">signal 1, signal 2</div>\n        <div id=\"outputs\">signal 3</div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'attribute'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        // e.g. this.icon = this.shadowRoot.querySelector('#icon');\n    }\n  \n    setup = () => {\n        this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);   \n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'attribute') {\n            // Do something\n        }\n    }\n}\n\n","import './ravel-scrapbook/ravel-scrapbook.js';","\n/*\nDefines the custom element <ravel-scrapbook>\n*/\n\nimport { RavelScrapbook } from './src/RavelScrapbook.js';\n\ncustomElements.define('ravel-scrapbook', RavelScrapbook);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { ravelComponentPath } from '../../../../common/ravelComponentPath.js';\n\nexport class RavelScrapbook extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n            #blocker {\n                display: none;\n                background-color: rgba(0, 0, 0, 0.5);\n                position: fixed;\n                top: 0px;\n                left: 0px;\n                width: 100vw;\n                height: 100vh;\n            }\n            #container {\n                user-select: none;\n                border: 10px solid rgba(255, 255, 255, 0.80);\n                border-radius:20px;\n                overflow:hidden;\n                touch-action: none;\n                cursor: pointer;\n                overscroll-behavior: none; \n            }\n            #icon {\n                min-width: 200px;\n                width: 100%;\n                max-width: 200px;\n                max-height: 200px;\n                aspect-ratio: 1 / 1;\n                object-fit: cover; \n                user-select: none;\n                display: block;\n            }\n            #container:focus {\n                background-color: #ffff00;\n                outline: 5px solid #ffff00; \n            } \n\n            #close:focus, a:focus {\n                outline: 5px solid #ffff00; \n                background-color: #ffff00;\n            }\n            \n            #reader {\n                display: none;\n                visibility: hidden;\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                width: 90%;\n                padding: 40px 0px;\n                max-width: 1000px;\n                height: 100%;\n                background-color: rgba(255, 255, 255, 1.0);\n                box-shadow : 0px 0px 0px 10px rgba(255, 255, 255, 0.5);\n                overflow: hidden;\n                overscroll-behavior: none; \n                transition: visibility 0.3s ease;\n            }\n            #reader-content {\n                font-family: Quantico;\n                font-size: 14pt;\n                line-height: 18pt;\n                height: 100%;\n                overflow-y: scroll;\n                overscroll-behavior: none; \n                display: flex;\n                flex-direction: column;\n                align-items: center;\n            }\n            .featured-image, .double-border {\n                max-width: 800px;\n                border: 10px solid #ffff00;\n                box-shadow: 0px 0px 0px 10px #ff0000;\n                border-radius: 24px;\n                margin: 10px;\n            }\n            .featured-image-wrapper {\n                margin-top: 20px;\n            }\n            .date-header {\n                display: inline-block;\n                font-weight: 900;\n                font-size: 24pt;\n                line-height: 24pt;\n                color: #ffffff;\n                background-color: #ff0000;\n                padding: 5px 20px;\n                position: relative;\n                top: -10px;\n                border-bottom-left-radius: 10px;\n                border-bottom-right-radius: 10px;        \n            }\n            h1 { \n                width: 90%;\n                text-align: center;\n                font-weight: 900;\n                font-size: 28pt;\n                line-height: 28pt;\n            }\n            .image-caption {\n                margin-right: -18px;\n                font-size: 8pt;\n                display: inline-block;\n                writing-mode: vertical-rl;\n                text-orientation: sideways;\n            }\n            p, ul, ol {\n                width: 90%;\n                max-width: 840px;\n                margin: 10px auto 10px auto;\n            }\n            #close {\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                width: 50px;\n                height: 50px;\n                position: absolute;\n                right: 20px;\n                top: 50px;\n                border: none;\n                z-index: 3;\n                padding: 10px;\n                background-color: #ffffff;\n                border-radius: 50%;\n\n            }\n            #loading {\n                width: 100%;\n                height: 100%;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                font-size: 150px;\n            }\n            .medium-img {\n                width: 600px;\n            }\n            .medium-small-img {\n                width: 300px;\n            }\n            .small-img {\n                width: 125px;\n            }\n            .full-width {\n                width: 90%;\n            }\n            .footer {\n                width: 100%;\n                min-height: 100px;\n                background-image: url(images/icon-multicolor.png);\n                background-position: center;\n                background-size: 50px;\n                background-repeat: no-repeat;\n            }\n            .space-before {\n                margin-top: 30px;\n            }\n            .arrow {\n                position:relative;\n                top:-15px;\n                margin-right:-10px;\n                border: solid black;\n                border-width: 0 3px 3px 0;\n                display: inline-block;\n                padding: 3px;\n            }\n            .right {\n                transform: rotate(-45deg);\n                -webkit-transform: rotate(-45deg);\n            }\n\n            .left {\n                transform: rotate(135deg);\n                -webkit-transform: rotate(135deg);\n            }\n            .up {\n                transform: rotate(-135deg);\n                -webkit-transform: rotate(-135deg);\n            }\n            .down {\n                transform: rotate(45deg);\n                -webkit-transform: rotate(45deg);\n            }\n            .caption-box {\n                margin-top:10px;\n                padding:20px;\n                border:1px dotted #444444;\n                background:#ffffef;\n            }\n            .resource-collection {\n                max-width: 90%;\n            }\n            @media (max-width: 600px) {\n                #reader-content {\n                    font-size: 12pt;\n                    line-height: 14pt;\n                    padding-top: 60px;\n                }\n                .featured-image {\n                    max-width: 300px;\n                }\n                .medium-img {\n                    width: 200px;\n                }\n                .medium-small-img {\n                    width: 100px;\n                }\n                .small-img {\n                    width: 50px;\n                }\n                h1 {\n                    padding: 0px 5px;\n                    font-size: 24pt;\n                    line-height: 24pt;\n                }\n                .footer {\n                    min-height: 200px;\n                }\n                .date-header {\n                    top: -12px;\n                }\n                iframe {\n                    max-width: 300px;\n                }\n            }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"blocker\"></div>\n        <div id=\"container\" tabindex=\"0\">\n            <img id=\"icon\" tabindex=\"-1\" src=\"${ravelComponentPath}/images/default-backgrounds/0.png\"/>\n            <div id=\"reader\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\">\n                <div id=\"reader-content\" tabindex=\"0\">\n                    <div id=\"loading\"></div>\n                </div>\n                <button id=\"close\" type=\"button\" aria-label=\"Close\">\n                    <img src=\"${ravelComponentPath}/images/close-black.svg\">\n                </button>\n            </div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'icon', 'src', 'max-width', 'anchor', 'label', 'external-link'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.iconButton = this.shadowRoot.querySelector('#icon');\n        this.reader = this.shadowRoot.querySelector('#reader');\n        this.readerContent = this.shadowRoot.querySelector('#reader-content');\n        this.blocker = this.shadowRoot.querySelector('#blocker');\n        this.close = this.shadowRoot.querySelector('#close');\n        this.anchor = null;\n        this.label = 'label';\n        this.src = null;\n        this.icon = `${ravelComponentPath}/images/default-backgrounds/0.png`;\n        this.readerOpen = false;\n    }\n  \n    setup = () => {\n        this.observedMessages = ['scrapbook'];\n        this.subscribe(this.observedMessages);   \n        this.shadowRoot.querySelector('#icon').src = this.icon;\n        this.container.addEventListener('keydown', this.handleKeyDown);\n        this.iconButton.addEventListener('click', this.handleClick);\n        this.close.addEventListener('keydown', this.handleKeyDown);\n        this.close.addEventListener('click', this.handleClick);\n        this.addEventListener('scrapbook', this.handleExternalMessage);\n        this.container.setAttribute('aria-label', this.label);\n        this.container.setAttribute('role', 'button');\n        this.iconButton.setAttribute('aria-label', this.label);\n    }\n    \n    teardown = () => {\n        this.unsubscribe(this.observedMessages);\n        this.container.removeEventListener('keydown', this.handleKeyDown);\n        this.iconButton.removeEventListener('click', this.handleClick);\n        this.close.removeEventListener('keydown', this.handleKeyDown);\n        this.close.removeEventListener('click', this.handleClick);\n        this.removeEventListener('scrapbook', this.handleExternalMessage);\n    }\n\n    handleClick = (evt) => {\n        console.log(evt.target);\n        evt.preventDefault();\n        evt.stopPropagation();\n        if (this.externalLink) {\n            console.log('Send user to ' + this.externalLink);\n        }\n        if (this.readerOpen) {\n            this.closeScrapbook();\n        } else {\n            this.openScrapbook();\n        }\n    }\n\n    handleKeyDown = (evt) => {\n        // Capture tab events on close to keep focus within the reader\n        if ((evt.target === this.close) && (evt.key === 'Tab') && (!evt.shiftKey)) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            this.closeScrapbook();\n            return;\n        }\n        // Capture back tab on container\n        if ((evt.target === this.container) && (evt.key === 'Tab') && (evt.shiftKey)) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            return;\n        }\n        if ((evt.key !== 'Enter') && (evt.key !== 'Space')) return;\n        evt.preventDefault();\n        evt.stopPropagation();\n        if (this.externalLink) {\n            console.log('Send user to ' + this.externalLink);\n        }\n        if (this.readerOpen) {\n            this.closeScrapbook();\n        } else {\n            this.openScrapbook();\n        }\n    }\n\n    handleExternalMessage = (evt) => {\n        if (!this.anchor || !evt.detail.content) return;\n        // responds to an open-scrapbook event targeting this anchor\n        if (evt.detail.cmd === 'open') {\n            if (evt.detail.content === this.anchor) {\n                this.scrollIntoView({\n                    behavior: 'smooth', \n                    block: 'start'     \n                });\n                this.focus();\n                this.openScrapbook();\n            }\n        }\n        if (evt.detail.cmd === 'close') {\n            if (evt.detail.content === this.anchor) {\n                this.closeScrapbook();\n            }\n        }\n    }\n\n    openScrapbook = () => {\n        this.readerOpen = true;\n        this.reader.style.display = 'block';\n        this.reader.style.visibility = 'visible';\n        this.blocker.style.display = 'block';\n        this.fetchScrapbook();\n        this.container.classList.add('selected');\n        document.querySelector('body').style.overflow = 'hidden';\n    }\n\n    closeScrapbook = () => {\n        this.readerOpen = false;\n        this.reader.style.display = 'none';\n        this.reader.style.visibility = 'hidden';\n        this.blocker.style.display = 'none';\n        this.shadowRoot.querySelector('#reader-content').innerHTML = `<div id=\"loading\" class=\"pulse\"></div>`;\n        this.container.classList.remove('selected');\n        this.container.focus();\n        document.querySelector('body').style.overflow = 'auto';\n    }\n\n    fetchScrapbook = () => {\n        // Fetch the scrapbook\n        if (this.src) {\n            fetch(\n                this.src,\n                { \n                    method: \"GET\", \n                    headers: { \"Content-Type\": \"text/plain\", \"pragma\": \"no-cache\", \"cache-control\": \"no-cache\" }\n                }\n            )\n            .then(response => response.text())\n            .then(text => {\n                this.shadowRoot.querySelector('#reader-content').innerHTML = text;\n                this.readerContent.focus();\n            })\n            .catch(error => {\n                console.warn(error);\n            });\n        }\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'icon') {\n            this.icon = newValue;\n        }\n        if (name === 'src') {\n            this.src = newValue;\n        }\n        if (name === 'max-width') {\n            this.maxWidth = parseInt(newValue, 10);\n        }\n        if (name === 'anchor') {\n            this.anchor = newValue;\n        }\n        if (name === 'label') {\n            this.label = newValue;\n        }\n        if (name === 'external-link') {\n            this.externalLink = newValue;\n        }\n    }\n}\n","import './ravel-gadget/ravel-gadget.js';","/*\nDefines the custom element <ravel-gadget>\n*/\n\nimport { RavelGadget } from './src/RavelGadget.js';\n\ncustomElements.define('ravel-gadget', RavelGadget);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { RavelMessages } from '../../../../../modules/RavelMessages.js';\n\nexport class RavelGadget extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            border-radius: 20px;\n            max-width: 500px;\n            background-color: #ffffff;\n        }\n        #content {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            max-width: 460px;\n            justify-content: space-around;\n        }\n        #connect-icon {\n            font-size: 48px;\n            width: 70px;\n            height: 70px;\n            text-align: center;\n        }\n        #uid {\n            font-size: 24px;\n        }\n        #send, #send-button, #receive {\n            width: 150px;\n        }\n        #local-controls-container {\n            width: 120%;\n            display: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t    font-size: 14px;\n            position: relative;\n            bottom: -80px;\n            background-color: #ffffff;\n            padding: 10px;\n            border: 5px solid #eeeeee;\n            border-radius: 20px;\n        }\n        #manual-comms {\n            display: none;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <ravel-assembly id=\"gadget-assembly\" show-controls=\"false\">\n        <div id=\"container\">\n        <div id=\"connect-icon\"></div>\n        <div id=\"content\">\n        <slot></slot>\n        <div id=\"manual-comms\">\n        <input type=\"text\" width=\"20\" id=\"send\"/>\n        <button id=\"send-button\">Send</button>\n        <textarea cols=\"20\" rows=\"1\" id=\"receive\"></textarea>\n        </div>\n        </div>\n        <div id=\"uid\"></div>\n        <div id=\"local-controls-container\">\n            <div id=\"signals-in\" class=\"control\"></div>\n            <div id=\"signals-out\" class=\"control\"></div>\n            <!--<div id=\"streams\" class=\"control\"></div>-->\n        </div>\n        </div>\n\n        </ravel-assembly>\n                \n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'type', 'uid'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html\n            + this.constructor.baseStyles;  \n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.advFilterList = [ { namePrefix: 'Ravel' } ];\n        this.type = \"ble\";\n        this.usbConnected = false;\n        this.dockTarget = '';\n        this.docked = true;\n        this.icon = '';\n        this.label = 'gadget';\n        this.uid = '000000';\n    }\n  \n    setup = () => {\n        this.observedMessages = [`${this.label}`];\n        this.subscribe(this.observedMessages);   \n        if (this.type === 'ble') {\n            this.shadowRoot.querySelector('#connect-icon').addEventListener('click', this.connectBle);\n        }\n        if (this.type === 'serial') {\n            this.service = new WebSerialPort();\n            if (this.service) {\n                console.log('!!!!');\n                this.service.on(\"ravel-gadget-data\", this.serialRead);\n            }\n            this.shadowRoot.querySelector('#connect-icon').addEventListener('click', this.connectSerial);\n        }\n        this.shadowRoot.querySelector('#send-button').addEventListener('click', this.sendButton);\n        this.addEventListener(`${this.label}`, this.handleEvents);\n        if (this.label) this.shadowRoot.querySelector('#gadget-assembly').setAttribute('label', this.label);\n        if (this.icon) this.shadowRoot.querySelector('#gadget-assembly').setAttribute('icon', this.icon);\n        if (this.uid) this.shadowRoot.querySelector('#uid').innerHTML = this.uid;\n        if (this.docked) this.shadowRoot.querySelector('#gadget-assembly').setAttribute('docked', true);\n        console.log('gadet is docked ' + this.docked);\n        if (this.dockTarget) this.shadowRoot.querySelector('#gadget-assembly').setAttribute('dock-target', this.dockTarget);\n    }\n    \n    teardown = () => {\n       this.unsubscribe(this.observedMessages);\n       this.shadowRoot.querySelector('#connect-icon').removeEventListener('click', this.connect);\n    }\n\n    handleEvents = (evt) => {\n        console.log(evt);\n        if (evt.detail.cmd === 'maximize') this.shadowRoot.querySelector('#gadget-assembly').maximize();\n    }\n\n    connectBle = () => {\n        console.log('connect-ble!');\n\t\tnavigator.bluetooth.requestDevice({ \n\t\t\tfilters: this.advFilterList,\n            optionalServices: [ 0xff00 ]   // All Ravel BLE Gadgets will have this service\n\t\t\t//acceptAllDevices: true       // To show all Bluetooth devices (comment out filters)\n        })\n        .then(device => {\n             this.device = device;\n             this.device.addEventListener('gattserverdisconnected', this.onDisconnected);\n             return this.device.gatt.connect();\n        })\n        .then(server => server.getPrimaryService(0xff00))\n        .then(service => service.getCharacteristics())\n        .then(characteristics => this.subscribeToCharacteristics(characteristics))\n        .then(() => {\n            this.setConnectedStatus(true);\n        })\n        .catch(error => console.log('Connection failed!', error));\n    }\n\n    connectSerial = async () => {\n        console.log('connect!');\n\n        if (!this.usbConnected) {\n            if (!this.service.port) {\n                this.usbConnected = true;\n                await this.service.openPort();\n                if (this.service.port) this.setConnectedStatus(true);\n            } \n        } else {\n            this.usbConnected = false;\n            if (this.service.port) {\n                await this.service.closePort();\n            } \n            this.setConnectedStatus(false);\n        }\n    }\n\n    setConnectedStatus = (connected) => {\n        if (connected) {\n            this.shadowRoot.querySelector('#gadget-assembly').setAttribute('border-color', '#00ff00');\n        } else {\n            this.shadowRoot.querySelector('#gadget-assembly').setAttribute('border-color', '#eeeeee');\n        }\n    }\n\n    subscribeToCharacteristics = (characteristics) => {\n        for (let char of characteristics) {\n            console.log(char.uuid);\n            if (char.uuid.includes('fff1')) {\n                this.writeCharacteristic = char;\n            }\n            if (char.uuid.includes('fff2')) {\n                this.readCharacteristic = char;\n                this.readCharacteristic.addEventListener('characteristicvaluechanged', this.readData);\n                this.readCharacteristic.startNotifications();\n            }\n        }       \n    }\n\n    onDisconnected = (evt) => {\n\t\tthis.writeCharacteristic = null;\n\t\tthis.readCharacteristic = null;\n        this.setConnectedStatus(false);\n\t     if (this.device) {\n             this.device.removeEventListener('gattserverdisconnected', this.onDisconnected);\n             if (this.device.gatt.connected) {\n\t\t        this.device.gatt.disconnect();\n                this.device = null;\n    \t\t} \n        }\n\t}\n\n    readData = (event, error) => {\n        // FIXME: Also report the Uid and port from which the data came\n        if (error) {\n            console.log('error: ', error);\n            return;\n        }\n        let valueToRead = event.target.value.getUint8(0);\n        this.shadowRoot.querySelector('#receive').innerHTML = 'value: ' + valueToRead;\n    }\n\n    writeData = (data) => {\n        // FIXME: Also send the Uid and the port that the signal triggered\n        if (this.device && this.device.gatt.connected) {\n            let valueToSend = Uint8Array.of(data);\n            if (this.writeCharacteristic) {\n                console.log('sending ' + valueToSend);\n                this.writeCharacteristic.writeValue(valueToSend);\n            }\n        }\n    }\n\n    sendButton = () => {\n        this.writeData(this.shadowRoot.querySelector('#send').value);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'type') {\n            this.type = newValue;\n            console.log(this.type);\n        }\n        if (name === 'docked') {\n            this.docked = true;\n            console.log('docked' + this.docked);\n        }\n        if (name === 'dock-target') {\n            this.dockTarget = newValue;\n            console.log('target' + this.dockTarget);\n        }\n        if (name === 'uid') {\n            this.uid = newValue;\n        }\n    }\n}\n\nclass WebSerialPort {\n    incomingSerialMessage = [];\n\n    constructor() {\n        // if webserial doesn't exist, return false:\n        if (!navigator.serial) {\n            alert(\"WebSerial is not enabled in this browser\");\n            return false;\n        }\n        this.autoOpen = true;\n        //this.serialConnectCallback = this.serialConnect.bind(this);\n        //this.serialDisconnectCallback = this.serialDisconnect.bind(this);\n        this.port;\n        this.reader;\n        this.serialReadPromise;\n        this.incoming = {\n            data: null\n        }\n        // incoming serial data event:\n        this.dataEvent = new CustomEvent('ravel-gadget-data', {\n            detail: this.incoming,\n            bubbles: true\n        });\n\n        // Note: Not currently implemented\n        //navigator.serial.addEventListener(\"connect\", this.serialConnectCallback);\n        //navigator.serial.addEventListener(\"disconnect\", this.serialDisconnectCallback);\n\n        // Add the handler from the calling script as an event listener\n        this.on = (message, handler) => {\n            parent.addEventListener(message, handler);\n        };\n    }\n\n    async openPort(thisPort) {\n        try {\n            if (thisPort == null) {\n                // pop up window to select port:\n                this.port = await navigator.serial.requestPort(\n                    { filters: [ \n                    { // nrf52 default\n                        usbVendorId: 0x2886,\n                        usbProductId: 0x8045\n                    },\n                    { // esp32 default\n                        usbVendorId: 0x303A,\n                        usbProductId: 0x1001\n                    }\n                ] } \n                );\n            } else {\n                // open the port that was passed:\n                this.port = thisPort;\n            }\n            // set port settings and open it:\n            await this.port.open({ baudRate: 115200 });\n            this.serialReadPromise = this.listenForSerial();\n\n        } catch (err) {\n            console.error(\"There was an error opening the serial port:\", err);\n        }\n    }\n\n    async closePort() {\n        if (this.port) {\n            // stop the reader, so you can close the port:\n            this.reader.cancel();\n            // wait for the listenForSerial function to stop:\n            await this.serialReadPromise;\n            // close the serial port itself:\n            await this.port.close();\n            // clear the port variable:\n            this.port = null;\n        }\n    }\n\n    async sendBytes(data) {\n        // Data is a string here, for example \"0801\"\n        // if there's no port open, skip this function:\n        if (!this.port) return;\n        // if the port's writable: \n        if (this.port.writable) {\n            // initialize the writer:\n            const writer = this.port.writable.getWriter();\n            // convert the data to be sent to an array:\n            let output = new TextEncoder().encode(data);  // This sends as ascii\n            //let output = new Uint8Array(data.match(/../g).map(byte => parseInt(byte, 16)));\n            // send it, then release the writer:\n            writer.write(output).then(writer.releaseLock());\n        }\n    }\n\n    async listenForSerial() {\n        // if there's no serial port, return:\n        if (!this.port) return;\n        // while the port is open:\n        while (this.port.readable) {\n            // initialize the reader:\n            this.reader = this.port.readable.getReader();\n            try {\n                // read incoming serial buffer:\n                const { value, done } = await this.reader.read();\n                if (done) {\n                    break;\n                }\n                if (value) {\n                    for (const byte of value) {\n                        if (byte === 10) {   // 10 === newline\n                            // Process complete message\n                            //console.log(\"Full message:\", this.incomingSerialMessage);\n                            this.incoming.data = new Uint8Array(this.incomingSerialMessage);\n                            // fire the event:\n                            parent.dispatchEvent(this.dataEvent);\n                            this.incomingSerialMessage = []; // Reset for next message\n                        } else {\n                            this.incomingSerialMessage.push(byte);\n                        }\n                    }\n                }\n            } catch (error) {\n                // if there's an error reading the port:\n                console.log(error);\n            } finally {\n                this.reader.releaseLock();\n            }\n        }\n    }\n\n    // this event occurs every time a new serial device\n    // connects via USB:\n    /*serialConnect(event) {\n        console.log('serialConnect callback triggered');\n        console.log(event.target);\n        if (self.autoOpen) {\n            self.openPort(event.target);\n        }\n    }\n\n    // this event occurs every time a new serial device\n    // disconnects via USB:\n    serialDisconnect(event) {\n        console.log('serialDisconnect callback triggered');\n        console.log(event.target);\n    }\n        */\n}","import './ravel-blockly/ravel-blockly.js';\nimport './ravel-button/ravel-button.js';\nimport './ravel-circular-sequence/ravel-circular-sequence.js';\nimport './ravel-crossfade-background/ravel-crossfade-background.js';\nimport './ravel-cgol-grid/ravel-cgol-grid.js';\nimport './ravel-carousel/ravel-carousel.js';\nimport './ravel-crank/ravel-crank.js';\nimport './ravel-dock/ravel-dock.js';\nimport './ravel-emoji-grid/ravel-emoji-grid.js';\nimport './ravel-field-recorder/ravel-field-recorder.js';\nimport './ravel-fluxum/ravel-fluxum.js';\nimport './ravel-fluxly-sound-engine/ravel-fluxly-sound-engine.js';\nimport './ravel-lcd/ravel-lcd.js';\nimport './ravel-led/ravel-led.js';\nimport './ravel-led-array/ravel-led-array.js';\nimport './ravel-menu/ravel-menu.js';\nimport './ravel-pot/ravel-pot.js';\nimport './ravel-p5-canvas/ravel-p5-canvas.js';\nimport './ravel-physics-world/ravel-physics-world.js';\nimport './ravel-progressive-composition/ravel-progressive-composition.js';\nimport './ravel-progressive-composition-2/ravel-progressive-composition-2.js';\nimport './ravel-recorder/ravel-recorder.js';\nimport './ravel-sequencer/ravel-sequencer.js';\nimport './ravel-slider/ravel-slider.js';\nimport './ravel-slider-2/ravel-slider-2.js';\nimport './ravel-switch/ravel-switch.js';\nimport './ravel-tally-grid/ravel-tally-grid.js';\nimport './ravel-touch-pad/ravel-touch-pad.js';\nimport './ravel-visualizer-1/ravel-visualizer-1.js';\nimport './ravel-visualizer-2/ravel-visualizer-2.js';","\n/*\nDefines the custom element <ravel-blockly>\n*/\n\nimport { RavelBlockly } from './src/RavelBlockly.js';\n\ncustomElements.define('ravel-blockly', RavelBlockly);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { ravelComponentPath } from '../../../../common/RavelComponentPath.js';\n\nexport class RavelBlockly extends RavelElement {\n\n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, \n            'signals', 'signal-out'];\n    }\n\n    constructor() {\n        super();\n        this.initialize();\n    }\n\n    initialize() {\n        this._workspace = null;\n        this._container = null;\n        this._resizeObserver = null;\n        this.signals = [];\n    }\n\n    connectedCallback() {\n        this.observedMessages = [`${this.id}`];\n        this.subscribe(this.observedMessages);\n        this.subscribe(this.signals);  \n\n        // Avoid re-init if reconnected\n        if (this._workspace) return;\n\n        // Make sure the host can size itself\n        if (!this.style.display) {\n            this.style.display = 'block';\n            this.style.width = '100%';\n            this.style.height = '100%';\n        }\n        if (!this.style.position) {\n            this.style.position = 'relative';\n        }\n\n        // Create the div that Blockly will own\n        const container = document.createElement('div');\n        container.className = 'ravel-blockly-container';\n        Object.assign(container.style, {\n            position: 'absolute',\n            inset: '0',        // top:0; right:0; bottom:0; left:0\n\n        });\n\n        this.appendChild(container);\n        this._container = container;\n\n        // Build a simple no-category, horizontal, bottom toolbox\n        const toolbox = this._buildToolbox();\n\n        this._workspace = Blockly.inject(container, {\n            toolbox,\n            theme: Blockly.Themes.Zelos,\n            renderer: 'zelos',\n            horizontalLayout: true,\n            toolboxPosition: 'end',\n            scrollbars: false,\n            trashcan: false\n        });\n\n        // Keep Blockly SVG in sync with element size\n        this._resizeObserver = new ResizeObserver(() => {\n        if (this._workspace) {\n            Blockly.svgResize(this._workspace);\n        }\n        });\n        this._resizeObserver.observe(this);\n    }\n\n    disconnectedCallback() {\n        if (this._resizeObserver) {\n        this._resizeObserver.disconnect();\n        this._resizeObserver = null;\n        }\n        if (this._workspace) {\n        this._workspace.dispose();\n        this._workspace = null;\n        }\n        this._container = null;\n        // Optionally clear children:\n        // this.innerHTML = '';\n    }\n\n    _buildToolbox() {\n        // Flat continuous toolbox, horizontal at bottom\n        return {\n            kind: 'flyoutToolbox',\n            contents: [\n                { kind: 'block', type: 'controls_if' },\n                { kind: 'block', type: 'logic_compare' },\n                { kind: 'block', type: 'math_number' },\n                { kind: 'block', type: 'text' },\n                { kind: 'block', type: 'text_print' },\n                // Add your music / custom blocks here\n            ],\n        };\n    }\n\n  // --- Public API helpers ---\n\n  /** Get underlying Blockly workspace */\n  get workspace() {\n    return this._workspace;\n  }\n\n  /** Example: generate JS code (requires javascript generator scripts) */\n  getCode() {\n    if (!this._workspace || !Blockly.JavaScript) return '';\n    return Blockly.JavaScript.workspaceToCode(this._workspace);\n  }\n\n  /** Clear workspace programmatically */\n  clear() {\n    if (this._workspace) {\n      this._workspace.clear();\n    }\n  }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n    }\n}\n","\n/*\nDefines the custom element <ravel-button>\n*/\n\nimport { RavelButton } from './src/RavelButton.js';\n\ncustomElements.define('ravel-button', RavelButton);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { ravelComponentPath } from '../../../../common/RavelComponentPath.js';\n\nexport class RavelButton extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            position: absolute;\n            cursor: pointer;\n            user-select: none;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n        #button-background {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n        }\n        #sensor {\n            position: absolute;\n            border-radius: 24px;\n        }\n        .pixelArt {\n            position: absolute;\n        }\n        .transparent {\n            background-color: rgba(255, 255, 255, 0);\n        }\n        .light-pixel {\n            background-color: #aaaaaa;\n        }\n        .dark-pixel {\n            background-color: #000000;\n        }\n        .color-pixel {\n            background-color: #FFFF00;\n        }\n        #shadow {\n            opacity: 0.5;\n            background-color: #000000;\n        }\n        #button-image img {\n            margin-left: 20%;\n            margin-top: 15%;\n            width: 60%;\n            height: 60%;\n        }\n        #handle-container {\n            position: absolute;\n        }\n            @-webkit-keyframes pulse {\n          to {\n            -webkit-transform: scale(1.1);\n            transform: scale(1.1);\n          }\n        }\n        @keyframes pulse {\n          to {\n            -webkit-transform: scale(.8);\n            transform: scale(.8);\n          }\n        }\n        .pulse {\n          display: inline-block;\n          vertical-align: middle;\n          -webkit-transform: perspective(1px) translateZ(0);\n          transform: perspective(1px) translateZ(0);\n          box-shadow: 0 0 1px rgba(0, 0, 0, 0);\n         -webkit-animation-name: pulse;\n          animation-name: pulse;\n          -webkit-animation-duration: 0.1s;\n          animation-duration: 0.1s;\n          -webkit-animation-timing-function: linear;\n          animation-timing-function: linear;\n          -webkit-animation-iteration-count: infinite;\n          animation-iteration-count: infinite;\n          -webkit-animation-direction: alternate;\n          animation-direction: alternate;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"sensor\"></div>\n        <div id=\"button-background\">\n            <div id=\"top-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"left-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"right-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"bottom-side\" class=\"dark-pixel pixelArt\"></div>            \n            <div id=\"center\" class=\"light-pixel pixelArt\">\n                    <div id=\"button-image\"></div>\n            </div>\n            <div id=\"shadow\" class=\"pixelArt\"></div>\n        </div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, \n            'size', 'w', 'h', 'image',\n            'color', 'pixel-size', 'margin',\n            'value', 'signals', 'signal-out'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.buttonBackground = this.shadowRoot.querySelector('#button-background');\n        this.sensor = this.shadowRoot.querySelector('#sensor');\n        this.signals = [];\n        this.value = 0;\n        this.noClick = false;\n        this.showFeedback = false;\n        this.x = 0;\n        this.y = 0;\n        this.width = 50;\n        this.height = 50;\n        this.pixelSize = 20;\n        this.image = null;\n        this.offsetX = 0;\n        this.offsetY = 0;\n        this.margin = 0;\n        this.color = '#ff0000';\n    }\n  \n    setup = () => {\n        this.observedMessages = [`${this.id}`];\n        this.subscribe(this.observedMessages);\n        this.subscribe(this.signals);  \n        this.container.style.top = `${this.y}px`;\n        this.container.style.left = `${this.x}px`;\n        this.container.style.width = `${this.width}px`;\n        this.container.style.height = `${this.height}px`;\n        this.buildButton();\n\n        this.sensor.style.width = `${this.width + this.pixelSize * 2}px`;\n        this.sensor.style.height = `${this.height + this.pixelSize * 2}px`;\n\n        if (this.image) {\n            this.shadowRoot.querySelector('#button-image').innerHTML = `<img src=\"${ravelComponentPath}/${this.image}\"/>`;\n            console.log(`<img src=\"${ravelComponentPath}/${this.image}/>`);\n        }\n\n        this.shadowRoot.querySelector('#center').style.backgroundColor = this.color;\n        //const rect = this.container.getBoundingClientRect();\n        //this.centerX = rect.left + rect.width / 2;\n        //this.centerY = rect.top + rect.height / 2;\n        if (!this.noClick) {\n            this.addEventListener('pointerdown', this.handleClick);\n        }\n        this.addEventListener(`${this.id}`, this.handleEvent);\n        //this.broadcastMessage('register-sensor', this.id, { x: rect.x, y: rect.y, w: this.w, h: this.height });\n        this.broadcastMessage('register-sensor', this.id, this.container);\n        \n    }\n\n    handleClick = (e) => {\n        e.preventDefault();\n        // Update center values dynamically in case layout shifted\n        this.calculateValue(e.clientX);\n        this.container.classList.add('pulse');\n        setTimeout(() => {\n            this.container.classList.remove('pulse');\n        }, 200);\n        document.addEventListener('pointermove', this.dragElement);\n        document.addEventListener('pointerup', this.endDragElement);\n        document.addEventListener('pointerleave', this.endDragElement);\n    }\n\n    dragElement = (e) => {\n        e.preventDefault();\n        this.calculateValue(e.clientX + this.offsetX);\n    }\n\n    endDragElement = () => {\n        document.removeEventListener('pointermove', this.dragElement);\n        document.removeEventListener('pointerup', this.endDragElement);\n        document.removeEventListener('pointerleave', this.endDragElement);\n    }\n\n    handleEvent = (e) => {\n        e.preventDefault();\n        const type = e.detail.cmd;\n        console.log(type);\n        if (type === 'select') {\n            this.sensor.style.backgroundColor = 'rgba(255, 255, 0, 0.5)';\n        }\n        if (type === 'unselect') {\n            this.sensor.style.backgroundColor = 'rgba(255, 255, 255, 0)';\n        }\n        if (type === 'virtual-click') {\n            this.offsetX = Number(e.detail.content.offsetX);\n            this.offsetX = Number(e.detail.content.offsetY);\n            const rect = this.container.getBoundingClientRect();\n            this.calculateValue(e.clientX - rect.x);\n            this.container.classList.add('pulse');\n            setTimeout(() => {\n                this.container.classList.remove('pulse');\n            }, 200);\n            document.addEventListener('pointermove', this.dragElement);\n            document.addEventListener('pointerup', this.endDragElement);\n            document.addEventListener('pointerleave', this.endDragElement);\n        }\n        if (type === 'virtual-drag') {\n            this.calculateValue(e.clientX, e.clientY);\n        }\n        if (type === 'virtual-release') {\n            this.offsetX = 0;\n            this.offsetY = 0;\n            document.removeEventListener('pointermove', this.dragElement);\n            document.removeEventListener('pointerup', this.endDragElement);\n            document.removeEventListener('pointerleave', this.endDragElement);\n        }\n    }\n\n    \n    teardown = () => {\n        this.unsubscribe(this.signals);\n        this.broadcastMessage('register-sensor', this.id);\n        if (!this.noClick) {\n            this.removeEventListener('pointerdown', this.handleClick);\n        }\n        this.removeEventListener(`${this.id}`, this.handleEvent);\n    }\n    \n    calculateValue = (x, y) => {\n    }\n\n    buildButton = () => {\n        let innerW = this.width - this.pixelSize * 2;\n        let innerH = this.height - this.pixelSize * 2;\n        let centerW = innerW - this.margin * 2;\n        this.innerMax = centerW - this.margin;\n\n        console.log(`${innerW} ${innerH}`);\n        this.setPixelDimensions('top-side', innerW, this.pixelSize);\n        this.setPixelDimensions('left-side', this.pixelSize, innerH);\n        this.setPixelDimensions('bottom-side', innerW, this.pixelSize);\n        this.setPixelDimensions('right-side', this.pixelSize, innerH );\n        this.setPixelDimensions('center', centerW, innerH);\n        this.setPixelDimensions('shadow', innerW, this.pixelSize);\n\n        this.setPixelPosition('top-side', this.pixelSize, 0);\n        this.setPixelPosition('left-side', 0, this.pixelSize);\n        this.setPixelPosition('bottom-side', this.pixelSize, innerH + this.pixelSize);\n        this.setPixelPosition('right-side', innerW + this.pixelSize, this.pixelSize);\n        this.setPixelPosition('center', this.margin + this.pixelSize, this.pixelSize);\n        this.setPixelPosition('shadow', this.pixelSize, innerH);\n    }\n\n    setPixelDimensions = (id, w, h) => {\n        this.shadowRoot.querySelector(`#${id}`).style.width = `${w}px`;\n        this.shadowRoot.querySelector(`#${id}`).style.height = `${h}px`;\n    }\n\n    setPixelPosition = (id, x, y) => {\n        this.shadowRoot.querySelector(`#${id}`).style.top = `${y}px`;\n        this.shadowRoot.querySelector(`#${id}`).style.left = `${x}px`;\n    }\n    \n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'size') {\n            this.size = Number(newValue);\n        }\n        if (name === 'x') {\n            this.x = Number(newValue);\n        }\n        if (name === 'y') {\n            this.y = Number(newValue);\n        }\n        if (name === 'src') {\n            this.src = newValue;\n        }\n        if (name === 'image') {\n            this.image = newValue;\n        }\n        if (name === 'w') {\n            this.width = Number(newValue);\n            console.log(this.width);\n        }\n        if (name === 'h') {\n            this.height = Number(newValue);\n            console.log(this.height);\n        }\n        if (name === 'orientation') {\n            this.orientation = newValue;\n        }\n        if (name === 'value') {\n            this.value = Number(newValue);\n        }\n        if (name === 'signals') {\n            this.signals = newValue.split(',');\n        }\n        if (name === 'signal-out') {\n            this.signalOut = newValue;\n        }\n        if (name === 'no-click') {\n            this.noClick = true;\n        }\n        if (name === 'show-feedback') {\n            this.showFeedback = true;\n        }\n        if (name === 'color') {\n            this.color = newValue;\n        }\n        if (name === 'pixel-size') {\n            this.pixelSize = Number(newValue);\n        }\n        if (name === 'margin') {\n            this.margin = Number(newValue);\n        }\n    }\n\n    map = (val, in_min, in_max, out_min, out_max) => {\n        return (val - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n    }\n}\n","/*\nDefines the custom element <ravel-carousel>\n*/\n\nimport { RavelCarousel } from './src/RavelCarousel.js';\n\ncustomElements.define('ravel-carousel', RavelCarousel);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport  { RavelMessages }  from '../../../../../modules/RavelMessages.js';\n\n// RavelCarousel.js\n// Assumes you already have: RavelElement, globalStyles in scope/imported.\n\nexport class RavelCarousel extends RavelElement {\n  static get localStyles() {\n    return `\n      <style>\n        :host {\n          display: block;\n          --gap: 12px;\n          --pad: 12px;\n          --btn-size: 60px;\n          --btn-bg: rgba(0,0,0,0.55);\n          --btn-fg: white;\n          --btn-radius: 999px;\n          --fade-width: 28px;\n          --snap: 1; /* set to 0 to disable scroll-snap */\n          position: relative;\n          box-sizing: border-box;\n        }\n\n        .wrap {\n          position: relative;\n          box-sizing: border-box;\n          padding: var(--pad);\n        }\n\n        .viewport {\n          position: relative;\n          overflow-x: auto;\n          overflow-y: hidden;\n          -webkit-overflow-scrolling: touch;\n          scroll-behavior: smooth;\n          scrollbar-gutter: stable both-edges;\n          scroll-snap-type: x mandatory;\n          /* allow horizontal wheel / trackpad */\n          overscroll-behavior-x: contain;\n          padding-bottom: 4px; /* room for scrollbar */\n        }\n\n        /* Turn off snap if --snap is 0 */\n        .viewport[data-snap=\"0\"] { scroll-snap-type: none; }\n\n        /* The slotted items layout: flex row */\n        ::slotted(*) {\n          flex: 0 0 auto;\n          scroll-snap-align: start;\n        }\n\n        .track {\n          display: flex;\n          gap: var(--gap);\n          align-items: stretch;\n          width: max-content;\n          min-width: 100%;\n          box-sizing: border-box;\n        }\n\n        /* Basic arrows */\n        button.nav {\n          position: absolute;\n          top: 50%;\n          transform: translateY(-50%);\n          width: var(--btn-size);\n          height: var(--btn-size);\n          border:none;\n          font-size: 24px;\n          /*\n          border: 5px solid #ffff00;\n          box-shadow: 0px 0px 0px 10px #ff0000;\n          */\n          border-radius: var(--btn-radius);\n          background: var(--btn-bg);\n          color: var(--btn-fg);\n          cursor: pointer;\n          display: grid;\n          place-items: center;\n          z-index: 2;\n          padding: 0;\n          user-select: none;\n          -webkit-tap-highlight-color: transparent;\n        }\n\n        button.nav[disabled] {\n          opacity: 0.35;\n          cursor: default;\n        }\n\n        button.prev { left: calc(var(--pad) * 0.5); }\n        button.next { right: calc(var(--pad) * 0.5); }\n\n        /* Subtle edge fades */\n        .fade {\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          width: var(--fade-width);\n          pointer-events: none;\n          z-index: 1;\n        }\n        .fade.left {\n          left: var(--pad);\n          background: linear-gradient(to right, rgba(0,0,0,0.25), rgba(0,0,0,0));\n        }\n        .fade.right {\n          right: var(--pad);\n          background: linear-gradient(to left, rgba(0,0,0,0.25), rgba(0,0,0,0));\n        }\n\n        /* Respect reduced motion */\n        @media (prefers-reduced-motion: reduce) {\n          .viewport { scroll-behavior: auto; }\n        }\n      </style>\n    `;\n  }\n\n  static get html() {\n    return `\n      <div class=\"wrap\">\n        <button class=\"nav prev\" part=\"prev\" aria-label=\"Scroll left\" type=\"button\">\n          <span aria-hidden=\"true\"></span>\n        </button>\n\n        <div class=\"fade left\" part=\"fade-left\"></div>\n        <div class=\"fade right\" part=\"fade-right\"></div>\n\n        <div class=\"viewport\" part=\"viewport\">\n          <div class=\"track\" part=\"track\">\n            <slot></slot>\n          </div>\n        </div>\n\n        <button class=\"nav next\" part=\"next\" aria-label=\"Scroll right\" type=\"button\">\n          <span aria-hidden=\"true\"></span>\n        </button>\n      </div>\n    `;\n  }\n\n  static get observedAttributes() {\n    return [\n      ...super.baseObservedAttributes,\n      // optional carousel controls:\n      \"page-size\",  // \"viewport\" | number(px)\n      \"snap\",       // \"1\" | \"0\"\n      \"arrows\"      // \"1\" | \"0\"\n    ];\n  }\n\n  constructor() {\n    super();\n    const template = document.createElement(\"template\");\n    template.innerHTML =\n      globalStyles + this.constructor.localStyles + this.constructor.html;\n\n    this.attachShadow({ mode: \"open\" });\n    this.shadowRoot.appendChild(template.content.cloneNode(true));\n\n    this.initialize();\n  }\n\n  connectedCallback() {\n    this.setup();\n  }\n\n  disconnectedCallback() {\n    this.teardown();\n  }\n\n  initialize() {\n    this.rows = 1;\n    this.cols = 1;\n\n    this._onPrev = () => this.scrollByPage(-1);\n    this._onNext = () => this.scrollByPage(1);\n    this._onScroll = () => this.updateNavState();\n    this._onSlotChange = () => this.updateNavState();\n    this._ro = null;\n  }\n\n  setup = () => {\n    this.$viewport = this.shadowRoot.querySelector(\".viewport\");\n    this.$prev = this.shadowRoot.querySelector(\".prev\");\n    this.$next = this.shadowRoot.querySelector(\".next\");\n    this.$slot = this.shadowRoot.querySelector(\"slot\");\n\n    this.$prev.addEventListener(\"click\", this._onPrev);\n    this.$next.addEventListener(\"click\", this._onNext);\n    this.$viewport.addEventListener(\"scroll\", this._onScroll, { passive: true });\n    this.$slot.addEventListener(\"slotchange\", this._onSlotChange);\n\n    // Resize observer to keep disabled/enabled state accurate on layout changes\n    if (\"ResizeObserver\" in window) {\n      this._ro = new ResizeObserver(() => this.updateNavState());\n      this._ro.observe(this.$viewport);\n    } else {\n      window.addEventListener(\"resize\", this.updateNavState);\n    }\n\n    this.applyAttributesToUI();\n    this.updateNavState();\n  };\n\n  teardown = () => {\n    if (this.$prev) this.$prev.removeEventListener(\"click\", this._onPrev);\n    if (this.$next) this.$next.removeEventListener(\"click\", this._onNext);\n    if (this.$viewport) this.$viewport.removeEventListener(\"scroll\", this._onScroll);\n    if (this.$slot) this.$slot.removeEventListener(\"slotchange\", this._onSlotChange);\n\n    if (this._ro) {\n      this._ro.disconnect();\n      this._ro = null;\n    } else {\n      window.removeEventListener(\"resize\", this.updateNavState);\n    }\n  };\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n    if (oldValue === newValue) return;\n\n    if (name === \"page-size\" || name === \"snap\" || name === \"arrows\") {\n      this.applyAttributesToUI();\n      this.updateNavState();\n    }\n  }\n\n  // ---------- Public-ish helpers ----------\n  scrollByPage(direction = 1) {\n    if (!this.$viewport) return;\n\n    const pageSize = this.getPageSize();\n    const left = this.$viewport.scrollLeft + direction * pageSize;\n    this.$viewport.scrollTo({ left });\n  }\n\n  scrollToIndex(index = 0) {\n    const items = this.getSlottedItems();\n    const el = items[index];\n    if (el) el.scrollIntoView({ inline: \"start\", block: \"nearest\" });\n  }\n\n  // ---------- Internals ----------\n  getSlottedItems() {\n    const assigned = this.$slot?.assignedElements?.({ flatten: true }) ?? [];\n    return assigned.filter((n) => n && n.nodeType === 1);\n  }\n\n  getPageSize() {\n    const attr = (this.getAttribute(\"page-size\") || \"viewport\").trim();\n    if (attr === \"viewport\") return this.$viewport.clientWidth;\n\n    const n = Number(attr);\n    if (Number.isFinite(n) && n > 0) return n;\n\n    return this.$viewport.clientWidth;\n  }\n\n  applyAttributesToUI() {\n    if (!this.$viewport) return;\n\n    // snap\n    const snap = this.getAttribute(\"snap\");\n    const snapOn = snap == null ? true : snap !== \"0\";\n    this.$viewport.dataset.snap = snapOn ? \"1\" : \"0\";\n\n    // arrows show/hide\n    const arrows = this.getAttribute(\"arrows\");\n    const arrowsOn = arrows == null ? true : arrows !== \"0\";\n    this.$prev.style.display = arrowsOn ? \"\" : \"none\";\n    this.$next.style.display = arrowsOn ? \"\" : \"none\";\n  }\n\n  updateNavState = () => {\n    if (!this.$viewport || !this.$prev || !this.$next) return;\n\n    // If content doesn't overflow, disable both\n    const maxScrollLeft = this.$viewport.scrollWidth - this.$viewport.clientWidth;\n\n    // Tolerances help with subpixel rounding\n    const tol = 1;\n\n    const atStart = this.$viewport.scrollLeft <= tol;\n    const atEnd = this.$viewport.scrollLeft >= maxScrollLeft - tol;\n    const canScroll = maxScrollLeft > tol;\n\n    this.$prev.disabled = !canScroll || atStart;\n    this.$next.disabled = !canScroll || atEnd;\n\n    // Optional: hide fades when not needed\n    const leftFade = this.shadowRoot.querySelector(\".fade.left\");\n    const rightFade = this.shadowRoot.querySelector(\".fade.right\");\n    if (leftFade) leftFade.style.opacity = canScroll && !atStart ? \"1\" : \"0\";\n    if (rightFade) rightFade.style.opacity = canScroll && !atEnd ? \"1\" : \"0\";\n  };\n}\n","\n/*\nDefines the custom element <ravel-cgol-grid>\n*/\n\nimport { RavelCgolGrid } from './src/RavelCgolGrid.js';\n\ncustomElements.define('ravel-cgol-grid', RavelCgolGrid);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { ravelComponentPath } from '../../../../common/RavelComponentPath.js';\n\nexport class RavelCgolGrid extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            position: absolute;\n            cursor: pointer;\n            user-select: none;\n            display: grid;\n            justify-content: center;\n            align-items: center;\n        }\n        .cell img {\n            width: 16px;\n            height: 16px;\n        }\n        .visible {\n            visibility: visible;\n        }\n        .not-visible {\n            visibility: hidden; \n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"sensor\">\n        <div id=\"container\">\n        </div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, \n            'images', 'rows', 'cols', 'coverage', 'angle',\n            'signals', 'signal-out'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.sensor = this.shadowRoot.querySelector('#sensor');\n        this.signals = [];\n        this.x = 0;\n        this.y = 0;\n        this.rows = 4;\n        this.cols = 5;\n        this.width = 50;\n        this.height = 50;\n        this.pixelSize = 20;\n        this.images = ['/images/blue-flower.png'];\n        this.coverage = 30;\n        this.angle = 0;\n        this.playing = false;\n        this.cells = [];  // 2D array for cell states\n        this.count = [];  // 2D array for neighbor counts\n\n    }\n  \n    setup = () => {\n        this.observedMessages = [`${this.id}`];\n        this.subscribe(this.observedMessages);\n        this.subscribe(this.signals);  \n\n        this.container.style.display = 'grid';\n        this.container.style.top = `${this.y}px`;\n        this.container.style.left = `${this.x}px`;\n        this.container.style.transform = `rotate(${this.angle}deg)`;\n        this.container.style.gridTemplateRows = `repeat(${this.rows}, 1fr)`;\n        this.container.style.gridTemplateColumns = `repeat(${this.cols}, 1fr)`;\n\n        this.setupField();\n\n        this.broadcastMessage('register-sensor', this.id, this.container);\n        // this.broadcastMessage('register-sensor', this.id, { x: this.x + this.w/2, y: this.y + this.h/2, w: this.w, h: this.height });\n\n        this.timer = setInterval(this.processFrame, 100);\n\n        this.container.addEventListener('click', this.handleEvent);\n    }\n\n    handleClick = (e) => {\n        e.preventDefault();\n    }\n\n    handleEvent = (e) => {\n        if (!this.playing) this.playing = true;\n        if ((e.target.id.includes('cell')) && !(e.target.id.includes('img'))) {\n            this.shadowRoot.querySelector(`#${e.target.id}`).classList.toggle('visible', true);\n            let index = 0;\n            try {\n                index = parseInt(e.target.id.replace('cell-', ''));\n            } catch(e) {}\n            console.log(index);\n            console.log(this.shadowRoot.querySelector(`#${e.target.id}`));\n        }\n    }\n\n    setupField = () => {\n        for (let i = 0; i < this.rows; i++) {\n            this.cells[i] = [];\n            this.count[i] = [];\n\n            for (let j = 0; j < this.cols; j++) {\n                const index = (this.cols * i) + j;  // still useful for DOM IDs\n                const cell = document.createElement('div');\n                cell.classList.add('cell');\n                const cellImg = document.createElement('img');\n                cellImg.src = this.getRandomImage();\n                cell.id = `cell-${index}`;\n                cellImg.id = `cell-img-${index}`;\n\n                const isAlive = Math.floor(Math.random() * 100) < this.coverage;\n\n                this.cells[i][j] = isAlive;\n                this.count[i][j] = 0;\n\n                cellImg.classList.add(isAlive ? 'visible' : 'not-visible');\n                cell.appendChild(cellImg);\n                this.container.appendChild(cell);\n            }\n        }\n    };\n    \n    processFrame = () => {\n        if (!this.playing) return;\n\n        // Step 1: Count neighbors based on *current* state\n        for (let i = 0; i < this.rows; i++) {\n            for (let j = 0; j < this.cols; j++) {\n            this.count[i][j] = this.getNeighborCount(i, j);\n            }\n        }\n\n        // Step 2: Prepare next generation\n        const nextCells = [];\n\n        for (let i = 0; i < this.rows; i++) {\n            nextCells[i] = [];\n\n            for (let j = 0; j < this.cols; j++) {\n            const alive = this.cells[i][j];\n            const neighbors = this.count[i][j];\n            const index = i * this.cols + j;\n            const cellElement = this.shadowRoot.querySelector(`#cell-img-${index}`);\n\n            let nextState = alive;\n\n            if (!alive && neighbors === 3) {\n                nextState = true;\n            } else if (alive && (neighbors < 2 || neighbors > 3)) {\n                nextState = false;\n            }\n\n            nextCells[i][j] = nextState;\n\n            if (cellElement) {\n                cellElement.classList.toggle('visible', nextState);\n                cellElement.classList.toggle('not-visible', !nextState);\n            }\n            }\n        }\n\n        // Step 3: Commit next generation\n        this.cells = nextCells;\n    };\n\n    getRandomImage = () => {\n        let index = Math.floor(Math.random() * this.images.length);\n        return `${ravelComponentPath}/${this.images[index]}`;\n    }\n\n    getNeighborCount = (row, col) => {\n        let count = 0;\n        const directions = [\n            [-1, 0],  // top\n            [-1, -1], // top-left\n            [-1, 1],  // top-right\n            [0, -1],  // left\n            [0, 1],   // right\n            [1, -1],  // bottom-left\n            [1, 1],   // bottom-right\n            [1, 0]    // bottom\n        ];\n\n        for (let [dr, dc] of directions) {\n            const r = row + dr;\n            const c = col + dc;\n            if (r >= 0 && r < this.rows && c >= 0 && c < this.cols) {\n                if (this.cells[r][c]) count++;\n            }\n        }\n\n        return count;\n    }\n\n    teardown = () => {\n        this.unsubscribe(this.signals);\n        this.broadcastMessage('register-sensor', this.id);\n        if (!this.noClick) {\n            this.removeEventListener('pointerdown', this.handleClick);\n        }\n        this.removeEventListener(`${this.id}`, this.handleEvent);\n    }\n    \n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'x') {\n            this.x = Number(newValue);\n        }\n        if (name === 'y') {\n            this.y = Number(newValue);\n        }\n        if (name === 'images') {\n            this.images = newValue.split(',');\n            console.log(this.images.length);\n        }\n        if (name === 'width') {\n            this.width = Number(newValue);\n        }\n        if (name === 'height') {\n            this.height = Number(newValue);\n        }\n        if (name === 'angle') {\n            this.angle = parseInt(newValue, 10);\n        }\n        if (name === 'rows') {\n            this.rows = parseInt(newValue, 10);\n        }\n        if (name === 'cols') {\n            this.cols = parseInt(newValue, 10);\n        }\n        if (name === 'coverage') {\n            this.coverage = parseInt(newValue, 10);\n        }\n        if (name === 'signals') {\n            this.signals = newValue.split(',');\n        }\n        if (name === 'signal-out') {\n            this.signalOut = newValue;\n        }\n        if (name === 'no-click') {\n            this.noClick = true;\n        }\n    }\n\n    map = (val, in_min, in_max, out_min, out_max) => {\n        return (val - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n    }\n}\n","/*\nDefines the custom element <ravel-circular-sequence>\n*/\n\nimport { RavelCircularSequence } from './src/RavelCircularSequence.js';\n\ncustomElements.define('ravel-circular-sequence', RavelCircularSequence);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelCircularSequence extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            position: relative;\n            border: 10px solid #aaaaaa;\n            border-radius: 50%;\n            width: 480px;\n            height: 480px;\n            font-size: 48px;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"cursor\"></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'background', 'display-count', 'speed'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.width = 480;\n        this.height = 480;\n        this.centerX = this.width / 2;\n        this.centerY = this.height / 2;\n        this.cursorAngle = 0;\n        this.cursorRadius = 180;\n        this.cursorSpeed = 2000;\n        this.displayCount = 16;\n        this.elementRadius = 24;\n        this.cursor = this.shadowRoot.querySelector('#cursor');\n    }\n  \n    setup = () => {\n        this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);   \n        this.container.style.width = `${this.width}px`; \n        this.container.style.height = `${this.height}px`;\n        for (let element of this.shadowRoot.querySelector('#container').children) {\n            console.log(element);\n            element.style.position = 'absolute';\n            element.style.left = '0px';\n            element.style.top = '0px';\n            element.style['transform-origin'] = 'center'\n            element.style.transform = `translate(-50%, -50%)`\n        }\n        this.updateDisplay();\n        this.moveCursor();\n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    updateDisplay = () => {\n        console.log('update display');\n        let children = this.shadowRoot.querySelector('#container').children;\n        let anglePerDivision = 360 / this.displayCount;\n        console.log(anglePerDivision);\n        // cursor is always first child\n        let angle = 0;\n        for (let i = 1; i < children.length; i++) {\n            if (i <= this.displayCount) {\n                children[i].style.display = 'block';\n                this.placeAtAngle(children[i], angle);\n                angle += anglePerDivision;\n            } else {\n                children[i].style.display = 'none';\n            }\n\n        }\n    }\n\n    moveCursor = () => {\n            this.cursorAngle += (2 * Math.PI) / this.cursorSpeed; // Update angle per frame (~60fps)\n            const x = this.centerX + this.cursorRadius * Math.cos(this.cursorAngle);\n            const y = this.centerY + this.cursorRadius * Math.sin(this.cursorAngle);\n    \n            this.cursor.style.left = `${x}px`;\n            this.cursor.style.top = `${y}px`;\n    \n            requestAnimationFrame(this.moveCursor);\n        }\n    \n    placeAtAngle = (element, angle) => {\n        let radians = angle * Math.PI / 180;\n        // this.centerX is the same as radius\n        const x = this.centerX + (this.centerX +  + this.elementRadius / 4) * Math.cos(radians);\n        const y = this.centerY + (this.centerX +  + this.elementRadius / 4) * Math.sin(radians);\n        console.log(x + ' ' + y);\n        element.style.left = `${x}px`;\n        element.style.top = `${y}px`;\n    }\n\n\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'background') {\n            this.background = newValue;\n        }\n        if (name === 'display-count') {\n            this.displayCount = parseInt(newValue, 10);\n            this.updateDisplay();\n        }\n        if (name === 'speed') {\n            this.cursorSpeed = parseInt(newValue, 10);\n        }\n    }\n}","\n/*\nDefines the custom element <ravel-crank>\n*/\n\nimport { RavelCrank } from './src/RavelCrank.js';\n\ncustomElements.define('ravel-crank', RavelCrank);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { RavelEmoji } from '../../../../../modules/RavelEmoji.js';\nimport { ravelComponentPath } from '../../../../common/RavelComponentPath.js';\n\nexport class RavelCrank extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            position: absolute;\n            cursor: pointer;\n            user-select: none;\n        }\n        #crank-marker, #crank-knob {\n            position: relative;\n        }\n        #sensor {\n            position: absolute;\n            left: -10%;\n            top: -10%;\n            width: 120%;\n            height: 120%;\n            border-radius: 50%;\n            \n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"sensor\"></div>\n        <div id=\"crank-knob\"></div>\n        <div id=\"crank-marker\"></div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, \n            'size', 'w', 'h', 'use-svg', 'color',\n            'marker', 'icon', 'marker', 'angle', 'min', 'max',\n            'value', 'signals', 'signal-out'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.potMarker = this.shadowRoot.querySelector('#crank-marker');\n        this.potKnob = this.shadowRoot.querySelector('#crank-knob');\n        this.sensor = this.shadowRoot.querySelector('#sensor');\n        this.marker = '';\n        this.icon = 'white-circle';\n        this.size = 24;\n        this.signals = [];\n        this.value = 0;\n        this.noClick = false;\n        this.showFeedback = false;\n        this.x = 0;\n        this.y = 0;\n        this.width = 50;\n        this.height = 50;\n        this.min = 0;\n        this.max = 1;\n        this.offsetX = 0;\n        this.offsetY = 0;\n        this.useSvg = false;\n        this.lastAngle = null;\n        this.lastTimestamp = null;\n        this.velocitySamples = [];\n    }\n  \n    setup = () => {\n        this.observedMessages = [`${this.id}`];\n        this.subscribe(this.observedMessages);\n        this.subscribe(this.signals);  \n        //this.potKnob.textContent = RavelEmoji.getRandomRoundEmoji();\n        //this.potMarker .textContent = RavelEmoji['white-circle']; // \n        // x, y are the center point\n\n        this.container.style.top = `${this.y}px`;\n        this.container.style.left = `${this.x}px`;\n        this.container.style['width'] = `${this.width}px`;\n        this.container.style['height'] = `${this.height}px`;\n        this.container.style['font-size'] = `${this.width}px`;\n        this.container.style['font-size'] = `${this.width}px`;\n        this.potKnob.textContent = RavelEmoji[this.icon];\n        this.potMarker.textContent = RavelEmoji[this.marker]; // \n        this.potMarker.style['font-size'] = `${this.width / 5}px`;\n        this.potMarker.style['top'] = `-${this.width - this.width / 16}px`;\n        this.potMarker.style['left'] = `${- this.width /  4 }px`;\n        this.potKnob.style['line-height'] = `-${this.width + 10}px`;\n        this.container.style[\"transform\"] = \"rotate(\" + this.angle + \"deg)\";\n        \n        if (this.useSvg) {\n            this.shadowRoot.querySelector('#crank-knob').innerHTML = this.potSvg;\n            this.shadowRoot.querySelector('#crank-knob-svg').style.width = `${this.width}px`;\n            this.shadowRoot.querySelector('#crank-knob-svg').style.height = `${this.height}px`;\n            this.shadowRoot.querySelector('#crank-knob-svg').querySelector('#circle').style.fill = `${this.color}`;\n        }\n        //this.potKnob.style['top'] = `-${this.size / 8}px`;\n        this.potMarker.style['opacity'] = `0.75`;\n        const rect = this.container.getBoundingClientRect();\n        this.centerX = rect.left + rect.width / 2;\n        this.centerY = rect.top + rect.height / 2;\n        if (!this.noClick) {\n            this.addEventListener('pointerdown', this.handleClick);\n        }\n        this.addEventListener(`${this.id}`, this.handleEvent);\n        this.broadcastMessage('register-sensor', this.id, this.container);\n        //this.broadcastMessage('register-sensor', this.id, { x: this.x + this.w/2, y: this.y + this.h/2, w: this.w, h: this.height });\n    }\n\n    handleClick = (e) => {\n        e.preventDefault();\n        // Update center values dynamically in case layout shifted\n        const rect = this.container.getBoundingClientRect();\n        this.centerX = rect.left + rect.width / 2;\n        this.centerY = rect.top + rect.height / 2;\n        this.calculateCrankAngle(e.clientX, e.clientY);\n        document.addEventListener('pointermove', this.dragElement);\n        document.addEventListener('pointerup', this.endDragElement);\n        document.addEventListener('pointerleave', this.endDragElement);\n    }\n\n    dragElement = (e) => {\n        e.preventDefault();\n        this.calculateCrankAngle(e.clientX + this.offsetX, e.clientY + this.offsetY);\n    }\n\n    endDragElement = () => {\n        document.removeEventListener('pointermove', this.dragElement);\n        document.removeEventListener('pointerup', this.endDragElement);\n        document.removeEventListener('pointerleave', this.endDragElement);\n    }\n\n    handleEvent = (e) => {\n        e.preventDefault();\n        const type = e.detail.cmd;\n        console.log(type);\n        if (type === 'select') {\n            this.sensor.style.backgroundColor = 'rgba(255, 255, 0, 0.5)';\n        }\n        if (type === 'unselect') {\n            this.sensor.style.backgroundColor = 'rgba(255, 255, 255, 0)';\n        }\n        if (type === 'virtual-click') {\n            let x = e.detail.content.startX;\n            let y = e.detail.content.startY;\n            this.offsetX = Number(e.detail.content.offsetX);\n            this.offsetY = Number(e.detail.content.offsetY);\n            const rect = this.container.getBoundingClientRect();\n            this.centerX = (rect.left + rect.width / 2);\n            this.centerY = (rect.top + rect.height / 2);\n            this.calculateCrankAngle(x + this.offsetX, y + this.offsetY);\n            document.addEventListener('pointermove', this.dragElement);\n            document.addEventListener('pointerup', this.endDragElement);\n            document.addEventListener('pointerleave', this.endDragElement);\n            console.log(this.offsetX + \" \" + this.offsetY);\n        }\n        if (type === 'virtual-drag') {\n            this.calculateCrankAngle(e.clientX, e.clientY);\n        }\n        if (type === 'virtual-release') {\n            this.offsetX = 0;\n            this.offsetY = 0;\n            document.removeEventListener('pointermove', this.dragElement);\n            document.removeEventListener('pointerup', this.endDragElement);\n            document.removeEventListener('pointerleave', this.endDragElement);\n        }\n    }\n\n    \n    teardown = () => {\n        this.unsubscribe(this.signals);\n        this.broadcastMessage('register-sensor', this.id);\n        if (!this.noClick) {\n            this.removeEventListener('pointerdown', this.handleClick);\n        }\n        this.removeEventListener(`${this.id}`, this.handleEvent);\n    }\n    \n    calculateCrankAngle = (x, y) => {\n\n    \tlet d1 = y - this.centerY;\n    \tlet d2 = x - this.centerX;\n\n        this.angle = Math.atan2(d1, d2) * (180 / Math.PI) - 180;\n        this.container.style[\"transform\"] = \"rotate(\" + this.angle + \"deg)\";\n       \n        const now = performance.now();\n\n        if (this.lastAngle !== null && this.lastTimestamp !== null) {\n            // Step 1: Remap angles so 180 is the logical zero\n            const logicalNow = (this.angle + 180) % 360;\n            const logicalLast = (this.lastAngle + 180) % 360;\n\n            // Step 2: Normalize difference to range [-180, 180]\n            let deltaAngle = ((logicalNow - logicalLast + 540) % 360) - 180;\n            //  Adding 540 (not 180) prevents negative mod issues\n\n            // Step 3: Calculate angular velocity\n            const deltaTime = (now - this.lastTimestamp) / 1000; // seconds\n            this.angularVelocity = deltaAngle / deltaTime;\n\n            // Step 4: Smooth it \n            this.velocitySamples.push(this.angularVelocity);\n            if (this.velocitySamples.length > 5) this.velocitySamples.shift();\n            this.angularVelocity = (this.velocitySamples.reduce((a, b) => a + b, 0) / this.velocitySamples.length) / 1000;\n            if (this.angularVelocity > 1) this.angularVelocity = 1;\n            if (this.angularVelocity < -1) this.angularVelocity = -1;\n            console.log('Angular Velocity:', this.angularVelocity.toFixed(2));\n        }\n\n        this.lastAngle = this.angle;\n        this.lastTimestamp = now;\n\n        this.sendMessage(this.signalOut, this.id, this.angularVelocity);\n     \n        /*\n        if (this.angle <= 210) {\n            this.value = this.map(this.angle, 0, 210, 0.3, 1);\n        } else {\n            this.value = this.map(this.angle, 305, 360, 0, .3);\n        }\n        */\n    }\n    \n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'size') {\n            this.size = Number(newValue);\n        }\n        if (name === 'x') {\n            this.container.style.position = 'absolute';\n            this.x = Number(newValue);\n        }\n        if (name === 'y') {\n            this.container.style.position = 'absolute';\n            this.y = Number(newValue);\n        }\n        if (name === 'use-svg') {\n            this.useSvg = true;\n        }\n        if (name === 'w') {\n            this.width = Number(newValue);\n        }\n        if (name === 'h') {\n            this.height = Number(newValue);\n        }\n        if (name === 'color') {\n            this.color = newValue;\n        }\n        if (name === 'orientation') {\n            this.orientation = newValue;\n        }\n        if (name === 'icon') {\n            this.icon = newValue;\n        }\n        if (name === 'marker') {\n            this.marker = newValue;\n        }\n        if (name === 'angle') {\n            this.angle = Number(newValue);\n        }\n        if (name === 'value') {\n            this.value = Number(newValue);\n        }\n        if (name === 'signals') {\n            this.signals = newValue.split(',');\n        }\n        if (name === 'signal-out') {\n            this.signalOut = newValue;\n        }\n        if (name === 'no-click') {\n            this.noClick = true;\n        }\n        if (name === 'show-feedback') {\n            this.showFeedback = true;\n        }\n    }\n\n    map = (val, in_min, in_max, out_min, out_max) => {\n        return (val - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n    }\n\n    potSvg = `\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   version=\"1.1\"\n   id=\"crank-knob-svg\"\n   width=\"267.03113\"\n   height=\"257.45898\"\n   viewBox=\"0 0 267.03113 257.45898\"\n   sodipodi:docname=\"crank-1.svg\"\n   inkscape:version=\"1.3.2 (091e20e, 2023-11-25)\"\n   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n   xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   xmlns:svg=\"http://www.w3.org/2000/svg\">\n  <defs\n     id=\"defs1\" />\n  <sodipodi:namedview\n     id=\"namedview1\"\n     pagecolor=\"#ffffff\"\n     bordercolor=\"#666666\"\n     borderopacity=\"1.0\"\n     inkscape:showpageshadow=\"2\"\n     inkscape:pageopacity=\"0.0\"\n     inkscape:pagecheckerboard=\"0\"\n     inkscape:deskcolor=\"#d1d1d1\"\n     inkscape:zoom=\"0.61458334\"\n     inkscape:cx=\"21.152542\"\n     inkscape:cy=\"136.67796\"\n     inkscape:window-width=\"1336\"\n     inkscape:window-height=\"841\"\n     inkscape:window-x=\"0\"\n     inkscape:window-y=\"38\"\n     inkscape:window-maximized=\"0\"\n     inkscape:current-layer=\"g1\"\n     showguides=\"false\" />\n  <g\n     inkscape:groupmode=\"layer\"\n     inkscape:label=\"Image\"\n     id=\"g1\"\n     transform=\"translate(-1052.7501,459.03516)\">\n    <path\n       id=\"rect70\"\n       style=\"fill:#000000;fill-opacity:0.5;stroke:none;stroke-width:1.64482\"\n       d=\"M 1146.9317 -459.03516 L 1146.9317 -417.36914 L 1107.1778 -417.36914 L 1107.1778 -374.47071 L 1107.1778 -373.98438 A 43.728813 43.728813 0 0 0 1105.8341 -374.01758 A 43.728813 43.728813 0 0 0 1062.1056 -330.28907 A 43.728813 43.728813 0 0 0 1105.8341 -286.56055 A 43.728813 43.728813 0 0 0 1107.1778 -286.65625 L 1107.1778 -286.18555 L 1107.1778 -243.24219 L 1146.9317 -243.24219 L 1146.9317 -201.57618 L 1235.17 -201.57618 L 1235.17 -243.24219 L 1274.9239 -243.24219 L 1274.9239 -286.18555 L 1319.7813 -286.18555 L 1319.7813 -374.42383 L 1274.9239 -374.42383 L 1274.9239 -417.36914 L 1235.17 -417.36914 L 1235.17 -459.03516 L 1146.9317 -459.03516 z \" />\n    <path\n       id=\"circle\"\n       style=\"fill:#ff6600;fill-opacity:1;stroke:none;stroke-width:1.33333\"\n       d=\"M 1191.0509 -411.66211 A 81.355934 81.355934 0 0 0 1120.3595 -369.99805 A 44.296047 44.296047 0 0 1 1146.5196 -329.59961 A 44.296047 44.296047 0 0 1 1120.9435 -289.47852 A 81.355934 81.355934 0 0 0 1191.0509 -248.94922 A 81.355934 81.355934 0 0 0 1272.4063 -330.30469 A 81.355934 81.355934 0 0 0 1191.0509 -411.66211 z \" />\n    <circle\n       style=\"fill:#000000;stroke-width:1.03294;stroke-linecap:round;stroke-linejoin:round\"\n       id=\"path1\"\n       cx=\"1104.3418\"\n       cy=\"-329.27618\"\n       r=\"30.602644\" />\n  </g>\n</svg>\n`;\n}\n\n","/*\nDefines the custom element <ravel-crossfade-background>\n*/\n\nimport { RavelCrossfadeBackground } from './src/RavelCrossfadeBackground.js';\n\ncustomElements.define('ravel-crossfade-background', RavelCrossfadeBackground);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { ravelComponentPath } from '../../../../common/ravelComponentPath.js';\n\nexport class RavelCrossfadeBackground extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container-1 {\n            position: fixed;\n            top: 0px;\n            left: 0px;\n            opacity: 1;\n        }\n        #container-2 {\n            top: 0px;\n            left: 0px;\n            position: fixed;\n            opacity: 0;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container-1\">\n        </div>\n        <div id=\"container-2\">\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'backgrounds', 'n-backgrounds', 'speed'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container1 = this.shadowRoot.querySelector('#container-1');\n        this.container2 = this.shadowRoot.querySelector('#container-2');\n        this.width = '100vw';\n        this.height = '100vh';\n        this.speed = 31000;\n        this.state = 0;\n        this.backgrounds = `${ravelComponentPath}/images/default-backgrounds`;\n        this.nBackgrounds = 100;\n    }\n  \n    setup = () => {\n        //this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);   \n        this.container1.style.width = `${this.width}`; \n        this.container1.style.height = `${this.height}`;\n        this.container2.style.width = `${this.width}`; \n        this.container2.style.height = `${this.height}`;\n        this.container1.style.backgroundImage = `url(${this.backgrounds}/${Math.floor(Math.random() * this.nBackgrounds)}.png)`;\n        this.timer = setInterval(this.toggleBackgroundState, this.speed);\n        this.setTransition();\n    }\n\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    setTransition = () => {\n        let transitionPeriod = this.speed - 1000;\n        if (transitionPeriod <= 0) transitionPeriod = 1000;\n        // console.log(transitionPeriod);\n        this.container1.style.transition = `opacity ${transitionPeriod}ms ease-out`;\n        this.container1.style['-webkit-transition'] = `opacity ${transitionPeriod}ms ease-out`;\n        this.container1.style['-moz-transition'] = `opacity ${transitionPeriod}ms ease-out`;\n        this.container1.style['-webkit-transition'] = `opacity ${transitionPeriod}ms ease-out`;\n        this.container2.style.transition = `opacity ${transitionPeriod}ms ease-out`;\n        this.container2.style['-webkit-transition'] = `opacity ${transitionPeriod}ms ease-out`;\n        this.container2.style['-moz-transition'] = `opacity ${transitionPeriod}ms ease-out`;\n        this.container2.style['-webkit-transition'] = `opacity ${transitionPeriod}ms ease-out`;\n    }\n\n    toggleBackgroundState = () => {\n        // console.log('toggle background');\n        if (this.state == 0) {\n            // console.log(`url(${this.backgrounds}/${Math.floor(Math.random() * this.nBackgrounds)}.png`);\n            this.container2.style.backgroundImage = `url(${this.backgrounds}/${Math.floor(Math.random() * this.nBackgrounds)}.png)`;\n            this.container1.style.opacity = 0;\n            this.container2.style.opacity = 1;\n            this.state = 1;\n        } else {\n            // console.log(`url(${this.backgrounds}/${Math.floor(Math.random() * this.nBackgrounds)}.png'`);\n            this.container1.style.backgroundImage = `url(${this.backgrounds}/${Math.floor(Math.random() * this.nBackgrounds)}.png)`;\n            this.container1.style.opacity = 1;\n            this.container2.style.opacity = 0;\n            this.state = 0;\n        }\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'backgrounds') {\n            this.backgrounds = newValue;\n        }\n        if (name === 'n-backgrounds') {\n            this.nbackgrounds = newValue;\n        }\n        if (name === 'speed') {\n            this.speed = Number(newValue);\n        }\n\n    }\n}","/*\nDefines the custom element <ravel-dock>\n*/\n\nimport { RavelDock } from './src/RavelDock.js';\n\ncustomElements.define('ravel-dock', RavelDock);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport  { RavelMessages }  from '../../../../../modules/RavelMessages.js';\n\nexport class RavelDock extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            border-radius: 20px;\n            width: 100%;\n            height: 100%;\n        }\n        #content {\n            display: flex;\n            flex-wrap: wrap;\n            justify-content: center;\n            max-width: 100%;\n        }\n        .content > ravel-signal {\n            flex: 1 1 50px;\n        }\n        #icon {\n            font-size: 48px;\n        }\n        #label {\n            font-size: 24px;\n        }\n        .dock-item {\n            font-size: 24px;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            padding: 10px;\n        }\n        .dock-item-icon {\n            font-size: 32px;\n             pointer-events: auto; \n        }\n        .dock-item-label {\n            font-size: 14px;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"icon\"></div>\n        <div id=\"label\"></div>\n        <div id=\"content\">\n        </div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'rows', 'cols'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.rows = 1;\n        this.cols = 1;\n    }\n  \n    setup = () => {\n        this.observedMessages = [`${this.label}`];\n        this.subscribe(this.observedMessages);   \n        this.addEventListener(`${this.label}`, this.handleDockEvent);\n        this.shadowRoot.querySelector('#label').innerHTML = `${this.label}`;\n        this.shadowRoot.querySelector('#icon').innerHTML = `${this.icon}`;\n    }\n    \n    teardown = () => {\n        this.unsubscribe(this.observedMessages);\n        this.removeEventListener(`${this.name}`, this.handleDockEvent);\n    }\n\n    handleDockEvent = (evt) => {\n        \n        if (evt.detail.cmd === 'register') {\n            let div = document.createElement('div');\n            div.innerHTML = `\n            <div id=\"dock-item-${evt.detail.content.label}\" class=\"dock-item-icon\">${evt.detail.content.icon}</div>\n            <div class=\"dock-item-label\">${evt.detail.content.label}</div>\n            `;\n            div.classList.add('dock-item');\n            this.shadowRoot.querySelector('#content').appendChild(div);\n            div.addEventListener('click', (e) => {\n                console.log('click ' + evt.detail.content.label);\n                RavelMessages.sendMessage(`${evt.detail.content.label}`, 'maximize', '');\n            });\n        }\n        if (evt.detail.cmd === 'minimize') {\n\n        }\n        if (evt.detail.cmd === 'maximize') {\n\n        }\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'rows') {\n            this.rows = parseInt(newValue, 10);\n        }\n        if (name === 'cols') {\n            this.cols = parseInt(newValue, 10);\n        }\n        if (name === 'w') {\n            \n        }\n        if (name === 'h') {\n            \n        }\n       \n    }\n}\n","\n/*\nDefines the custom element <ravel-emoji-grid>\n*/\n\nimport { RavelEmojiGrid } from './src/RavelEmojiGrid.js';\n\ncustomElements.define('ravel-emoji-grid', RavelEmojiGrid);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelEmojiGrid extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #emoji-grid {\n            width: 100%;\n            height:100%;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n            <div id=\"emoji-grid\"></div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'width', 'height', 'size', 'emoji'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.grid = this.shadowRoot.querySelector('#emoji-grid');\n    }\n  \n    setup = () => {\n        this.observedMessages = [];\n        this.grid.style['background-image'] = `url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='${this.height}px' width='${this.width}px'><text x='0' y='${this.y}px'  font-size='${this.size}px'>${this.emoji}</text></svg>\")`;\n        //this.subscribe(this.observedMessages);   \n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        // Note that size needs to come after emoji\n        if (name === 'size') {\n            this.size = Number(newValue);\n            this.y = this.size - (this.size / 8);\n            this.width = this.size * this.emoji.length / 2;\n            this.height = this.size ;\n        }        \n        if (name === 'emoji') {\n            this.emoji = newValue;\n        }\n    }\n}\n","\n/*\nDefines the custom element <ravel-field-recorder>\n*/\n\nimport { RavelFieldRecorder } from './src/RavelFieldRecorder.js';\n\ncustomElements.define('ravel-field-recorder', RavelFieldRecorder);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { RavelEmoji } from '../../../../../modules/RavelEmoji.js';\n\nexport class RavelFieldRecorder extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #sample-icon {\n            font-size: 120px;\n            cursor:pointer;\n        }\n        #container {\n           z-index: 1000;\n            font-size: 50px;\n            width: 100%;\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n            position: fixed;\n            left: 50%;\n            top: 50%;\n            transform: translate(-50%, -50%);\n            padding: 20px;\n            background-color: #000000DD;\n            box-shadow: 0px 0px 10px 10px rgba(255, 255, 255,0.2);\n             display:none;\n        }\n        .selected {\n         box-shadow: 0px 0px 20px 20px rgba(255, 255, 0, 0.5);\n     }\n        #sample-preview {\n            margin-top: -45px;\n            font-size: 100px;\n            text-align:center;\n        }\n        #play-control {\n            transform: rotate(270deg);\n        }\n        #controls-wrapper {\n            \n        }\n        #close-control {\n             cursor:pointer;\n        }\n        #controls-wrapper {\n            margin: 0px 80px 20px 80px;\n            font-size: 50px;\n            display:flex;\n            justify-content: space-around;\n        }\n        #recordings-area {\n            display: grid;\n            grid: auto / auto auto auto auto auto;\n            grid-gap: 4px;\n            font-size: 60px;\n            justify-items: center;\n        }\n        \n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"sample-icon\" data-src=\"recording-0\"></div>\n        <div id=\"container\">\n        <div id=\"control-area\">\n        <div id=\"close-control\"></div>\n        <div id=\"sample-preview\"></div>\n        <div id=\"controls-wrapper\">\n            <div id=\"play-control\"></div>\n            <div id=\"record-control\"></div>\n        </div>\n        </div>\n        <div id=\"recordings-area\">\n        </div>\n        </div>\n        `;\n    }\n    \n //\n    \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'selected'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.recordings = this.shadowRoot.querySelector('#recordings-area');\n        this.icon = this.shadowRoot.querySelector('#sample-icon');\n        this.close = this.shadowRoot.querySelector('#close-control');\n        this.preview = this.shadowRoot.querySelector(`#sample-preview`);\n        this.recordings.innerHTML = '';\n        this.selected = 'recording-0';\n        this.icon.addEventListener('click', (evt) => {\n            this.container.style.display = 'flex';\n            this.selected = evt.target.getAttribute('data-src');\n        });\n        this.close.addEventListener('click', (evt) => {\n            this.container.style.display = 'none';\n        });\n        for (let i = 0; i < 20; i++) {\n            let emoji = RavelEmoji.animals[i];\n            this.recordings.innerHTML += `<span id=\"recording-${i}\">${emoji}</span>`;\n        }\n        for (let i = 0; i < 20; i++) {\n            this.shadowRoot.querySelector(`#recording-${i}`).addEventListener('click', (evt) => {\n                this.icon.innerHTML = this.shadowRoot.querySelector(`#recording-${i}`).innerHTML;\n                this.preview.innerHTML = this.shadowRoot.querySelector(`#recording-${i}`).innerHTML;\n                this.selected = evt.target.id;\n                this.icon.setAttribute('data-src', this.selected);\n            });\n        }\n\n    }\n  \n    setup = () => {\n        this.observedMessages = ['message'];\n        this.icon.innerHTML = this.shadowRoot.querySelector(`${this.selected}`).innerHTML;\n        this.preview.innerHTML = this.shadowRoot.querySelector(`${this.selected}`).innerHTML;\n        //this.subscribe(this.observedMessages);   \n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'selected') {\n            this.selected = newValue;\n        }\n    }\n}\n","/*\nDefines the custom element \n*/\n\nimport { RavelFluxlySoundEngine } from './src/RavelFluxlySoundEngine.js';\n\ncustomElements.define('ravel-fluxly-sound-engine', RavelFluxlySoundEngine);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelFluxlySoundEngine extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            position: relative;\n            background-color: #000000;\n            color: #ffffff;\n            position: relative;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            width: 1000px;\n            height: 800px;\n            display: none;\n        }\n        #start {\n            color: #ffffff;\n            cursor: pointer;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n            <input type=\"range\" min=\"-5\" max=\"5\" step=\"0.01\" value=\"1\" id=\"rate\">\n            <div id=\"start\">Start!</div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'message-id', 'show-control', 'filename', \n          'initial-value', 'min', 'max', 'no-loop'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        // Safely disconnect and release everything\n        if (this.node) {\n          this.node.disconnect();\n          this.node = null;\n        }\n        \n        if (this.audioContext) {\n            this.audioContext.close(); // Stops processing and frees audio resources\n            this.audioContext = null;\n        }\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.messageId = 'ravel-fluxly-sound-engine';\n        this.filename = 'sample-0.wav';\n    }\n  \n    setup = async () => {\n      console.log('setup!');\n        this.observedMessages = [`${this.messageId}`, 'close-cryptid', 'playback-rate', 'resume' ];\n        this.subscribe(this.observedMessages);   \n        this.startAudio();\n\n        this.shadowRoot.querySelector('#rate').addEventListener('input', (evt) => {\n            this.sendMessage('ravel-fluxly-sound-engine', 'playback-rate', evt.target.value);\n        });\n\n        this.addEventListener(this.messageId, (evt) => {\n          //console.log(evt.detail.content);\n          if (evt.detail.cmd === 'playback-rate') {\n              this.rate = parseFloat(evt.detail.content);\n              try {\n                this.node.parameters.get('playbackRate').setValueAtTime(this.rate, this.audioContext.currentTime);\n              } catch (e) {\n                console.log(evt.detail.cmd);\n              }\n          }\n          /* Not used?\n          if (evt.detail.cmd === 'start-audio') {\n            console.log('start');\n            this.startAudio();\n          }\n          if (evt.detail.cmd === 'stop-audio') {\n            console.log('stop');\n            this.stopAudio();\n          }\n          */\n          if (evt.detail.cmd === 'resume') {\n            console.log('resume playing in a no loop situation');\n            this.resumeAudio();\n          }\n      });\n\n        this.shadowRoot.querySelector('#start').addEventListener('click', (e) => {\n            this.startAudio();\n        });\n    }\n\n    startAudio = async () => {\n      console.log('start audio');\n        const blob = new Blob([this.workletCode], { type: 'application/javascript' });\n        const blobUrl = URL.createObjectURL(blob);\n        this.audioContext = new AudioContext();\n        await this.audioContext.audioWorklet.addModule(blobUrl);\n        this.node = new AudioWorkletNode(this.audioContext, 'sample-player', {\n            outputChannelCount: [1],\n            numberOfInputs: 0,\n            numberOfOutputs: 1,\n            parameterData: { \n                playbackRate: 1.0,\n                noLoop: this.noLoop\n            }\n        });\n        \n        // Load WAV file and send to worklet\n        const response = await fetch(this.filename);\n        const arrayBuffer = await response.arrayBuffer();\n        const audioBuffer = await this.audioContext.decodeAudioData(arrayBuffer);\n        \n        // Extract Float32Arrays\n        const channelData = [];\n        for (let i = 0; i < audioBuffer.numberOfChannels; i++) {\n            // Copy the data  don't just pass the view!\n            channelData.push(audioBuffer.getChannelData(i).slice());\n        }\n\n        // Send the raw data\n        this.node.port.postMessage({\n            type: 'sample-data',\n            channelData: channelData,\n            sampleRate: audioBuffer.sampleRate,\n            length: audioBuffer.length,\n        });\n\n        this.node.connect(this.audioContext.destination);\n        this.audioContext.resume();\n    }\n\n    stopAudio = () => {\n        console.log('it never really stops...)');\n    }\n\n    resumeAudio = (evt) => {\n        try {\n          this.node.port.postMessage({ playing: true });\n        } catch (e) {\n          console.log(e);\n        }\n    }\n\n    teardown = () => {\n       this.unsubscribe(this.observedMessages);\n    }\n\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'show-control') {\n            this.container.style.display = 'flex';\n        }\n        if (name === 'message-id') {\n          this.messageId = newValue;\n        }\n        if (name === 'filename') {\n          this.filename = newValue;\n        }\n        if (name === 'no-loop') {\n          this.noLoop = true;\n        }\n    }\n\n    workletCode = `\nclass SamplePlayerProcessor extends AudioWorkletProcessor {\n  static get parameterDescriptors() {\n    return [\n      {\n        name: 'playbackRate',\n        defaultValue: 1.0,\n        minValue: -16.0,\n        maxValue: 16.0,\n        automationRate: 'a-rate'\n      },\n      {\n        name: 'noLoop',\n        defaultValue: true \n      }\n    ];\n  }\n\n  constructor() {\n      super();\n      this.channelData = [];\n      this.sampleRate = 44100;\n      this.length = 0;\n      this.position = 0;\n      this.playing = true;\n\n      this.port.onmessage = (event) => {\n        const { type, channelData, sampleRate, length } = event.data;\n        if (type === 'sample-data') {\n            this.channelData = channelData.map(arr => new Float32Array(arr));\n            this.sampleRate = sampleRate;\n            this.length = length;\n            this.position = 0;\n        }\n        if (event.data.hasOwnProperty('playing')) {\n            this.playing = !!event.data.playing;\n        }\n      };\n  }\n\n  process(inputs, outputs, parameters) {\n    if (!this.channelData.length) return true;\n    if (!this.playing) return true;\n\n    const output = outputs[0];\n    const rateParam = parameters.playbackRate;\n    const numChannels = output.length;\n\n    for (let i = 0; i < output[0].length; i++) {\n      const rate = rateParam.length > 1 ? rateParam[i] : rateParam[0];\n\n      for (let ch = 0; ch < numChannels; ch++) {\n        const data = this.channelData[ch % this.channelData.length];\n        const idx = Math.floor(this.position) % this.length;\n        const sample = data[(idx + this.length) % this.length];\n        output[ch][i] = sample;\n      }\n    \n      this.position += rate;\n\n      // Loop\n      if (parameters.noLoop) {\n          if (this.position >= this.length) {\n              this.position = 0 ;\n              this.playing = false;\n          }\n          if (this.position < 0) {\n              this.position = this.length - 1;\n              this.playing = false;\n          }\n      } else {\n          if (this.position >= this.length) {\n              this.position = 0 ;\n              this.playing = true;\n          }\n          if (this.position < 0) {\n              this.position = this.length - 1;\n              this.playing = true;\n          }\n      }     \n    }\n\n    return true;\n  }\n}\n\nregisterProcessor('sample-player', SamplePlayerProcessor);\n`;\n}\n\n","\n/*\nDefines the custom element <ravel-fluxum>\n*/\n\nimport { RavelFluxum } from './src/RavelFluxum.js';\n\ncustomElements.define('ravel-fluxum', RavelFluxum);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { RavelEmoji } from '../../../../../modules/RavelEmoji.js';\nimport { RavelUtilities } from '../../../../../modules/RavelUtilities.js';\n\nexport class RavelFluxum extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #bubble-container {\n            position: absolute;\n            opacity: 1.0;\n            display: none;\n        }\n        #container {\n            position:absolute;\n        }\n        #bubble {\n            font-family: \"Silkscreen\";\n            font-size: 10;\n            color: #333333;\n            background-color: #ffffff;\n            padding:4px 10px 4px 10px;\n            border: 3px solid #ffeebb;\n            border-radius: 12px;\n        }\n        #bubble-stem {\n            position: absolute;\n            top: 90%;\n            left: 10%;\n            width: 10px;\n            height: 10px;\n            background-color: #ffffff;\n            border-left: 3px solid #ffeebb;\n            border-right: 3px solid #ffeebb;\n            border-bottom: 3px solid #ffeebb;\n            border-bottom-left-radius: 100%;\n            border-bottom-right-radius: 100%;\n        }\n        #eyes-closed {\n            display:none;\n        }\n        .green-glow {\n            background-color: rgba(45,255,196,0.5);\n            box-shadow: 0px 0px 20px 20px rgba(45,255,196,0.5);\n        }\n        .red-glow {\n            background-color: rgba(255,0,0,0.5);\n            box-shadow: 0px 0px 20px 20px rgba(255,0,0,0.5);\n        }\n        .yellow-glow {\n            background-color: rgba(255,255,0,0.5);\n            box-shadow: 0px 0px 20px 20px rgba(255,255,0,0.5);\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\" >\n        <div id=\"icon\"></div>\n        </div>\n        <div id=\"bubble-container\">\n        <div id=\"bubble\">Hello World </div>\n        <div id=\"bubble-stem\"></div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'icon', 'size', \n            'x', 'y', 'angle', 'show-hint',\n            'bubble-text-size', 'color', 'use-svg'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.icon = this.shadowRoot.querySelector('#icon');\n        this.bubble = this.shadowRoot.querySelector('#bubble-container');\n        this.angle = 0;\n        this.prevAngle = 0;\n        this.useEmbeddedSvg = false;\n        this.showHint = false;\n    }\n  \n    setup = () => {\n        this.observedMessages = ['message'];\n        this.icon.style['font-size'] = `${this.size}px`;\n        this.icon.style['line-height'] = `${this.size}px`;\n        this.container.style.top = `${this.y - (this.size / 2)}px`;\n        this.container.style.left = `${this.x - (this.size / 2)}px`;\n        this.container.style['border-radius'] = `${this.size}px`;\n        this.container.style.width = `${this.size}px`;\n        this.container.style.height = `${this.size}px`;\n        this.container.style.transform = `rotate(${this.angle}deg)`;\n        this.bubble.style.left = `${this.x}px`;\n        this.bubble.style.top = `${this.y - 60}px`;\n        if (this.useEmbeddedSvg) {\n            this.icon.innerHTML = this.svg;\n            console.log(this.shadowRoot.querySelector('#fluxum-svg'));\n            this.shadowRoot.querySelector('#fluxum-svg').style.width = `${this.size}px`;\n            this.shadowRoot.querySelector('#fluxum-svg').style.height = `${this.size}px`;\n            this.shadowRoot.querySelector('#fluxum-svg').querySelector('#fluxum-background-1').style.fill = `${this.color}`;\n            this.shadowRoot.querySelector('#fluxum-svg').querySelector('#fluxum-background-2').style.fill = `${this.color}`;\n        }\n        if (this.color) {\n            this.container.style.backgroundColor = RavelUtilities.convertHexToRgbaColor(this.color, 0.5);\n            this.container.style.boxShadow = `0px 0px 20px 20px ${RavelUtilities.convertHexToRgbaColor(this.color, 0.5)}`;\n        }\n        if (this.showHint) {\n            console.log('show-hint');\n            this.shadowRoot.querySelector('#bubble-container').style.display = 'block';\n        }\n        this.subscribe(this.observedMessages);   \n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n    \n    transform(x, y, angle) {\n        this.x = x;\n        this.y = y;\n        if (x >= 0) this.container.style.top = `${this.y}px`;\n        if (y >= 0) this.container.style.left = `${this.x}px`;\n        this.container.style.transform = `rotate(${angle}rad)`;\n        this.bubble.style.left = `${this.x}px`;\n        this.bubble.style.top = `${this.y - 60}px`;\n        this.prevAngle = angle;\n    }\n    \n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'x') {\n            this.x = Number(newValue);\n        }\n        if (name === 'y') {\n            this.y = Number(newValue);\n        }\n        if (name === 'color') {\n            this.color = newValue;\n        }\n        if (name === 'angle') {\n            this.angle = Number(newValue);\n        }\n        if (name === 'icon') {\n            this.overlay.innerText = RavelEmoji[newValue];\n        } \n        if (name === 'size') {\n            this.size = parseInt(newValue, 10);\n        }\n        if (name === 'bubble-text-size') {\n            this.bubble.style['font-size'] = `${newValue}px`;\n        }\n        if (name === 'use-svg') {\n            this.useEmbeddedSvg = true;\n        }\n        if (name === 'show-hint') {\n            this.showHint = true;\n        }\n    }\n\n    svg = `\n    <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<svg\n   width=\"52.724949mm\"\n   height=\"52.725464mm\"\n   viewBox=\"0 0 52.724949 52.725464\"\n   version=\"1.1\"\n   id=\"fluxum-svg\"\n   xml:space=\"preserve\"\n   inkscape:version=\"1.3.2 (091e20e, 2023-11-25)\"\n   sodipodi:docname=\"pixelated-fluxum-red.svg\"\n   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n   xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   xmlns:svg=\"http://www.w3.org/2000/svg\"><sodipodi:namedview\n     id=\"namedview1\"\n     pagecolor=\"#ffffff\"\n     bordercolor=\"#666666\"\n     borderopacity=\"1.0\"\n     inkscape:showpageshadow=\"2\"\n     inkscape:pageopacity=\"0.0\"\n     inkscape:pagecheckerboard=\"0\"\n     inkscape:deskcolor=\"#d1d1d1\"\n     inkscape:document-units=\"mm\"\n     inkscape:zoom=\"0.2973261\"\n     inkscape:cx=\"625.57576\"\n     inkscape:cy=\"1014.0381\"\n     inkscape:window-width=\"1400\"\n     inkscape:window-height=\"836\"\n     inkscape:window-x=\"0\"\n     inkscape:window-y=\"38\"\n     inkscape:window-maximized=\"0\"\n     inkscape:current-layer=\"layer1\" /><defs\n     id=\"defs1\" /><g\n     inkscape:label=\"Layer 1\"\n     inkscape:groupmode=\"layer\"\n     id=\"layer1\"\n     transform=\"translate(-12.903449,-37.37456)\"><g\n       id=\"g6\"\n       transform=\"translate(-17.797518,-48.498237)\"><path\n         id=\"fluxum-background-1\"\n         style=\"opacity:0.700741;fill:#f01400;fill-opacity:1;stroke-width:0.347006\"\n         d=\"M 46.273661,85.872795 V 101.446 H 30.700968 v 21.57957 h 15.572693 v 15.57269 H 67.853223 V 123.02557 H 83.425916 V 101.446 H 67.853223 V 85.872795 Z\" /><path\n         id=\"fluxum-background-2\"\n         style=\"opacity:1;fill:#f01500;fill-opacity:1;stroke-width:0.37625\"\n         d=\"m -91.100899,41.156661 h -5.228105 v -5.116484 h -31.813046 v 5.116484 h -5.2281 v 31.813045 h 5.2281 v 5.117001 h 31.813046 v -5.117001 h 5.228105 z\"\n         transform=\"rotate(-90)\" /><g\n         id=\"g20\"\n         transform=\"translate(-13.793077,-67.630569)\"><path\n           id=\"rect17\"\n           style=\"opacity:1;fill:#ffffff;fill-opacity:1;stroke-width:0.352777\"\n           d=\"m 76.418075,164.62716 v 1.72393 h -1.946652 v 1.50171 h -2.001945 v 14.68283 h 2.001945 v 1.50172 h 1.946652 v 1.72444 h 8.676473 v -1.72444 h 1.946651 v -1.50172 h 2.001945 V 167.8528 h -2.001945 v -1.50171 h -1.946651 v -1.72393 z\" /><path\n           id=\"rect16\"\n           style=\"opacity:1;fill:#ffffff;fill-opacity:1;stroke-width:0.352425\"\n           d=\"m 54.838513,168.52046 v 2.27997 h -1.723926 v 13.01471 h 1.723926 v 2.27996 h 10.567314 v -2.27996 h 1.723926 v -13.01471 h -1.723926 v -2.27997 z\" /><rect\n           style=\"opacity:1;fill:#000000;fill-opacity:1;stroke-width:0.352777\"\n           id=\"rect19\"\n           width=\"6.0066624\"\n           height=\"8.7875252\"\n           x=\"56.729588\"\n           y=\"173.19209\" /><rect\n           style=\"opacity:1;fill:#000000;fill-opacity:1;stroke-width:0.352777\"\n           id=\"rect20\"\n           width=\"9.0099936\"\n           height=\"10.567276\"\n           x=\"76.084389\"\n           y=\"170.85617\" /></g></g></g></svg>\n\n    `;\n}\n\n","\n/*\nDefines the custom element <ravel-lcd>\n*/\n\nimport { RavelLCD } from './src/RavelLCD.js';\n\ncustomElements.define('ravel-lcd', RavelLCD);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelLCD extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #screen {\n            font-size: 72px;\n            padding: 20px;\n            background-color: #00ff00;\n            color: #444444;\n            font-family: 'DS-Digital-Italic';\n            text-shadow: 0px 0px 20px rgba(45,255,196,0.9);\n            box-shadow: inset 0px 0px 20px 20px rgba(45,255,196,0.9);\n        }\n        slot {\n            text-shadow: 2px 2px 4px gba(45,255,196,0.9);\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"lcd-container\">\n        <div id=\"screen\">\n        <slot></slot>\n        </div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'lcd-id', 'color', 'size', 'x', 'y', 'scale', 'orientation', 'text'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#lcd-container');\n    }\n  \n    setup = () => {\n        this.observedMessages = ['lcd-text'];\n        this.subscribe(this.observedMessages);   \n    }\n    \n    teardown = () => {\n        this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'size') {\n            this.size = Number(newValue);\n        }\n        if (name === 'x') {\n            this.container.style.position = 'fixed';\n            this.x = newValue;\n            this.container.style.left = newValue;\n        }\n        if (name === 'y') {\n            this.container.style.position = 'fixed';\n            this.y = newValue;\n            this.container.style.top = newValue;\n        }\n        if (name === 'orientation') {\n            this.orientation = newValue;\n        }\n    }\n}\n","\n/*\nDefines the custom element <ravel-led-array>\n*/\n\nimport { RavelLedArray } from './src/RavelLedArray.js';\n\ncustomElements.define('ravel-led-array', RavelLedArray);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelLedArray extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n            #container {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                pointer-events: none;\n            }\n            #led-container {\n                display: flex;\n                flex-wrap: wrap;\n                width: 200px; \n                gap: 10px; \n                background-color: #ffffff;\n                padding: 10px 0px 10px 10px;\n                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n                margin-bottom: 10px;\n                pointer-events: auto;\n            }\n\n            .cell {\n                width: 10px; \n                height: 10px; \n                background-color: #e0e0e0;\n            }\n        </style>\n        `;\n    }\n  /* styles.css */\n\n\n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"led-container\">\n        </div>\n        <div id=\"address\"></div>\n        <div id=\"state-mask\"></div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'address', 'rows', 'cols']; \n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#led-container');\n        this.address = '000000';\n        this.rows = 2;\n        this.cols = 2;\n        this.stateMask = '';\n        this.stateArray = [];\n        this.red = [];\n        this.green = [];\n        this.blue = [];\n    }\n  \n    setup = () => {\n        this.observedMessages = [`${this.address}`];\n        this.subscribe(this.observedMessages);\n        let container = this.shadowRoot.querySelector('#led-container');\n        container.addEventListener('click', this.handleClick );\n        this.addEventListener('toggle', this.handleMessage);\n        let count = 0;\n        for (let r = 0; r < this.rows; r++) {\n            for (let c = 0; c < this.cols; c++) {\n                console.log(c + this.rows * r);\n                container.innerHTML += `<div id=\"led-${count}\" class=\"cell\" led-position=\"${count}\" row=\"${r}\" col=\"${c}\"></div>`;\n                if ((count % 4) === 0) {\n                    this.stateMask += '0';\n                }\n                count++;\n                this.stateArray.push(0);\n                this.red.push(255);\n                this.green.push(0);\n                this.blue.push(0);\n            }\n        }\n        this.ledCount = count;\n        container.style.width = `${(20 * this.cols)}px`;\n        this.shadowRoot.querySelector('#address').innerHTML = `${this.address}`;\n        this.shadowRoot.querySelector('#state-mask').innerHTML = `${this.stateMask}`;\n    }\n    \n    teardown = () => {\n        this.unsubscribe(this.observedMessages);\n    }\n    \n    handleClick = (evt) => {\n        let index = evt.target.getAttribute('led-position');\n        if (index !== null) {\n            if (this.stateArray[index] === 0) {\n                this.stateArray[index] = 1;\n                this.shadowRoot.querySelector(`#led-${index}`).style['background-color'] = \n                    `rgb(${this.red[index]}, ${this.green[index]}, ${this.blue[index]})`;\n            } else {\n                this.stateArray[index] = 0;\n                this.shadowRoot.querySelector(`#led-${index}`).style['background-color'] = \n                    `#e0e0e0`;\n            }\n            this.stateArrayToMask();\n        }\n    }\n\n    handleMessage = (msg) => {\n        console.log(msg);\n    }\n\n    stateArrayToMask = () => {\n            // Pad the array length to make it a multiple of 4\n            while (this.stateArray.length % 4 !== 0) {\n                this.stateArray.unshift(0); // Add leading zeros if necessary\n            }\n        \n            // Group bits into chunks of 4 and convert each to hexadecimal\n            const hexString = this.stateArray\n                .join('') // Convert array to binary string\n                .match(/.{1,4}/g) // Split into groups of 4 bits\n                .map(bits => parseInt(bits, 2).toString(16)) // Convert each group to hexadecimal\n                .join(''); // Join the hex values together\n        \n            this.stateMask = hexString.toUpperCase(); \n            this.shadowRoot.querySelector('#state-mask').innerHTML = `${this.stateMask}`;\n    }\n\n    maskToStateArray = (hexString) => {\n        this.stateMask = hexString;\n        thisStateArray = \n            hexString.split('') // Split the hex string into individual characters\n            .flatMap(hexChar => {\n                const binaryString = parseInt(hexChar, 16).toString(2).padStart(4, '0'); // Convert to binary and pad to 4 bits\n                return binaryString.split('').map(bit => parseInt(bit)); // Split binary string into an array of bits\n            });\n        console.log(this.StateArray);\n        this.shadowRoot.querySelector('#state-mask').innerHTML = `${this.stateMask}`;\n    }\n\n    updateLeds = () => {\n        for (let i = 0; i < this.ledCount; i++) {\n            if (this.stateArray[i] === 0) {\n                this.shadowRoot.querySelector(`#led-${i}`).style['background-color'] = \n                    `rgb(${this.red[i]}, ${this.green[i]}, ${this.blue[i]})`;\n            } else {\n                this.shadowRoot.querySelector(`#led-${i}`).style['background-color'] = \n                    `#e0e0e0`;\n            }\n        }\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'address') {\n            this.address = newValue;\n        }\n        if (name === 'rows') {\n            this.rows = parseInt(newValue, 10);\n        }\n        if (name === 'cols') {\n            this.cols = parseInt(newValue, 10);\n        }\n    }\n}\n","\n/*\nDefines the custom element <ravel-led>\n*/\n\nimport { RavelLed } from './src/RavelLed.js';\n\ncustomElements.define('ravel-led', RavelLed);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelLed extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n            #container {\n                position: absolute;\n                border-radius: 50%;\n            }\n            #led-glow {\n                position: absolute;\n                border-radius: 50%;\n                top: 25%;\n                left: 25%;\n                width: 50%;\n                height: 50%;\n            }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"led-img\"></div>\n        <div id=\"led-glow\"></div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, \n            'message-id', 'color', 'glow', \n            'state', 'size', 'x', 'y',  'inline', 'signals' ]; \n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.ledId = 0;\n        this.size = 50;\n        this.states = 2;\n        this.state = 0;\n        this.stateDir = 1;\n        this.inline = false;\n        this.glowColor = '#ffffff';\n        this.signals = [];\n    }\n  \n    setup = () => {\n        this.observedMessages = [`${this.messageId}`];\n        // Send 'toggle', 'on-for-ms', 'blink-on', 'blink-off'\n        this.subscribe(this.observedMessages);\n        this.glow = this.shadowRoot.querySelector('#led-glow');\n        this.container.style.left =  `${this.x}px`;\n        this.container.style.top =  `${this.y}px`;\n        if (this.inline) {\n            this.container.style.display = 'block';\n        }\n        this.shadowRoot.querySelector('#led-img').innerHTML = this.ledSvg;\n        this.shadowRoot.querySelector('#led-background').style.fill = this.color;\n        this.shadowRoot.querySelector('#led').style.width = `${this.size}px`;\n        this.shadowRoot.querySelector('#led').style.height = `${this.size}px`;\n        this.msTimer = null;\n        this.blinkTimer = null;\n        this.addEventListener(`${this.messageId}`, this.handleMessages);\n    }\n    \n    handleMessages = (evt) => {\n        if (evt.detail.cmd === 'on-for-ms') {\n            let ms = Number(evt.detail.content);\n            this.glow.style.boxShadow = `0px 0px ${this.size / 2}px ${this.size / 2}px ${this.glowColor}`;\n            this.msTimer = setTimeout(() => {\n                this.glow.style.boxShadow = 'none';\n            }, ms);\n        }\n    }\n\n    teardown = () => {\n        this.unsubscribe(this.observedMessages);\n    }\n    \n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n\n        if (name === 'message-id') {\n            this.messageId = newValue;\n        }\n        if (name === 'size') {\n            this.size = Number(newValue);\n        }\n        if (name === 'x') {\n            this.x = newValue;\n        }\n        if (name === 'y') {\n            this.y = newValue;\n        }\n        if (name === 'orientation') {\n            this.orientation = newValue;\n        }\n        if (name === 'led-id') {\n            this.ledId = newValue;\n        }\n        if (name === 'color') {\n            this.color = newValue;\n        }\n        if (name === 'inline') {\n            this.inline = true;\n        }\n        if (name === 'state') {\n            this.state = newValue;\n        }\n        if (name === 'blink-rate') {\n            this.blinkRate = newValue;\n        }\n        if (name === 'states') {\n            this.states = parseInt(newValue, 10);\n        }\n        if (name === 'glow') {\n            this.glowColor = newValue;\n        }\n        if (name === 'signals') {\n            this.signals = newValue.split(',');\n        }\n    }\n\n    ledSvg = `\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   width=\"19.742495mm\"\n   height=\"19.741852mm\"\n   viewBox=\"0 0 19.742495 19.741852\"\n   version=\"1.1\"\n   id=\"led\"\n   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n   xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   xmlns:svg=\"http://www.w3.org/2000/svg\">\n  <sodipodi:namedview\n     id=\"namedview1\"\n     pagecolor=\"#ffffff\"\n     bordercolor=\"#666666\"\n     borderopacity=\"1.0\"\n     inkscape:showpageshadow=\"2\"\n     inkscape:pageopacity=\"0.0\"\n     inkscape:pagecheckerboard=\"0\"\n     inkscape:deskcolor=\"#d1d1d1\"\n     inkscape:document-units=\"mm\" />\n  <defs\n     id=\"defs1\" />\n  <g\n     inkscape:label=\"Layer 1\"\n     inkscape:groupmode=\"layer\"\n     id=\"layer1\"\n     transform=\"translate(-16.247012,-38.049292)\">\n    <path\n       id=\"path-1\"\n       style=\"opacity:1;fill:#000000;stroke:none;stroke-width:1.64789;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1\"\n       d=\"m 21.121161,38.049293 v 2.277435 h -2.547148 v 2.596716 h -2.327001 v 9.993552 h 2.327001 v 2.59607 h 2.547148 v 2.278079 h 9.993552 v -2.278079 h 2.547793 v -2.59607 h 2.327001 v -9.993552 h -2.327001 v -2.596716 h -2.547793 v -2.277435 z\"\n       inkscape:export-filename=\"led.svg\"\n       inkscape:export-xdpi=\"96\"\n       inkscape:export-ydpi=\"96\" />\n    <circle\n       style=\"fill:#00cc00;stroke:none;stroke-width:0.393338;stroke-linecap:round;stroke-linejoin:round\"\n       id=\"led-background\"\n       cx=\"26.118259\"\n       cy=\"47.920219\"\n       r=\"6.6145835\" />\n    <path\n       id=\"rect3\"\n       style=\"opacity:0.488889;fill:#000000;stroke:none;stroke-width:1.32292;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none\"\n       d=\"m 19.955888,50.278068 a 6.6145835,6.6145835 0 0 0 6.162414,4.256588 6.6145835,6.6145835 0 0 0 6.161898,-4.256588 z\"\n       inkscape:export-filename=\"led.svg\"\n       inkscape:export-xdpi=\"96\"\n       inkscape:export-ydpi=\"96\" />\n  </g>\n</svg>\n\n`;\n}\n","\n/*\nDefines the custom element <ravel-menu>\n*/\n\nimport { RavelMenu } from './src/RavelMenu.js';\n\ncustomElements.define('ravel-menu', RavelMenu);","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelMenu extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'attribute'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        // e.g. this.icon = this.shadowRoot.querySelector('#icon');\n    }\n  \n    setup = () => {\n        this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);   \n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'attribute') {\n            // Do something\n        }\n    }\n}\n","/*\nDefines the custom element <ravel-p5-canvas>\n*/\n\nimport { RavelP5Canvas } from './src/RavelP5Canvas.js';\n\ncustomElements.define('ravel-p5-canvas', RavelP5Canvas);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport  { RavelMessages }  from '../../../../../modules/RavelMessages.js';\n\nexport class RavelP5Canvas extends RavelElement {\n  static get localStyles() {\n    return `\n      <style>\n        :host{\n          display:block;\n          box-sizing:border-box;\n        }\n        .wrap{\n          position:relative;\n          width:100%;\n          height:100%;\n          box-sizing:border-box;\n        }\n        .mount{\n          position:relative;\n          width:100%;\n          height:100%;\n          box-sizing:border-box;\n        }\n        canvas{\n          display:block;\n          visibility: visible;\n        }\n      </style>\n    `;\n  }\n\n  static get html() {\n    return `\n      <div class=\"wrap\">\n        <div class=\"mount\" part=\"mount\"></div>\n      </div>\n    `;\n  }\n\n  static get observedAttributes() {\n    return [\n      ...super.baseObservedAttributes,\n      \"src\",\n      \"autostart\",\n      \"sandbox\" // \"1\" default; \"0\" allows external script to touch window (not recommended)\n    ];\n  }\n\n  constructor() {\n    super();\n    const template = document.createElement(\"template\");\n    template.innerHTML = globalStyles + this.constructor.localStyles + this.constructor.html;\n    this.attachShadow({ mode: \"open\" });\n    this.shadowRoot.appendChild(template.content.cloneNode(true));\n    this.initialize();\n  }\n\n  connectedCallback() {\n    this.setup();\n  }\n\n  disconnectedCallback() {\n    this.teardown();\n  }\n\n  initialize() {\n    this.rows = 1;\n    this.cols = 1;\n\n    this._p5 = null;\n    this._abort = null;\n    this._srcText = null;\n\n    this._runToken = 0; // prevents race conditions when src changes quickly\n  }\n\n  setup = () => {\n    this.$mount = this.shadowRoot.querySelector(\".mount\");\n\n    // Auto-run unless autostart=\"0\"\n    const autostartAttr = this.getAttribute(\"autostart\");\n    const autostart = autostartAttr == null ? true : autostartAttr !== \"0\";\n    if (autostart) this.reload();\n  };\n\n  teardown = () => {\n    this.destroyInstance();\n    this.abortFetch();\n  };\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n    if (oldValue === newValue) return;\n\n    if (name === \"w\" || name === \"h\") {\n      // Resize p5 if running\n      this.applySizeToRunningSketch();\n      return;\n    }\n\n    if (name === \"src\" || name === \"sandbox\" || name === \"autostart\") {\n      const autostartAttr = this.getAttribute(\"autostart\");\n      const autostart = autostartAttr == null ? true : autostartAttr !== \"0\";\n      if (autostart) this.reload();\n    }\n  }\n\n  // ------- Public API -------\n  async reload() {\n    const src = (this.getAttribute(\"src\") || \"\").trim();\n    if (!src) return;\n\n    if (!window.p5) {\n      console.warn(\"[Ravelp5Embed] p5 not found on window. Import p5 globally first.\");\n      return;\n    }\n\n    const myToken = ++this._runToken;\n\n    this.abortFetch();\n    this.destroyInstance();\n    this.clearMount();\n\n    this._abort = new AbortController();\n\n    try {\n      const res = await fetch(src, { signal: this._abort.signal, cache: \"no-store\" });\n      if (!res.ok) throw new Error(`Failed to fetch \"${src}\": ${res.status} ${res.statusText}`);\n      const text = await res.text();\n\n      if (myToken !== this._runToken) return; // superseded\n      this._srcText = text;\n\n      const sketchFn = this.compileSketch(text, src);\n      if (!sketchFn) return;\n\n      // Create p5 instance and mount it\n      this._p5 = new window.p5(sketchFn, this.$mount);\n\n      // Ensure initial sizing even if sketch doesn't call createCanvas\n      // (Many sketches do createCanvas in setup, but we enforce if missing.)\n      //this.ensureCanvasSize();\n\n      this.dispatchEvent(\n        new CustomEvent(\"ravelp5:loaded\", {\n          bubbles: true,\n          composed: true,\n          detail: { src }\n        })\n      );\n    } catch (err) {\n      if (err?.name === \"AbortError\") return;\n      console.error(\"[Ravelp5Embed]\", err);\n\n      this.dispatchEvent(\n        new CustomEvent(\"ravelp5:error\", {\n          bubbles: true,\n          composed: true,\n          detail: { src, error: String(err?.message || err) }\n        })\n      );\n    }\n  }\n\n  stop() {\n    this.destroyInstance();\n    this.abortFetch();\n  }\n\n  // ------- Internals -------\n  abortFetch() {\n    if (this._abort) {\n      try { this._abort.abort(); } catch {}\n      this._abort = null;\n    }\n  }\n\n  clearMount() {\n    if (!this.$mount) return;\n    this.$mount.innerHTML = \"\";\n  }\n\n  destroyInstance() {\n    if (this._p5) {\n      try {\n        // p5 instance mode cleanup\n        this._p5.remove();\n      } catch (e) {\n        console.warn(\"[Ravelp5Embed] p5 remove() failed:\", e);\n      }\n      this._p5 = null;\n    }\n  }\n\n  getDesiredSize() {\n    // Default: 300x150 if not provided\n    const wAttr = this.getAttribute(\"w\");\n    const hAttr = this.getAttribute(\"h\");\n\n    const w = Number(wAttr);\n    const h = Number(hAttr);\n\n    return {\n      w: Number.isFinite(w) && w > 0 ? w : 300,\n      h: Number.isFinite(h) && h > 0 ? h : 150\n    };\n  }\n\n  applySizeToRunningSketch() {\n    if (!this._p5) return;\n    const { w, h } = this.getDesiredSize();\n\n    // If the sketch created a canvas, resize it.\n    // p5.resizeCanvas exists in instance mode after canvas created.\n    if (typeof this._p5.resizeCanvas === \"function\") {\n      try { this._p5.resizeCanvas(w, h); } catch {}\n    }\n\n    // Also ensure the host element has explicit pixel sizing\n    this.style.width = `${w}px`;\n    this.style.height = `${h}px`;\n  }\n\n  ensureCanvasSize() {\n    const { w, h } = this.getDesiredSize();\n\n    // Set host size so layout is predictable\n    this.style.width = `${w}px`;\n    this.style.height = `${h}px`;\n\n    // If the sketch didn't create a canvas, try to create one.\n    // (Some sketches rely on default canvas creation; many don't.)\n    try {\n      if (this._p5 && !this._p5.canvas && typeof this._p5.createCanvas === \"function\") {\n        this._p5.createCanvas(w, h);\n        if (this._p5.canvas && this.$mount) this.$mount.appendChild(this._p5.canvas);\n      } else if (this._p5 && this._p5.canvas && typeof this._p5.resizeCanvas === \"function\") {\n        this._p5.resizeCanvas(w, h);\n      }\n    } catch (e) {\n      // If the sketch does something unusual, don't hard-fail\n      console.warn(\"[Ravelp5Embed] ensureCanvasSize warning:\", e);\n    }\n  }\n\n  compileSketch(sourceText, srcLabel = \"p5-sketch.js\") {\n    const sandboxAttr = this.getAttribute(\"sandbox\");\n    const sandbox = sandboxAttr == null ? true : sandboxAttr !== \"0\";\n\n    // We run the fetched script in \"instance mode\".\n    // The fetched script is expected to *attach* setup/draw/etc onto `p`\n    // or define functions in a way we can bind onto `p`.\n    //\n    // Recommended external sketch pattern:\n    //   p.setup = () => { p.createCanvas(p.width, p.height); ... }\n    //   p.draw  = () => { ... }\n    //\n    // If the external script uses global mode (setup(), draw() without p.),\n    // this wrapper will still try to map them if possible, but instance-mode\n    // is the reliable approach.\n\n    const makeSketch = (p) => {\n      // Provide desired size to the sketch\n      const { w, h } = this.getDesiredSize();\n      p.__RAVEL_W__ = w;\n      p.__RAVEL_H__ = h;\n\n      // Helpful defaults: expose width/height before createCanvas via getters\n      // (p5 sets p.width/p.height after createCanvas; we provide fallbacks.)\n      Object.defineProperty(p, \"RAVEL_W\", { get: () => this.getDesiredSize().w });\n      Object.defineProperty(p, \"RAVEL_H\", { get: () => this.getDesiredSize().h });\n\n      // Execute the external code with `p` in scope.\n      // sandbox=true: isolate from window by shadowing common globals.\n      try {\n        if (sandbox) {\n          const fn = new Function(\n            \"p\",\n            `\"use strict\";\n             const window = undefined;\n             const document = undefined;\n             const globalThis = undefined;\n             const self = undefined;\n             // --- begin external sketch: ${srcLabel} ---\n             ${sourceText}\n             // --- end external sketch ---\n            `\n          );\n          fn(p);\n        } else {\n          // Not sandboxed: external code can access window/document as usual\n          const fn = new Function(\n            \"p\",\n            `\"use strict\";\n             // --- begin external sketch: ${srcLabel} ---\n             ${sourceText}\n             // --- end external sketch ---\n            `\n          );\n          fn(p);\n        }\n      } catch (e) {\n        console.error(\"[Ravelp5Embed] Error evaluating sketch:\", e);\n        throw e;\n      }\n\n      // If the external script used global-mode style functions, try to adopt them.\n      // (This only works if the external code defined them on `p`, or as locals returned somehow.\n      // We can only reliably pick up things assigned onto `p`.)\n      if (!p.setup) {\n        // If they didn't define setup, create a minimal one\n        p.setup = () => {\n          p.createCanvas(this.getDesiredSize().w, this.getDesiredSize().h);\n        };\n      } else {\n        // Ensure canvas exists at correct size if they forgot\n        const userSetup = p.setup;\n        p.setup = () => {\n          userSetup?.();\n\n          const { w, h } = this.getDesiredSize();\n\n          // If they never created a canvas, create one once.\n          if (!p.canvas) {\n            p.createCanvas(w, h);\n          } else if (typeof p.resizeCanvas === \"function\") {\n            // Resize only if needed\n            if (p.width !== w || p.height !== h) {\n              p.resizeCanvas(w, h);\n            }\n          }\n\n          //  Force visibility once\n          requestAnimationFrame(() => {\n            if (p.canvas) {\n              p.canvas.style.visibility = \"visible\";\n              p.canvas.style.display = \"block\";\n              p.canvas.style.opacity = \"1\";\n            }\n          });\n        };\n      }\n    };\n\n    return makeSketch;\n  }\n}\n","/*\nDefines the custom element <ravel-physics-world>\n*/\n\nimport { RavelPhysicsWorld } from './src/RavelPhysicsWorld.js';\n\ncustomElements.define('ravel-physics-world', RavelPhysicsWorld);\n\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { ravelComponentPath } from '../../../../common/ravelComponentPath.js';\n\n// aliases for box2d stuff. Makes life easier.\nvar b2Vec2 = Box2D.Common.Math.b2Vec2\n, b2AABB = Box2D.Collision.b2AABB\n, b2BodyDef = Box2D.Dynamics.b2BodyDef\n, b2Body = Box2D.Dynamics.b2Body\n, b2FixtureDef = Box2D.Dynamics.b2FixtureDef\n, b2Fixture = Box2D.Dynamics.b2Fixture\n, b2World = Box2D.Dynamics.b2World\n, b2MassData = Box2D.Collision.Shapes.b2MassData\n, b2PolygonShape = Box2D.Collision.Shapes.b2PolygonShape\n, b2CircleShape = Box2D.Collision.Shapes.b2CircleShape\n, b2DebugDraw = Box2D.Dynamics.b2DebugDraw\n,  b2MouseJointDef =  Box2D.Dynamics.Joints.b2MouseJointDef\n;\n\nwindow.requestAnimFrame = (function(){\n          return  window.requestAnimationFrame       || \n                  window.webkitRequestAnimationFrame || \n                  window.mozRequestAnimationFrame    || \n                  window.oRequestAnimationFrame      || \n                  window.msRequestAnimationFrame     || \n                  function(/* function */ callback, /* DOMElement */ element){\n                        window.setTimeout(callback, 1000 / 60);\n                  };\n    })();\n    \nexport class RavelPhysicsWorld extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            position: absolute;\n            top: 0px;\n            left: 0px;\n            width: 100%;\n            height: 100%;\n            background-image: #000000;\n            background-size: contain;\n\t        image-rendering: pixelated;\n            pointer-events: auto;\n            border: 2px dotted #ffff00;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"playfield\">\n        <slot></slot>\n        </div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'damping', 'width', 'height'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.playfield = this.shadowRoot.querySelector('#playfield');\n        this.slots = this.shadowRoot.querySelectorAll('slot');\n    }\n  \n    setup = () => {\n        this.pixelsToWorld = 30.0;\n        let rect = this.container.getBoundingClientRect();\n        this.x = rect.left;\n        this.y = rect.top;\n        console.log(`Rect: ${this.x} ${this.y}`);\n        if (!this.width) this.width = rect.width;\n        if (!this.height) this.height = rect.height;\n        console.log(`Dim: ${this.width} ${this.height}`);\n        // console.log(rect);\n        this.world = null;\n        this.grabbedIndex = -1;\n        this.dampingRatio = 0.0;\n        this.playfieldMembers = [];\n        this.values = [];\n        this.prevValues = [];\n        this.world = new b2World(new b2Vec2(0, 0), true);\n        rect = this.container.getBoundingClientRect();\n        console.log(`Dim: ${this.width} ${this.height}`);\n        this.initWorld();\n        \n        //this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);  \n        \n        /*this.shadowRoot.querySelector('#impulse').addEventListener('click', () => {\n            for (let j = 0; j < this.playfieldMembers.length; j++) {\n                console.log(\"Apply Impulse\");\n                console.log(this.playfieldMembers[j]);\n                console.log(this.playfieldMembers[j].size);\n                console.log(this.playfieldMembers[j].body);\n                console.log(Number(this.playfieldMembers[j].body.GetAngle()));\n                console.log(Number(this.playfieldMembers[j].body.GetPosition().x));\n                console.log(this.playfieldMembers[j].body.GetPosition().y);\n                console.log(this.playfieldMembers[j].body.GetAngularVelocity());\n                this.playfieldMembers[j].body.ApplyImpulse(new b2Vec2(200, 200), this.playfieldMembers[j].body.GetWorldCenter());\n            }\n        }) */\n    }\n    \n    initWorld() {\n    \tlet fixDef = new b2FixtureDef;\n    \tfixDef.density = 1.0;\n    \tfixDef.restitution = 1.0;\n    \tfixDef.friction = 1.0;\n        this.lookup = {};\n        //for (i = 0; i < nFluxum; i++) {\n        //\tfluxum.push(new Fluxum(world, i, Math.random() * width - FLUXUM_W/2, Math.random() * height - FLUXUM_W/2, FLUXUM_W/2, FLUXUM_W/2, 10, 0));\n        //}\n        console.log('boundaries');\n        console.log(`0, 0, ${this.width}, 10`);\n        console.log(`${this.width}, 0, 10, ${this.height}`);\n        console.log(`0, ${this.height}, ${this.width}, 10`);\n        console.log(`0, 0, 10, ${this.height}`);\n        this.boundaries = [];\n\t    this.boundaries.push(this.newBoundary(0, 0, this.width, 10));  // top\n    \tthis.boundaries.push(this.newBoundary(this.width, 0, 10, this.height));  // right\n    \tthis.boundaries.push(this.newBoundary(0, this.height, this.width, 10));  // bottom\n    \tthis.boundaries.push(this.newBoundary(0, 0, 10, this.height));  // left\n        // console.log(this.boundaries);\n        \n    \tthis.listener = new Box2D.Dynamics.b2ContactListener;       \n        this.listener.BeginContact = (contact) => {\n        \t//console.log(contact);\n        }\n        this.world.SetContactListener(this.listener);\n        this.mouseDownCallback = this.mouseDown.bind(this);\n        this.mouseMovedCallback = this.mouseMoved.bind(this);\n        this.mouseReleasedCallback = this.mouseReleased.bind(this);\n        this.updateCallback = this.update.bind(this);\n        this.addEventListener('pointerdown', this.mouseDownCallback);\n        this.addEventListener('pointermove', this.mouseMovedCallback);\n        this.addEventListener('pointerleave', this.mouseReleasedCallback);\n        this.addEventListener('pointerup', this.mouseReleasedCallback);\n\n        // Add children of playfield to playfieldMembers\n        //let fluxum = this.shadowRoot.querySelectorAll(\"ravel-fluxum\");\n        // console.log(this.slots[0].assignedNodes());\n        for (let member of this.slots[0].assignedNodes()) {\n            if (member.tagName === 'RAVEL-FLUXUM') {\n                this.lookup[member.id] = this.playfieldMembers.length;\n                this.playfieldMembers.push(this.newFluxum(member));\n                this.values.push(0);\n                this.prevValues.push(0);\n            }\n            if (member.tagName === 'RAVEL-PHYSICS-SPRITE') {\n                this.lookup[member.id] = this.playfieldMembers.length;\n                this.playfieldMembers.push(this.newSprite(member));\n            }\n            if ((member.tagName === 'RAVEL-PHYSICS-POT') ||\n                (member.tagName === 'RAVEL-PHYSICS-SLIDER') ||\n                (member.tagName === 'RAVEL-PHYSICS-BUTTON')) {\n                this.lookup[member.id] = this.playfieldMembers.length;\n                this.playfieldMembers.push(this.newControl(member));\n            }\n        }\n        \n        window.addEventListener('resize', () => {\n            // Reset the top and left. The world is already sized at previous width so leave it at that.\n            let rect = this.getBoundingClientRect();\n            this.x = rect.x;\n            this.y = rect.y;\n            // console.log(`New x y ${this.x} ${this.y}`)\n        }, true);\n        \n        requestAnimFrame(this.updateCallback);\n        \n        /* // DEBUG\n        for (let j = 0; j < this.playfieldMembers.length; j++) {\n            console.log(this.playfieldMembers[j].element);\n            console.log(this.playfieldMembers[j].size);\n            console.log(this.playfieldMembers[j].body);\n            console.log(this.playfieldMembers[j].body.GetAngle());\n            console.log(this.playfieldMembers[j].body.GetPosition().x);\n            console.log(this.playfieldMembers[j].body.GetPosition().y);\n            console.log(this.playfieldMembers[j].body.GetAngularVelocity());\n        }\n        */\n    }\n    \n    update() {\n        for (let j = 0; j < this.playfieldMembers.length; j++) {\n            this.playfieldMembers[j].element.transform(\n                this.playfieldMembers[j].body.GetPosition().x * this.pixelsToWorld - (this.playfieldMembers[j].size),\n                this.playfieldMembers[j].body.GetPosition().y * this.pixelsToWorld - (this.playfieldMembers[j].size),\n                this.playfieldMembers[j].body.GetAngle()\n            );\n            this.values[j] = this.playfieldMembers[j].body.GetAngularVelocity();\n            if (this.values[j] !== this.prevValues[j]) {\n                this.sendMessage(`fluxum-${j + 1}`, 'playback-rate', this.values[j]);\n            }\n            this.prevValues = this.values[j];\n\t\t}\n        this.world.Step(1/30, 10, 10);\n        requestAnimFrame(this.updateCallback);\n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    newFluxum(fluxumElement) {\n        let x = parseInt(fluxumElement.getAttribute('x'), 10);\n        let y = parseInt(fluxumElement.getAttribute('y'), 10);\n        let size = parseInt(fluxumElement.getAttribute('size'), 10) * 0.45;\n    \tlet fixDef = new b2FixtureDef;\n    \tfixDef.density = 1.0;\n    \tfixDef.restitution = 0.5;\n    \tfixDef.friction = 1.0;\n\n    \tlet bodyDef = new b2BodyDef;\n    \tbodyDef.position.x = x / this.pixelsToWorld;\n    \tbodyDef.position.y = y / this.pixelsToWorld;\n    \tbodyDef.type = b2Body.b2_dynamicBody;\n\n    \tfixDef.shape = new b2CircleShape;\n    \tfixDef.shape.SetRadius(size / (this.pixelsToWorld), size / (this.pixelsToWorld));\n\n    \tlet body = this.world.CreateBody(bodyDef);\n    \tbody.CreateFixture(fixDef);\n    \t//so that we can access element from box2d\n    \tbody.SetUserData(fluxumElement);\n        fluxumElement.body = body;\n        \n        return ({\n            element: fluxumElement,\n            size: size,\n            body: body\n         });\n    }\n    \n    newBoundary(x, y, w, h){\n    \tlet bodyDef = new b2BodyDef;\n\t    // console.log(x + y + w + h);\n    \tbodyDef.position.x = x / this.pixelsToWorld;\n    \tbodyDef.position.y = y / this.pixelsToWorld;\n    \tbodyDef.type = b2Body.b2_staticBody;\n\t\n    \tlet body = this.world.CreateBody(bodyDef);\n\t\n    \tlet fixDef = new b2FixtureDef;\n    \tfixDef.density = 1.0;\n    \tfixDef.restitution = 0.5;\n    \tfixDef.friction = 1.0;\n\t\n    \tfixDef.shape = new b2PolygonShape;\n    \tfixDef.shape.SetAsBox(w / this.pixelsToWorld, h / this.pixelsToWorld);\n    \tbody.CreateFixture(fixDef);\n    \n        return body;\n    }\n    \n    mouseDown(evt) { \n        for (let j = 0; j < this.playfieldMembers.length; j++) {\n            if (this.mouseInBounds(evt.clientX, evt.clientY, \n                              this.playfieldMembers[j].body.GetPosition().x * this.pixelsToWorld,\n                              this.playfieldMembers[j].body.GetPosition().y * this.pixelsToWorld,\n                              this.playfieldMembers[j].size\n                )) {\n            \tthis.mouse_pressed = true;\n            \tthis.grabbedIndex = j;\n                //console.log(this.playfieldMembers[this.grabbedIndex].body);\n            }\n        }\n    }\n    \n    mouseMoved(evt) {\n        //console.log('mouse move ' + evt.clientX + \" \" + evt.clientY);\n    \tlet p = new b2Vec2((evt.clientX - this.x) / this.pixelsToWorld, (evt.clientY - this.y) / this.pixelsToWorld);\n\t\n    \tif (this.mouse_pressed && !this.mouse_joint && this.grabbedIndex >= 0)\n    \t{\n    \t\t//if no joint exists then create\n    \t\tlet def = new b2MouseJointDef();\n\t        // console.log(this.boundaries[0]);\n            // console.log(this.playfieldMembers[this.grabbedIndex].body);\n    \t\tdef.bodyA = this.boundaries[0];\n    \t\tdef.bodyB = this.playfieldMembers[this.grabbedIndex].body;\n    \t\tdef.target = p;\n\n    \t\tdef.collideConnected = true;\n    \t\tdef.maxForce = 1000 * this.playfieldMembers[this.grabbedIndex].body.GetMass();\n    \t\tdef.dampingRatio = this.dampingRatio;\n\t\n    \t\tthis.mouse_joint = this.world.CreateJoint(def);\n\t\n    \t\tthis.playfieldMembers[this.grabbedIndex].body.SetAwake(true);\n    \t}\n\n    \tif (this.mouse_joint)\n    \t{\n    \t\tthis.mouse_joint.SetTarget(p);\n    \t}\n    }\n   \n    mouseReleased(evt) {\n        //console.log(this.mouse_joint);\n        this.grabbedIndex = -1;\n    \tthis.mouse_pressed = false;\n    \tif (this.mouse_joint)\n    \t{\n    \t\tthis.world.DestroyJoint(this.mouse_joint);\n    \t\tthis.mouse_joint = false;\n    \t}\n    }\n\n    mouseInBounds(mx, my, x1, y1, radius) {\n       // rect = element.getBoundingClientRect();\n       // console.log(rect.top, rect.right, rect.bottom, rect.left);\n        \n        //console.log(radius);\n\t    // console.log (\"x: \" + (x1 - radius) + \" < \" + mx + \" < \" + (x1 + radius));\n\t\t// console.log (\"y: \" + (y1 - radius) + \" < \" + my + \" < \" + (y1 + radius));\n        // Take into account this.x and y, the offset of the enclosing container\n        const rect = this.container.getBoundingClientRect();\n\n        mx = mx - rect.left;\n        my = my - rect.top;\n        console.log(rect.width);\n        //console.log(`${mx}, ${my} : ${x1}, ${y1}`);\n\t\t/*if ((mx < (x1 + this.x + radius)) &&\n\t\t    (mx > (x1 + this.x - radius)) &&\n\t\t\t(my < (y1 + this.y + radius)) &&\n\t\t\t(my > (y1 + this.y - radius))) {\n        */\n        if ((mx < (x1 + radius)) &&\n\t\t    (mx > (x1 - radius)) &&\n\t\t\t(my < (y1 + radius)) &&\n\t\t\t(my > (y1 - radius))) {\n                console.log('mouse in bounds ');\n\t\t\t\treturn true;\n\t\t} else {\n            console.log('not in bounds');\n\t\t\treturn false;\n\t\t}\n\t}\n        \n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'damping') {\n            this.dampingRatio = Number(newValue);\n        }\n        if (name === 'width') {\n            this.width = Number(newValue);\n        }\n        if (name === 'height') {\n            this.height = Number(newValue);\n        }\n    }\n}\n\n\n\n/* // Original code:\n\nfunction Fluxum(id_, x_, y_, w_, h_, mass_){\n\n    this.id = id_;\n\tthis.x = x_;\n\tthis.y = y_;\n\tthis.mass = mass_;\n\tthis.width = w_;    \n\tthis.height = h_;\n\tthis.world_radius = this.width / PIXELS_TO_WORLD;\n\tthis.body = null;\n    this.sprite = img[id_ % maxFluxum];\n\n\tvar fixDef = new b2FixtureDef;\n\tfixDef.density = 1.0;\n\tfixDef.restitution = RESTITUTION;\n\tfixDef.friction = 1.0;\n\n\tvar bodyDef = new b2BodyDef;\n\tbodyDef.position.x = this.x/PIXELS_TO_WORLD;\n\tbodyDef.position.y = this.y/PIXELS_TO_WORLD;\n\tbodyDef.type = b2Body.b2_dynamicBody;\n\n\tfixDef.shape = new b2CircleShape;\n\tfixDef.shape.SetRadius(this.width/(PIXELS_TO_WORLD), this.height/(PIXELS_TO_WORLD));\n\n\tthis.body = world.CreateBody(bodyDef);\n\tthis.body.CreateFixture(fixDef);\n    \n\t//so that we can access element from box2d\n\tthis.body.SetUserData(this);\n\t\n\tthis.mouseInBounds = function() {\n\t\tvar mx = mouseX / PIXELS_TO_WORLD;\n\t\tvar my = mouseY / PIXELS_TO_WORLD;\n\t\tvar x1 = this.body.GetPosition().x;\n\t\tvar y1 = this.body.GetPosition().y;\n\t\t\n\t    //console.log (\"x: \" + (x1 - this.world_radius) + \" < \" + mx + \" < \" + (x1 + this.world_radius));\n\t\t//console.log (\"y: \" + (y1 - this.world_radius) + \" < \" + my + \" < \" + (y1 + this.world_radius));\n\t\tif ((mx < (x1 + this.world_radius)) &&\n\t\t    (mx > (x1 - this.world_radius)) &&\n\t\t\t(my < (y1 + this.world_radius)) &&\n\t\t\t(my > (y1 - this.world_radius))) {\n\t\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tthis.tempo = 0;\n\tthis.prevTempo = 0; \n\tthis.spinning = false;\n    this.prevSpinning = false;\n\t\n\tthis.updateAudioRate = function() {\n        this.tempo = (this.body.GetAngularVelocity())*3;\n        if (this.tempo != this.prevTempo) {\n\t\t\t//console.log(\"Set \" + this.tempo);\n            // set tempo\n\t\t\t//updateSlider(this.tempo, this.id);\n        } \n\t\tthis.prevTempo = this.tempo;\n        if (abs(this.tempo) > 0.015) {\n\t\t\tthis.prevSpinning = this.spinning;\n            this.spinning = true;\n        } else {\n\t\t\tthis.prevSpinning = this.spinning;\n            this.spinning = false;\n        }\n\t    if (!this.prevSpinning && this.spinning) {\n\t        // turn on\n\t\t\t//playSound(this.id);\n\t\t\tthis.prevSpinning = true;\n\t    }\n\t    if (this.prevSpinning && !this.spinning) {\n\t        // turn off\n\t\t\t//stopSound(this.id);\n\t\t\tthis.prevSpinning = false;\n\t    }\n\t\t//console.log(\"tempo \" + this.tempo + \" spinning \" + this.spinning );\n\t}\n}\n*/","\n/*\nDefines the custom element <ravel-pot>\n*/\n\nimport { RavelPot } from './src/RavelPot.js';\n\ncustomElements.define('ravel-pot', RavelPot);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { RavelEmoji } from '../../../../../modules/RavelEmoji.js';\nimport { ravelComponentPath } from '../../../../common/RavelComponentPath.js';\n\nexport class RavelPot extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            position: absolute;\n            cursor: pointer;\n            user-select: none;\n        }\n        #pot-marker, #pot-knob {\n            position: relative;\n        }\n        #sensor {\n            position: absolute;\n            left: -10%;\n            top: -10%;\n            width: 120%;\n            height: 120%;\n            border-radius: 50%;\n            \n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"sensor\"></div>\n        <div id=\"pot-knob\"></div>\n        <div id=\"pot-marker\"></div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, \n            'size', 'w', 'h', 'use-svg', 'color',\n            'marker', 'icon', 'marker', 'angle', 'min', 'max',\n            'value', 'signals', 'signal-out'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.potMarker = this.shadowRoot.querySelector('#pot-marker');\n        this.potKnob = this.shadowRoot.querySelector('#pot-knob');\n        this.sensor = this.shadowRoot.querySelector('#sensor');\n        this.marker = '';\n        this.icon = 'white-circle';\n        this.size = 24;\n        this.signals = [];\n        this.value = 0;\n        this.noClick = false;\n        this.showFeedback = false;\n        this.x = 0;\n        this.y = 0;\n        this.width = 50;\n        this.height = 50;\n        this.min = 0;\n        this.max = 1;\n        this.offsetX = 0;\n        this.offsetY = 0;\n        this.angle = 0;\n        this.useSvg = false;\n    }\n  \n    setup = () => {\n        this.observedMessages = [`${this.id}`];\n        this.subscribe(this.observedMessages);\n        this.subscribe(this.signals);  \n        //this.potKnob.textContent = RavelEmoji.getRandomRoundEmoji();\n        //this.potMarker .textContent = RavelEmoji['white-circle']; // \n        // x, y are the center point\n\n        this.container.style.top = `${this.y}px`;\n        this.container.style.left = `${this.x}px`;\n        this.container.style['width'] = `${this.width}px`;\n        this.container.style['height'] = `${this.height}px`;\n        this.container.style['font-size'] = `${this.width}px`;\n        this.container.style['font-size'] = `${this.width}px`;\n        this.potKnob.textContent = RavelEmoji[this.icon];\n        this.potMarker.textContent = RavelEmoji[this.marker]; // \n        this.potMarker.style['font-size'] = `${this.width / 5}px`;\n        this.potMarker.style['top'] = `-${this.width - this.width / 16}px`;\n        this.potMarker.style['left'] = `${- this.width /  4 }px`;\n        this.potKnob.style['line-height'] = `-${this.width + 10}px`;\n        this.setFromValue();\n        if (this.useSvg) {\n            this.shadowRoot.querySelector('#pot-knob').innerHTML = this.potSvg;\n            this.shadowRoot.querySelector('#pot-knob-svg').style.width = `${this.width}px`;\n            this.shadowRoot.querySelector('#pot-knob-svg').style.height = `${this.height}px`;\n            this.shadowRoot.querySelector('#pot-knob-svg').querySelector('#circle').style.fill = `${this.color}`;\n        }\n        //this.potKnob.style['top'] = `-${this.size / 8}px`;\n        this.potMarker.style['opacity'] = `0.75`;\n        const rect = this.container.getBoundingClientRect();\n        this.centerX = rect.left + rect.width / 2;\n        this.centerY = rect.top + rect.height / 2;\n        if (!this.noClick) {\n            this.addEventListener('pointerdown', this.handleClick);\n        }\n        this.addEventListener(`${this.id}`, this.handleEvent);\n        this.broadcastMessage('register-sensor', this.id, this.container);\n        //this.broadcastMessage('register-sensor', this.id, { x: this.x + this.w/2, y: this.y + this.h/2, w: this.w, h: this.height });\n    }\n\n    handleClick = (e) => {\n        e.preventDefault();\n        // Update center values dynamically in case layout shifted\n        const rect = this.container.getBoundingClientRect();\n        this.centerX = rect.left + rect.width / 2;\n        this.centerY = rect.top + rect.height / 2;\n        this.calculatePotAngle(e.clientX, e.clientY);\n        document.addEventListener('pointermove', this.dragElement);\n        document.addEventListener('pointerup', this.endDragElement);\n        document.addEventListener('pointerleave', this.endDragElement);\n    }\n\n    dragElement = (e) => {\n        e.preventDefault();\n        this.calculatePotAngle(e.clientX + this.offsetX, e.clientY + this.offsetY);\n    }\n\n    endDragElement = () => {\n        document.removeEventListener('pointermove', this.dragElement);\n        document.removeEventListener('pointerup', this.endDragElement);\n        document.removeEventListener('pointerleave', this.endDragElement);\n    }\n\n    handleEvent = (e) => {\n        e.preventDefault();\n        const type = e.detail.cmd;\n        console.log(type);\n        if (type === 'select') {\n            this.sensor.style.backgroundColor = 'rgba(255, 255, 0, 0.5)';\n        }\n        if (type === 'unselect') {\n            this.sensor.style.backgroundColor = 'rgba(255, 255, 255, 0)';\n        }\n        if (type === 'virtual-click') {\n            let x = e.detail.content.startX;\n            let y = e.detail.content.startY;\n            this.offsetX = Number(e.detail.content.offsetX);\n            this.offsetY = Number(e.detail.content.offsetY);\n            const rect = this.container.getBoundingClientRect();\n            this.centerX = (rect.left + rect.width / 2);\n            this.centerY = (rect.top + rect.height / 2);\n            this.calculatePotAngle(x + this.offsetX, y + this.offsetY);\n            document.addEventListener('pointermove', this.dragElement);\n            document.addEventListener('pointerup', this.endDragElement);\n            document.addEventListener('pointerleave', this.endDragElement);\n            console.log(this.offsetX + \" \" + this.offsetY);\n        }\n        if (type === 'virtual-drag') {\n            this.calculatePotAngle(e.clientX, e.clientY);\n        }\n        if (type === 'virtual-release') {\n            this.offsetX = 0;\n            this.offsetY = 0;\n            document.removeEventListener('pointermove', this.dragElement);\n            document.removeEventListener('pointerup', this.endDragElement);\n            document.removeEventListener('pointerleave', this.endDragElement);\n        }\n    }\n\n    \n    teardown = () => {\n        this.unsubscribe(this.signals);\n        this.broadcastMessage('register-sensor', this.id);\n        if (!this.noClick) {\n            this.removeEventListener('pointerdown', this.handleClick);\n        }\n        this.removeEventListener(`${this.id}`, this.handleEvent);\n    }\n    \n    calculatePotAngle = (x, y) => {\n    \tlet d1 = y - this.centerY;\n    \tlet d2 = x - this.centerX;\n    \tlet r = Math.sqrt(Math.pow(d1, 2) + Math.pow(d2, 2));\n    \tlet a = -Math.asin(d1 / r);\n        if (x > this.centerX)  {\n            a = 3.14 - a;\n        }\n        if ((x < this.centerX) && (y > this.centerY))  {\n            a = 6.28 + a;\n        }\n    \t//console.log(\"Angle \" + (a * 57.296));\n    \ta = (a * 57.296);\n        // TODO: add a check for pinned High or Low\n        if (!((a > 210) && (a < 300))) {\n            this.angle = a;\n            this.container.style[\"transform\"] = \"rotate(\" + this.angle + \"deg)\";\n        }\n       // console.log(this.angle);\n        if (this.angle <= 210) {\n            this.value = this.map(this.angle, 0, 210, 0.3, 1);\n        } else {\n            this.value = this.map(this.angle, 305, 360, 0, .3);\n        }\n        this.sendMessage(this.signalOut, this.id, this.value);\n        //console.log(`send: ${this.signalOut} ${(this.value)}`);\n    }\n\n    setFromValue = () => {\n        console.log(this.value + ' ' + this.angle);\n        if (this.value <= 0.3) {\n            this.angle = this.map(this.value, 0, 0.3, 305, 360);\n        } else {\n            this.angle = this.map(this.value, 0.3, 1.0, 0, 210);\n        }\n        console.log(this.angle);\n        this.container.style[\"transform\"] = \"rotate(\" + this.angle + \"deg)\";\n    }\n    \n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'size') {\n            this.size = Number(newValue);\n        }\n        if (name === 'x') {\n            this.container.style.position = 'absolute';\n            this.x = Number(newValue);\n        }\n        if (name === 'y') {\n            this.container.style.position = 'absolute';\n            this.y = Number(newValue);\n        }\n        if (name === 'use-svg') {\n            this.useSvg = true;\n        }\n        if (name === 'w') {\n            this.width = Number(newValue);\n        }\n        if (name === 'h') {\n            this.height = Number(newValue);\n        }\n        if (name === 'color') {\n            this.color = newValue;\n        }\n        if (name === 'orientation') {\n            this.orientation = newValue;\n        }\n        if (name === 'icon') {\n            this.icon = newValue;\n        }\n        if (name === 'marker') {\n            this.marker = newValue;\n        }\n        if (name === 'angle') {\n            this.angle = Number(newValue);\n        }\n        if (name === 'value') {\n            this.value = Number(newValue);\n        }\n        if (name === 'signals') {\n            this.signals = newValue.split(',');\n        }\n        if (name === 'signal-out') {\n            this.signalOut = newValue;\n        }\n        if (name === 'no-click') {\n            this.noClick = true;\n        }\n        if (name === 'show-feedback') {\n            this.showFeedback = true;\n        }\n    }\n\n    map = (val, in_min, in_max, out_min, out_max) => {\n        return (val - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n    }\n\n    potSvg = `\n    <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   version=\"1.1\"\n   id=\"pot-knob-svg\"\n   width=\"267.03113\"\n   height=\"257.45898\"\n   viewBox=\"0 0 267.03113 257.45898\"\n   sodipodi:docname=\"pot-1.svg\"\n   inkscape:version=\"1.3.2 (091e20e, 2023-11-25)\"\n   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n   xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   xmlns:svg=\"http://www.w3.org/2000/svg\">\n  <defs\n     id=\"defs1\" />\n  <sodipodi:namedview\n     id=\"namedview1\"\n     pagecolor=\"#ffffff\"\n     bordercolor=\"#666666\"\n     borderopacity=\"1.0\"\n     inkscape:showpageshadow=\"2\"\n     inkscape:pageopacity=\"0.0\"\n     inkscape:pagecheckerboard=\"0\"\n     inkscape:deskcolor=\"#d1d1d1\"\n     inkscape:zoom=\"4.9166667\"\n     inkscape:cx=\"45.050847\"\n     inkscape:cy=\"124.67797\"\n     inkscape:window-width=\"1336\"\n     inkscape:window-height=\"841\"\n     inkscape:window-x=\"0\"\n     inkscape:window-y=\"38\"\n     inkscape:window-maximized=\"0\"\n     inkscape:current-layer=\"g1\"\n     showguides=\"false\" />\n  <g\n     inkscape:groupmode=\"layer\"\n     inkscape:label=\"Image\"\n     id=\"g1\"\n     transform=\"translate(-1052.7501,459.03516)\">\n    <path\n       id=\"rect70\"\n       style=\"fill:#000000;fill-opacity:0.5;stroke:none;stroke-width:1.64482\"\n       d=\"M 1146.9317 -459.03516 L 1146.9317 -417.36914 L 1107.1778 -417.36914 L 1107.1778 -374.47071 L 1061.379 -374.47071 L 1061.379 -286.45313 L 1062.3224 -286.45313 L 1062.3224 -286.18555 L 1107.1778 -286.18555 L 1107.1778 -243.24219 L 1146.9317 -243.24219 L 1146.9317 -201.57618 L 1235.17 -201.57618 L 1235.17 -243.24219 L 1274.9239 -243.24219 L 1274.9239 -286.18555 L 1319.7813 -286.18555 L 1319.7813 -374.42383 L 1274.9239 -374.42383 L 1274.9239 -417.36914 L 1235.17 -417.36914 L 1235.17 -459.03516 L 1146.9317 -459.03516 z \" />\n    <path\n       id=\"circle\"\n       style=\"fill:#e3b505;fill-opacity:1;stroke:none;stroke-width:1.33333\"\n       d=\"m 1191.0508,-411.66211 a 81.355934,81.355934 0 0 0 -78.5508,60.6875 h 38.9844 v 41.33789 H 1112.5 a 81.355934,81.355934 0 0 0 78.5508,60.6875 81.355934,81.355934 0 0 0 81.3554,-81.35547 81.355934,81.355934 0 0 0 -81.3554,-81.35742 z\" />\n    <rect\n       style=\"fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.58756\"\n       id=\"rect72\"\n       width=\"90.982903\"\n       height=\"41.254181\"\n       x=\"1061.0891\"\n       y=\"-351.0853\" />\n  </g>\n</svg>\n`;\n}\n","\n/*\nDefines the custom element <ravel-progressive-composition-2>\n*/\n\nimport { RavelProgressiveComposition2 } from './src/RavelProgressiveComposition2.js';\n\ncustomElements.define('ravel-progressive-composition-2', RavelProgressiveComposition2);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { RavelEmoji } from '../../../../../modules/RavelEmoji.js';\n\nexport class RavelProgressiveComposition2 extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #composition-grid {\n            padding: 10px;\n            display: grid;\n            grid: auto / auto auto auto auto;\n        }\n        .grid-item {\n            display: flex;\n            flex-wrap: wrap;\n            width: 76px;\n            height: 56px;\n            font-size: 14px;\n            margin: 5px;\n            padding-top: 2px;\n            padding-left: 2px;\n            border: 6px solid rgba(0, 0, 0, 0.9);\n        }\n        .background-0 {\n            background-color: rgba(255, 255, 255, 0.8);\n        }\n        .background-1 {\n            background-color: rgba(255, 255, 255, 0.75);\n        }\n        .background-2 {\n            background-color: rgba(255, 255, 255, 0.70);\n        }\n        .background-3 {\n            background-color: rgba(255, 255, 255, 0.65);\n        }\n        .background-4 {\n            background-color: rgba(255, 255, 255, 0.60);\n        }\n        .background-5 {\n            background-color: rgba(255, 255, 255, 0.55);\n        }\n        .background-6 {\n            background-color: rgba(255, 255, 255, 0.50);\n        }\n        .background-7 {\n            background-color: rgba(255, 255, 255, 0.45);\n        }\n        .background-8 {\n            background-color: rgba(255, 255, 255, 0.40);\n        }\n        .background-9 {\n            background-color: rgba(255, 255, 255, 0.35);\n        }\n        .background-10 {\n            background-color: rgba(255, 255, 255, 0.30);\n        }\n        .background-11 {\n            background-color: rgba(255, 255, 255, 0.25);\n        }\n        .background-12 {\n            background-color: rgba(255, 255, 255, 0.20);\n        }\n        .performer {\n            margin: 0px 2px;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n            <div id=\"composition-grid\">\n            </div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'rows', 'cols', 'source'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.grid = this.shadowRoot.querySelector('#composition-grid');\n        this.performers = 12;\n        this.performerIcon = [];\n        this.performerSection = [];\n        this.sections = 12;\n        this.autoplay = false;\n        this.autoplayTimer = null;\n        this.maxSection = 0;\n        this.minSection = 0;\n    }\n  \n    setup = () => {\n        this.observedMessages = [];\n        //this.subscribe(this.observedMessages);  \n        for (let i = 0; i < this.sections; i ++) {\n            this.grid.innerHTML += `\n            <div id=\"composition-grid-item-${i}\" class=\"grid-item background-${i}\"></div>\n            `;\n        } \n\n        console.log('1');\n        for (let i = 0; i < this.sections; i ++) {\n            this.shadowRoot.querySelector(`#composition-grid-item-${i}`).addEventListener('click', (evt) => {\n                console.log(`Clicked ${i}`);\n                this.moveRandomPerformer(i);\n            });\n        } \n        console.log('2');\n        for (let i = 0; i < this.performers; i ++) {\n            //let icon = RavelEmoji.getRandomSquareColor();\n            let icon = '';\n            this.performerIcon.push(icon);\n            this.performerSection.push(0);\n            this.shadowRoot.querySelector(`#composition-grid-item-0`).innerHTML += `\n            <span id=\"performer-${i}\" class=\"performer\">${icon}</span>\n            `;\n        }\n        console.log('3');\n        /*\n        // FIXME: Add auto play\n        this.shadowRoot.querySelector(`#auto-play`).addEventListener('click', (evt) => {\n            console.log('auto play');\n            this.autoplay = !this.autoplay;\n            if (this.autoplay) {\n                this.autoPlayTimer = setInterval(() => {\n                        this.moveRandomPerformer(this.performerSection[Math.floor(Math.random() * this.performers)]);\n                    },\n                    200\n                );\n            } else {\n                if (this.autoPlayTimer) clearInterval(this.autoPlayTimer);\n            }\n        });\n        */\n    }\n    \n    moveRandomPerformer(section) {\n        let performersInSection = [];\n        for (let i = 0; i < this.performerSection.length; i++) {\n            if (this.performerSection[i] === section) {\n                performersInSection.push(i);\n            }\n        }\n        if (performersInSection.length > 0) {\n            let n = performersInSection[Math.floor(Math.random() * performersInSection.length)];\n            if (this.performerSection[n] < (this.sections -1)) {\n                this.performerSection[n]++;\n                let p = this.shadowRoot.querySelector(`#performer-${n}`);\n                console.log(p);\n                this.shadowRoot.querySelector(`#composition-grid-item-${this.performerSection[n]}`).appendChild(p);\n                if (this.performerSection[n] > this.maxSection) this.maxSection = this.performerSection[n];\n            } \n        }\n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'attribute') {\n            // Do something\n        }\n    }\n}\n","\n/*\nDefines the custom element <ravel-progressive-composition>\n*/\n\nimport { RavelProgressiveComposition } from './src/RavelProgressiveComposition.js';\n\ncustomElements.define('ravel-progressive-composition', RavelProgressiveComposition);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { RavelEmoji } from '../../../../../modules/RavelEmoji.js';\n\nexport class RavelProgressiveComposition extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #composition-grid {\n            display: grid;\n            grid: auto / auto auto auto;\n        }\n        .grid-item {\n           width:140px;\n           height:100px;\n            font-size:24px;\n            border: 1px dotted red;\n        }\n        #auto-play {\n            position:absolute;\n            right:20px;\n            top: 80%;\n            font-size: 80px;\n        }\n        #auto-play-indicator {\n            margin-bottom: -32px;\n            margin-left:30px;\n            font-size:24px;\n        }\n        #slider-container {\n            position: absolute;\n            bottom: 50px;\n            left: 20px;\n            width: 300px;\n        }\n        @-webkit-keyframes pulse {\n          to {\n            -webkit-transform: scale(1.1);\n            transform: scale(1.1);\n          }\n        }\n        @keyframes pulse {\n          to {\n            -webkit-transform: scale(1.1);\n            transform: scale(1.1);\n          }\n        }\n        .pulse {\n          display: inline-block;\n          vertical-align: middle;\n          -webkit-transform: perspective(1px) translateZ(0);\n          transform: perspective(1px) translateZ(0);\n          box-shadow: 0 0 1px rgba(0, 0, 0, 0);\n         -webkit-animation-name: pulse;\n          animation-name: pulse;\n          -webkit-animation-duration: 0.3s;\n          animation-duration: 0.3s;\n          -webkit-animation-timing-function: linear;\n          animation-timing-function: linear;\n          -webkit-animation-iteration-count: infinite;\n          animation-iteration-count: infinite;\n          -webkit-animation-direction: alternate;\n          animation-direction: alternate;\n        }\n        .scale-out-center {\n        \t-webkit-animation: scale-out-center 0.5s cubic-bezier(0.550, 0.085, 0.680, 0.530) both;\n        \t        animation: scale-out-center 0.5s cubic-bezier(0.550, 0.085, 0.680, 0.530) both;\n        }\n        @-webkit-keyframes scale-out-center {\n          0% {\n            -webkit-transform: scale(1);\n                    transform: scale(1);\n            opacity: 1;\n          }\n          100% {\n            -webkit-transform: scale(0);\n                    transform: scale(0);\n            opacity: 1;\n          }\n        }\n        @keyframes scale-out-center {\n          0% {\n            -webkit-transform: scale(1);\n                    transform: scale(1);\n            opacity: 1;\n          }\n          100% {\n            -webkit-transform: scale(0);\n                    transform: scale(0);\n            opacity: 1;\n          }\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n            <div id=\"composition-grid\">\n            </div>\n            <div id=\"slider-container\">\n            <ravel-slider size=\"20px\"></ravel-slider>\n            </div>\n            <div id=\"auto-play\">\n           <div id=\"auto-play-indicator\"></div>\n           \n           </div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'source'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.grid = this.shadowRoot.querySelector('#composition-grid');\n        this.performers = 12;\n        this.performerIcon = [];\n        this.performerSection = [];\n        this.sections = 12;\n        this.autoplay = false;\n        this.autoplayTimer = null;\n        this.maxSection = 0;\n        this.minSection = 0;\n    }\n  \n    setup = () => {\n        this.observedMessages = [];\n        //this.subscribe(this.observedMessages);  \n        for (let i = 0; i < this.sections; i ++) {\n            this.grid.innerHTML += `\n            <div id=\"composition-grid-item-${i}\" class=\"grid-item\"></div>\n            `;\n        } \n\n        console.log('1');\n        for (let i = 0; i < this.sections; i ++) {\n            this.shadowRoot.querySelector(`#composition-grid-item-${i}`).addEventListener('click', (evt) => {\n                console.log(`Clicked ${i}`);\n                this.moveRandomPerformer(i);\n            });\n        } \n        console.log('2');\n        for (let i = 0; i < this.performers; i ++) {\n            let icon = RavelEmoji.getRandomEmoji();\n            this.performerIcon.push(icon);\n            this.performerSection.push(0);\n            this.shadowRoot.querySelector(`#composition-grid-item-0`).innerHTML += `\n            <span id=\"performer-${i}\">${icon}</span>\n            `;\n        }\n        console.log('3');\n        this.shadowRoot.querySelector(`#auto-play`).addEventListener('click', (evt) => {\n            console.log('auto play');\n            this.autoplay = !this.autoplay;\n            if (this.autoplay) {\n                this.autoPlayTimer = setInterval(() => {\n                        this.moveRandomPerformer(this.performerSection[Math.floor(Math.random() * this.performers)]);\n                    },\n                    200\n                );\n                this.shadowRoot.querySelector(`#auto-play`).classList.add('pulse');\n            } else {\n                if (this.autoPlayTimer) clearInterval(this.autoPlayTimer);\n                this.shadowRoot.querySelector(`#auto-play`).classList.remove('pulse');\n            }\n        });\n        \n    }\n    \n    moveRandomPerformer(section) {\n        let performersInSection = [];\n        for (let i = 0; i < this.performerSection.length; i++) {\n            if (this.performerSection[i] === section) {\n                performersInSection.push(i);\n            }\n        }\n        if (performersInSection.length > 0) {\n            let n = performersInSection[Math.floor(Math.random() * performersInSection.length)];\n            if (this.performerSection[n] < (this.sections -1)) {\n                this.performerSection[n]++;\n                let p = this.shadowRoot.querySelector(`#performer-${n}`);\n                this.shadowRoot.querySelector(`#auto-play-indicator`).innerText = this.performerIcon[n];\n                console.log(p);\n                this.shadowRoot.querySelector(`#composition-grid-item-${this.performerSection[n]}`).appendChild(p);\n                if (this.performerSection[n] > this.maxSection) this.maxSection = this.performerSection[n];\n            } \n        }\n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'attribute') {\n            // Do something\n        }\n    }\n}\n","/*\nDefines the custom element <ravel-recorder>\n*/\n\nimport { RavelRecorder } from './src/RavelRecorder.js';\n\ncustomElements.define('ravel-recorder', RavelRecorder);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { ravelComponentPath } from '../../../../common/RavelComponentPath.js';\n\n\nexport class RavelRecorder extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #image {\n            display: none;\n            width: 100px;\n            margin: 20px;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <img id=\"image\" src=\"${ravelComponentPath}/images/recorder.png\"/>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'name', 'show-image'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        // e.g. this.icon = this.shadowRoot.querySelector('#icon');\n        this.mediaRecorder = null;\t\t\t\t\t\n        this.input = null;\n        this.chunks = [];\t\t\t\t\t\n        this.audioContext = window.AudioContext || window.webkitAudioContext; \n        this.audioUrl = null;\n        this.name = 'foo';\n        this.showImage = false;\n    }\n\n    setup = () => {\n        this.observedMessages = [`${this.name}`];\n        this.subscribe(this.observedMessages); \n        if (this.showImage) {\n            this.shadowRoot.querySelector('#image').style.display = 'block';\n        }  \n        this.addEventListener(`${this.name}`, this.handleEvent);\n    }\n    \n    teardown = () => {\n        this.unsubscribe(this.observedMessages);\n    }\n\n    handleEvent = (evt) => {\n        if (evt.detail.cmd === 'start-recording') {\n            this.record();\n        }\n        if (evt.detail.cmd === 'stop-recording') {\n            this.stopRecording();\n        }\n        if (evt.detail.cmd === 'play-recording') {\n            this.playRecording();\n        }\n    }\n    \n    loadSavedRecording = () => {\n        this.readBlobFromDisk();\n    }\n\t\n\trecord = async () => {\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n            navigator.mediaDevices.getUserMedia({ audio: true })\n            .then((stream) => {\n                this.mediaRecorder = null;\n                this.mediaRecorder = new MediaRecorder(stream);\n                this.mediaRecorder.start();\n                \n                let chunks = [];\n                this.mediaRecorder.ondataavailable = (e) => {\n                    chunks.push(e.data);\n                };\n                this.mediaRecorder.onstop = async (e) => {\n                    let arrayBuffer = await chunks[0].arrayBuffer();\n                    let trimmedRecording = await this.trimSilence(arrayBuffer);\n                    let normalizedRecording = await this.normalize(trimmedRecording);\n                    const blob = new Blob([normalizedRecording], { type: \"audio/wav;\" });\n                    chunks = [];\n                    this.audioUrl = URL.createObjectURL(blob);\n            \t\tawait this.saveBlob(blob);\n                };\n            })\n            .catch((err) => {\n              console.warn(`The following getUserMedia error occurred: ${err}`);\n            });\n        } else {\n            console.warn(`Couldn't resolve media devices`);\n        }\n\t}\n\n    trimSilence = async (buffer) => {\n        return new Promise((resolve, reject) => { \n            let arrayBuffer = new Uint8Array(buffer);\n            // find the first non-zero sample in the recorded samples\n            let start = 0;\n            for (let i = 0; i < arrayBuffer.length; i++) {\n                if (arrayBuffer[i] !== 0) {\n                    start = i;\n                    break;\n                }\n            }\n            // find the last non-zero sample in the recorded samples\n            let end = arrayBuffer.length - 1;\n            for (let i = arrayBuffer.length - 1; i >= 0; i--) {\n                if (arrayBuffer[i] !== 0) {\n                    end = i;\n                    break;\n                }\n            }\n            // trim the silence from the beginning and end of the recorded samples\n            resolve(arrayBuffer.slice(start, end + 1).buffer);\n        });\n    }\n\n    normalize = async (arrayBuffer) => {\n        return new Promise((resolve, reject) => { \n            resolve(arrayBuffer);\n        });\n    }\n\n        /* something like this:\n        return new Promise((resolve, reject) => { \n            try {\n                // Convert ArrayBuffer to Float32Array\n                let samples = new Float32Array(arrayBuffer);\n\n                // Find the maximum absolute value in the samples\n                let max = 0;\n                for (let i = 0; i < samples.length; i++) {\n                    max = Math.max(max, Math.abs(samples[i]));\n                }\n                // If max is 0, avoid divide-by-zero\n                if (max === 0) {\n                    resolve(samples); // nothing to normalize\n                    return;\n                }\n                // Normalize the recorded samples\n                let normalizedSamples = samples.map(sample => sample / max);\n                resolve(normalizedSamples.buffer); // return as ArrayBuffer\n            } catch (err) {\n                reject(err);\n            }\n        });\n        */\n\n\tstopRecording =  async (n) => {\n        if (this.mediaRecorder) {\n\t\t    this.mediaRecorder.stop();\n        }\n\t}\n\n    playRecording = () => {\n        console.log('play recording');\n    }\n\t\n\tsaveBlob = async (blob) => {\n\t   let reader = new window.FileReader();\n\t   let stringArray = '';\n       \n       return new Promise((resolve, reject) => { \n\t\t   reader.readAsDataURL(blob);     // Base64 encoded\n\t\t   reader.onloadend = () => {\n\t\t\t   stringArray = reader.result;\n\t\t\t   stringArray = stringArray.split(',')[1];\n\t\t\t   // save to local storage\n\t\t   } \n       });\n\t}\n\t\n\tbytestringToBlob = (b64Data) => {\n\t\tconst byteCharacters = atob(b64Data);\n\t\tconst byteArrays = [];\n\n\t\tfor (let offset = 0; offset < byteCharacters.length; offset += 512) {\n\t\tconst slice = byteCharacters.slice(offset, offset + 512);\n\n\t\tconst byteNumbers = new Array(slice.length);\n\t\tfor (let i = 0; i < slice.length; i++) {\n\t\t  byteNumbers[i] = slice.charCodeAt(i);\n\t\t}\n\n\t\tconst byteArray = new Uint8Array(byteNumbers);\n\t\t    byteArrays.push(byteArray);\n\t\t}\n\n\t\tconst blob = new Blob(byteArrays, { type: 'audio/wav' });\n\t\treturn blob;\n\t}\n\t\n\treadBlobFromLocalStorage = () => {\n\t\t// this.audioSlotUrl = URL.createObjectURL(FluxlyRecordings.bytestringToBlob(blobData));\n\t}\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'name') {\n            this.name = newValue;\n        }\n        if (name === 'show-image') {\n            this.showImage = true;\n        }\n    }\n}\n","/*\nDefines the custom element <ravel-sequencer>\n*/\n\nimport { RavelSequencer } from './src/RavelSequencer.js';\n\ncustomElements.define('ravel-sequencer', RavelSequencer);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\n\nexport class RavelSequencer extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'attribute'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        // e.g. this.icon = this.shadowRoot.querySelector('#icon');\n    }\n  \n    setup = () => {\n        this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);   \n    }\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        \n        if (name === 'attribute') {\n            // Do something\n        }\n    }\n}\n","\n/*\nDefines the custom element <ravel-slider-2>\n*/\n\nimport { RavelSlider2 } from './src/RavelSlider2.js';\n\ncustomElements.define('ravel-slider-2', RavelSlider2);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { ravelComponentPath } from '../../../../common/RavelComponentPath.js';\n\nexport class RavelSlider2 extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            position: absolute;\n            cursor: pointer;\n            user-select: none;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n        #slider-background {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n        }\n        #slider-handle {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            left: 0px;\n        }\n        #sensor {\n            position: absolute;\n            border-radius: 24px;\n        }\n        .pixelArt {\n            position: absolute;\n        }\n        .transparent {\n            background-color: rgba(255, 255, 255, 0);\n        }\n        .light-pixel {\n            background-color: #aaaaaa;\n        }\n        .dark-pixel {\n            background-color: #000000;\n        }\n        .color-pixel {\n            background-color: #FFFF00;\n        }\n        #handle-shadow {\n            opacity: 0.5;\n            background-color: #000000;\n        }\n        #handle-container {\n            position: absolute;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"sensor\"></div>\n        <div id=\"slider-background\">\n            <div id=\"top-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"left-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"left-margin\" class=\"light-pixel pixelArt\"></div>\n            <div id=\"right-margin\" class=\"light-pixel pixelArt\"></div>\n            <div id=\"right-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"bottom-side\" class=\"dark-pixel pixelArt\"></div>            \n            <div id=\"center\" class=\"light-pixel pixelArt\"></div>\n            <div id=\"center-line\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"handle-container\">\n                <div id=\"slider-handle\">\n                    <div id=\"handle-top-side\" class=\"dark-pixel pixelArt\"></div>\n                    <div id=\"handle-left-side\" class=\"dark-pixel pixelArt\"></div>\n                    <div id=\"handle-center\" class=\"color-pixel pixelArt\"></div>\n                    <div id=\"handle-center-line\" class=\"dark-pixel pixelArt\"></div>\n                    <div id=\"handle-right-side\" class=\"dark-pixel pixelArt\"></div>\n                    <div id=\"handle-bottom-side\" class=\"dark-pixel pixelArt\"></div>\n                    <div id=\"handle-shadow\" class=\"pixelArt\"></div>\n                </div>\n            </div>\n        </div>\n\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, \n            'size', 'w', 'h',\n            'color', 'pixel-size', 'margin',\n            'min', 'max', 'step', 'value',\n            'value', 'signals', 'signal-out'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.sliderBackground = this.shadowRoot.querySelector('#slider-background');\n        this.handleContainer = this.shadowRoot.querySelector('#handle-container');\n        this.sliderHandle = this.shadowRoot.querySelector('#slider-handle');\n        this.sensor = this.shadowRoot.querySelector('#sensor');\n        this.signals = [];\n        this.noClick = false;\n        this.showFeedback = false;\n        this.x = 0;\n        this.y = 0;\n        this.width = 50;\n        this.height = 50;\n        this.minX = 0;\n        this.minX = 0;\n        this.range = 0;\n        this.pixelSize = 20;\n        this.offsetX = 0;\n        this.offsetY = 0;\n        this.margin = 50;\n        this.min = 0;\n        this.max = 1;\n        this.step = .1;\n        this.value = 0;\n        this.handleWidth = 0;\n        this.color = '#ff0000';\n        //if (this.signalsOut[0]) this.sendMessage('signal', this.signalsOut[0], this.value);\n    }\n  \n    setup = async () => {\n        this.observedMessages = [`${this.id}`];\n        this.subscribe(this.observedMessages);\n        this.subscribe(this.signals);  \n        this.container.style.top = `${this.y}px`;\n        this.container.style.left = `${this.x}px`;\n        this.container.style.width = `${this.width}px`;\n        this.container.style.height = `${this.height}px`;\n        this.handleWidth = this.pixelSize * 7;\n\n        await this.buildSlider();\n       \n        const rect = this.container.getBoundingClientRect();\n        this.minX = rect.x + this.pixelSize + this.margin;\n        this.maxX = rect.x + rect.width - this.pixelSize - this.margin;\n        this.range = this.handleContainer.getBoundingClientRect().width;\n        this.sensor.style.width = `${this.width + this.pixelSize * 2}px`;\n        this.sensor.style.height = `${this.height + this.pixelSize * 2}px`;\n\n        // set slider position from initial value\n        this.setFromValue();\n\n        this.shadowRoot.querySelector('#handle-center').style.backgroundColor = this.color;\n        //const rect = this.container.getBoundingClientRect();\n        //this.centerX = rect.left + rect.width / 2;\n        //this.centerY = rect.top + rect.height / 2;\n        if (!this.noClick) {\n            this.addEventListener('pointerdown', this.handleClick);\n            this.addEventListener('pointerdown', this.handleMessageOnClick);\n        }\n        this.addEventListener(`${this.id}`, this.handleEvent);\n        this.broadcastMessage('register-sensor', this.id, this.container);\n        //this.broadcastMessage('register-sensor', this.id, { x: this.x + this.w/2, y: this.y + this.h/2, w: this.w, h: this.height });\n    }\n\n    handleClick = (e) => {\n        e.preventDefault();\n        // Update center values dynamically in case layout shifted\n        this.calculateValue(e.clientX, e.clientY);\n        document.addEventListener('pointermove', this.dragElement);\n        document.addEventListener('pointerup', this.endDragElement);\n        document.addEventListener('pointerleave', this.endDragElement);\n    }\n\n    dragElement = (e) => {\n        e.preventDefault();\n        this.calculateValue(e.clientX + this.offsetX, e.clientY + this.offsetY);\n    }\n\n    endDragElement = () => {\n        document.removeEventListener('pointermove', this.dragElement);\n        document.removeEventListener('pointerup', this.endDragElement);\n        document.removeEventListener('pointerleave', this.endDragElement);\n    }\n\n    handleEvent = (e) => {\n        e.preventDefault();\n        const type = e.detail.cmd;\n\n        if (type === 'select') {\n            this.sensor.style.backgroundColor = 'rgba(255, 255, 0, 0.5)';\n        }\n        if (type === 'unselect') {\n            this.sensor.style.backgroundColor = 'rgba(255, 255, 255, 0)';\n        }\n        if (type === 'virtual-click') {\n            this.handleMessageOnClick();\n            let x = Number(e.detail.content.startX);\n            let y = Number(e.detail.content.startY);\n            this.offsetX = Number(e.detail.content.offsetX);\n            this.offsetY = Number(e.detail.content.offsetY);\n            const rect = this.container.getBoundingClientRect();\n            this.calculateValue(x + this.offsetX, y + this.offsetY);\n            document.addEventListener('pointermove', this.dragElement);\n            document.addEventListener('pointerup', this.endDragElement);\n            document.addEventListener('pointerleave', this.endDragElement);\n        }\n        if (type === 'virtual-drag') {\n            this.calculateValue(e.clientX + this.offsetX, e.clientY + this.offsetY);\n        }\n        if (type === 'virtual-release') {\n            this.offsetX = 0;\n            this.offsetY = 0;\n            document.removeEventListener('pointermove', this.dragElement);\n            document.removeEventListener('pointerup', this.endDragElement);\n            document.removeEventListener('pointerleave', this.endDragElement);\n        }\n    }\n\n    teardown = () => {\n        this.unsubscribe(this.signals);\n        this.broadcastMessage('register-sensor', this.id);\n        if (!this.noClick) {\n            this.removeEventListener('pointerdown', this.handleClick);\n        }\n        this.removeEventListener(`${this.id}`, this.handleEvent);\n    }\n    \n    calculateValue = (x, y) => {\n        const rect = this.handleContainer.getBoundingClientRect();\n        let startX = 0;\n        let newX = x - rect.x;\n        if ((newX >= startX) && (newX <= this.range + startX)) {\n            this.sliderHandle.style.left = `${newX - (this.handleWidth /2)}px`;\n            this.value = newX / this.range;\n            this.value = this.map(this.value);\n            this.sendMessage(this.signalOut, this.id, this.value);\n        }\n    }\n\n    setFromValue = () => {\n        const rect = this.handleContainer.getBoundingClientRect();\n        let newX = (((this.value - this.min) / (this.max - this.min)) * this.range) - (this.handleWidth /2);\n        this.sliderHandle.style.left = `${newX}px`;\n        //this.sliderHandle.style.left = `${newX - this.handleWidth / 2}px`;\n    }\n\n    buildSlider = () => {\n        let innerW = this.width - this.pixelSize * 2;\n        let innerH = this.height - this.pixelSize * 2;\n        let centerW = innerW - this.margin * 2;\n        this.innerMax = centerW - this.margin;\n\n        this.setPixelDimensions('top-side', innerW, this.pixelSize);\n        this.setPixelDimensions('left-side', this.pixelSize, innerH);\n        this.setPixelDimensions('bottom-side', innerW, this.pixelSize);\n        this.setPixelDimensions('right-side', this.pixelSize, innerH );\n        this.setPixelDimensions('left-margin', this.margin, innerH);\n        this.setPixelDimensions('right-margin', this.margin, innerH);\n        this.setPixelDimensions('center', centerW, innerH);\n        this.setPixelDimensions('handle-container', centerW, innerH);\n        this.setPixelDimensions('center-line', centerW, this.pixelSize);\n\n        this.setPixelPosition('top-side', this.pixelSize, 0);\n        this.setPixelPosition('left-side', 0, this.pixelSize);\n        this.setPixelPosition('bottom-side', this.pixelSize, innerH + this.pixelSize);\n        this.setPixelPosition('right-side', innerW + this.pixelSize, this.pixelSize);\n        this.setPixelPosition('left-margin', this.pixelSize, this.pixelSize);\n        this.setPixelPosition('right-margin', innerW + this.pixelSize - this.margin, this.pixelSize);\n        this.setPixelPosition('center', this.margin + this.pixelSize, this.pixelSize);\n        this.setPixelPosition('handle-container', this.margin + this.pixelSize, -(this.pixelSize * 2));\n        this.setPixelPosition('center-line', this.margin + this.pixelSize, (this.height / 2) - this.pixelSize / 2);\n\n        innerW = (this.pixelSize * 6) - this.pixelSize * 2;\n        innerH = this.height + this.pixelSize * 2;\n        \n        this.sliderHandle.style.width = `${this.handleWidth}px`;\n        this.setPixelDimensions('handle-top-side', innerW, this.pixelSize);\n        this.setPixelDimensions('handle-left-side', this.pixelSize, innerH);\n        this.setPixelDimensions('handle-bottom-side', innerW, this.pixelSize);\n        this.setPixelDimensions('handle-right-side', this.pixelSize, innerH );\n        this.setPixelDimensions('handle-center', innerW, innerH);\n        this.setPixelDimensions('handle-shadow', innerW, this.pixelSize);\n        this.setPixelDimensions('handle-center-line', (this.pixelSize), innerH - this.pixelSize * 2.5);\n\n        this.setPixelPosition('handle-top-side', this.pixelSize, 0);\n        this.setPixelPosition('handle-left-side', 0, this.pixelSize);\n        this.setPixelPosition('handle-bottom-side', this.pixelSize, innerH + this.pixelSize);\n        this.setPixelPosition('handle-right-side', innerW + this.pixelSize, this.pixelSize);\n        this.setPixelPosition('handle-center', this.pixelSize, this.pixelSize);\n        this.setPixelPosition('handle-shadow', this.pixelSize, innerH);\n        this.setPixelPosition('handle-center-line', (innerW / 2) + (this.pixelSize / 2), this.pixelSize * 2);\n\n        return new Promise(resolve => setTimeout(resolve, 500));\n\n    }\n\n    setPixelDimensions = (id, w, h) => {\n        this.shadowRoot.querySelector(`#${id}`).style.width = `${w}px`;\n        this.shadowRoot.querySelector(`#${id}`).style.height = `${h}px`;\n    }\n\n    setPixelPosition = (id, x, y) => {\n        this.shadowRoot.querySelector(`#${id}`).style.top = `${y}px`;\n        this.shadowRoot.querySelector(`#${id}`).style.left = `${x}px`;\n    }\n    \n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'size') {\n            this.size = Number(newValue);\n        }\n        if (name === 'x') {\n            this.x = Number(newValue);\n        }\n        if (name === 'y') {\n            this.y = Number(newValue);\n        }\n        if (name === 'src') {\n            this.src = newValue;\n        }\n        if (name === 'w') {\n            this.width = Number(newValue);\n        }\n        if (name === 'h') {\n            this.height = Number(newValue);\n        }\n        if (name === 'orientation') {\n            this.orientation = newValue;\n        }\n        if (name === 'value') {\n            this.value = Number(newValue);\n        }\n        if (name === 'signals') {\n            this.signals = newValue.split(',');\n        }\n        if (name === 'signal-out') {\n            this.signalOut = newValue;\n        }\n        if (name === 'no-click') {\n            this.noClick = true;\n        }\n        if (name === 'show-feedback') {\n            this.showFeedback = true;\n        }\n        if (name === 'color') {\n            this.color = newValue;\n        }\n        if (name === 'pixel-size') {\n            this.pixelSize = Number(newValue);\n        }\n        if (name === 'margin') {\n            this.margin = Number(newValue);\n        }\n        if (name === 'min') {\n            this.min = Number(newValue);\n        }\n        if (name === 'max') {\n            this.max = Number(newValue);\n        }\n        if (name === 'step') {\n            this.step = Number(newValue);\n        }\n        if (name === 'value') {\n            this.value = Number(newValue);\n        }\n    }\n\n    map = (value) => {\n        const raw = value * (this.max - this.min) + this.min;\n        const stepped = Math.round(raw / this.step) * this.step;\n        const precision = Math.ceil(-Math.log10(this.step)) || 0;\n        return parseFloat(stepped.toFixed(precision));\n    }\n\n}\n","/*\nDefines the custom element <ravel-slider>\n*/\n\nimport { RavelSlider } from './src/RavelSlider.js';\n\ncustomElements.define('ravel-slider', RavelSlider);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\n\nexport class RavelSlider extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n          \n          width: 100%; \n          border: 1px dotted red;\n        }\n\n        /* The slider itself */\n        .slider-1, .slider-2 {\n              -webkit-appearance: none;  /* Override default CSS styles */\n              appearance: none;\n              width: 100%; /* Full-width */\n              height: 0px; /* Specified height */\n              background: #000000; /* Grey background */\n              border-bottom:3px dotted #aaaaaa;\n              outline: none; /* Remove outline */\n              pointer-events: none;\n          }\n          .slider-2 {\n              display:none;\n          }\n          .slider-1::-webkit-slider-thumb {\n              pointer-events: auto;\n            -webkit-appearance: none;\n            appearance: none;\n            width: 40px;\n            height: 40px;\n            border: 0;\n            background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQwIgogICBoZWlnaHQ9IjQwIgogICB2aWV3Qm94PSIwIDAgNDAgNDAiCiAgIGZpbGw9Im5vbmUiCiAgIHZlcnNpb249IjEuMSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM4NDM2IiAvPgogCiAgPHRleHQKICAgICB4bWw6c3BhY2U9InByZXNlcnZlIgogICAgIHN0eWxlPSJmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zaXplOjI0cHg7bGluZS1oZWlnaHQ6MS4yNTtmb250LWZhbWlseTpzYW5zLXNlcmlmO2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIKICAgICB4PSIwIgogICAgIHk9IjAiCiAgICAgaWQ9InRleHQ5NjQ2Ij48dHNwYW4KICAgICAgIHNvZGlwb2RpOnJvbGU9ImxpbmUiCiAgICAgICBpZD0idHNwYW45NjQ0IgogICAgICAgeD0iMCIKICAgICAgIHk9IjM2IgogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTozNnB4Ij7wn6ShPC90c3Bhbj48L3RleHQ+Cjwvc3ZnPgo='); \n            cursor: pointer;\n          }\n          .slider-1::-moz-range-thumb {\n              pointer-events: auto;\n            width: 40px;\n            height: 40px;\n            border: 0;\n            background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQwIgogICBoZWlnaHQ9IjQwIgogICB2aWV3Qm94PSIwIDAgNDAgNDAiCiAgIGZpbGw9Im5vbmUiCiAgIHZlcnNpb249IjEuMSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM4NDM2IiAvPgogCiAgPHRleHQKICAgICB4bWw6c3BhY2U9InByZXNlcnZlIgogICAgIHN0eWxlPSJmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zaXplOjI0cHg7bGluZS1oZWlnaHQ6MS4yNTtmb250LWZhbWlseTpzYW5zLXNlcmlmO2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIKICAgICB4PSIwIgogICAgIHk9IjAiCiAgICAgaWQ9InRleHQ5NjQ2Ij48dHNwYW4KICAgICAgIHNvZGlwb2RpOnJvbGU9ImxpbmUiCiAgICAgICBpZD0idHNwYW45NjQ0IgogICAgICAgeD0iMCIKICAgICAgIHk9IjM2IgogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTozNnB4Ij7wn6ShPC90c3Bhbj48L3RleHQ+Cjwvc3ZnPgo='); \n            cursor: pointer;\n          }\n          .slider-2::-webkit-slider-thumb {\n              pointer-events: auto;\n            -webkit-appearance: none;\n            appearance: none;\n            width: 40px;\n            height: 40px;\n            border: 0;\n            background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQwIgogICBoZWlnaHQ9IjQwIgogICB2aWV3Qm94PSIwIDAgNDAgNDAiCiAgIGZpbGw9Im5vbmUiCiAgIHZlcnNpb249IjEuMSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM4NDM2IiAvPgogCiAgPHRleHQKICAgICB4bWw6c3BhY2U9InByZXNlcnZlIgogICAgIHN0eWxlPSJmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zaXplOjI0cHg7bGluZS1oZWlnaHQ6MS4yNTtmb250LWZhbWlseTpzYW5zLXNlcmlmO2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIKICAgICB4PSIwIgogICAgIHk9IjAiCiAgICAgaWQ9InRleHQ5NjQ2Ij48dHNwYW4KICAgICAgIHNvZGlwb2RpOnJvbGU9ImxpbmUiCiAgICAgICBpZD0idHNwYW45NjQ0IgogICAgICAgeD0iMCIKICAgICAgIHk9IjM2IgogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTozNnB4Ij7wn6SWPC90c3Bhbj48L3RleHQ+Cjwvc3ZnPgo='); \n            cursor: pointer;\n          }\n          .slider-2::-moz-range-thumb {\n              pointer-events: auto;\n            width: 40px;\n            height: 40px;\n            border: 0;\n            background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQwIgogICBoZWlnaHQ9IjQwIgogICB2aWV3Qm94PSIwIDAgNDAgNDAiCiAgIGZpbGw9Im5vbmUiCiAgIHZlcnNpb249IjEuMSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM4NDM2IiAvPgogCiAgPHRleHQKICAgICB4bWw6c3BhY2U9InByZXNlcnZlIgogICAgIHN0eWxlPSJmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zaXplOjI0cHg7bGluZS1oZWlnaHQ6MS4yNTtmb250LWZhbWlseTpzYW5zLXNlcmlmO2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIKICAgICB4PSIwIgogICAgIHk9IjAiCiAgICAgaWQ9InRleHQ5NjQ2Ij48dHNwYW4KICAgICAgIHNvZGlwb2RpOnJvbGU9ImxpbmUiCiAgICAgICBpZD0idHNwYW45NjQ0IgogICAgICAgeD0iMCIKICAgICAgIHk9IjM2IgogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTozNnB4Ij7wn6SWPC90c3Bhbj48L3RleHQ+Cjwvc3ZnPgo='); \n            cursor: pointer;\n          }\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n    <div id=\"container\">\n        <input type=\"range\" min=0 max=1 step=.01 value=\"0\" class=\"slider-1\" id=\"slider-1\">\n        <input type=\"range\" min=0 max=1 step=.01 value=\"1\" class=\"slider-2\" id=\"slider-2\">\n    </div>\n        `;\n    }\n \n    static get observedAttributes() { \n       return [...super.baseObservedAttributes,'slider-id', 'sliders', 'min', 'max', 'orientation', 'value', 'value-2', 'icon'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML =  this.constructor.localStyles\n            + this.constructor.html\n            + this.constructor.baseStyles\n            + this.constructor.baseHtml;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.handleSignals = this.handleSignals.bind(this);\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.slider1 = this.shadowRoot.querySelector('#slider-1');\n        this.slider2 = this.shadowRoot.querySelector('#slider-2');\n        this.slider2.style['border-bottom'] = 'none';\n        this.slider2.style['margin-top'] = '-16px';\n       \n        this.sliderId = 0;\n        this.size = 32;\n        this.orientation = 'horizontal';\n        this.values = [ 0, 1.0 ];\n        this.sliders = 1;\n        this.min = 0;\n        this.max = 1.0;\n        this.step = 0.01;\n    }\n  \n    setup = () => {\n        this.observedMessages = ['signal'];\n        this.subscribe(this.observedMessages);   \n        this.addEventListener(`signal`, this.slider1Signals);\n        this.container.style['font-size'] = `${this.size}px`;\n        if (this.orientation === 'horizontal') {\n           this.container.style['height'] = `${this.size}px`;\n        } else {\n           this.container.style['width'] = `${this.size}px`;\n           this.container.style['margin-left'] = `${this.size}px`\n        }\n        if (this.sliders === 2) {\n            this.slider2.style.display = 'block';\n        }\n        this.slider1.min = this.min;\n        this.slider1.max = this.values[1];\n        this.slider1.step = this.step;\n        this.slider2.min = this.values[0];\n        this.slider1.max = this.max;\n        this.slider2.step = this.step;\n        this.slider1.value = this.values[0];\n        this.slider2.value = this.values[1];\n        \n        this.slider1.addEventListener('input', () => {\n            if (this.slider1.value >= this.slider2.value) {\n                this.slider2.value =  this.slider1.value;\n            }\n            this.values[0] = this.slider1.value;\n            if (this.signalsOut[0]) this.sendMessage('signal', this.signalsOut[0], this.values[0]);\n        });\n        \n        this.slider2.addEventListener('input', () => {\n            if (this.slider2.value <= this.slider1.value) {\n                this.slider1.value =  this.slider2.value;\n            }\n            this.values[1] = this.values[1];\n            if (this.signalsOut[1]) this.sendMessage('signal', this.signalsOut[1], this.values[1]);\n        });\n        \n        /* TODO: Get encoding of emoji working \n        this.icon1 = `url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQwIgogICBoZWlnaHQ9IjQwIgogICB2aWV3Qm94PSIwIDAgNDAgNDAiCiAgIGZpbGw9Im5vbmUiCiAgIHZlcnNpb249IjEuMSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM4NDM2IiAvPgogCiAgPHRleHQKICAgICB4bWw6c3BhY2U9InByZXNlcnZlIgogICAgIHN0eWxlPSJmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zaXplOjI0cHg7bGluZS1oZWlnaHQ6MS4yNTtmb250LWZhbWlseTpzYW5zLXNlcmlmO2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIKICAgICB4PSIwIgogICAgIHk9IjAiCiAgICAgaWQ9InRleHQ5NjQ2Ij48dHNwYW4KICAgICAgIHNvZGlwb2RpOnJvbGU9ImxpbmUiCiAgICAgICBpZD0idHNwYW45NjQ0IgogICAgICAgeD0iMCIKICAgICAgIHk9IjM2IgogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTozNnB4Ij7wn42pPC90c3Bhbj48L3RleHQ+Cjwvc3ZnPgo=')`;\n        this.shadowRoot.styleSheets[0].insertRule(`.slider-1::-webkit-slider-thumb { background: ${this.icon1}; }`, 0);\n        this.shadowRoot.styleSheets[0].insertRule(`.slider-1::-moz-range-thumb { background: ${this.icon1}; }`, 0);\n       \n       // this.icon2 = this.getEncodedIcon(RavelEmoji.getRandomEmoji());\n        console.log(this.icon1);\n        */\n    }\n    \n    teardown = () => {\n        this.unsubscribe(this.observedMessages);\n    }\n\n    handleSignals = (evt) => {\n        if (this.signalsIn.indexOf(evt.detail.cmd) === -1) return;\n        \n        if (this.signalsIn.indexOf(evt.detail.cmd) === 0) {\n            this.values[0] = Number(evt.detail.content);\n            this.slider1.value = Number(evt.detail.content);\n            console.log(evt.detail.content);\n            console.log(this.slider1.value);\n        }\n        if (this.signalsIn.indexOf(evt.detail.cmd) === 1) {\n            this.values[1] = Number(evt.detail.content);\n            this.slider2.value = Number(evt.detail.content);\n        }\n        console.log(`got ${evt.detail.cmd} ${evt.detail.content}`);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'size') {\n            this.size = Number(newValue);\n        }\n        if (name === 'orientation') {\n            this.orientation = newValue;\n        }\n        if (name === 'slider-id') {\n            this.sliderId = newValue;\n        }\n        if (name === 'sliders') {\n            this.sliders = parseInt(newValue, 10);\n        }\n        if (name === 'min') {\n            this.min = Number(newValue);\n        }\n        if (name === 'max') {\n            this.max = Number(newValue);\n        }\n        if (name === 'step') {\n            this.step = Number(newValue);\n        }\n        if (name === 'value') {\n            this.values[0] = Number(newValue);\n        }\n        if (name === 'value-2') {\n            this.values[1] = Number(newValue);\n        }\n    }\n    \n    getEncodedIcon(emoji) {\n        let svg = `\n         <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n         <svg\n            width=\"${this.size + 8}\"\n            height=\"${this.size + 8}\"\n            viewBox=\"0 0 ${this.size + 8} ${this.size + 8}\"\n            fill=\"none\"\n            version=\"1.1\"\n            xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlns:svg=\"http://www.w3.org/2000/svg\">\n           <defs\n              id=\"defs8436\" />\n \n           <text\n              xml:space=\"preserve\"\n              style=\"font-style:normal;font-weight:normal;font-size:24px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none\"\n              x=\"0\"\n              y=\"0\"\n              id=\"text9646\"><tspan\n                sodipodi:role=\"line\"\n                id=\"tspan9644\"\n                x=\"0\"\n                y=\"${this.size}\"\n                style=\"font-size:${this.size}px\">${emoji}</tspan></text>\n         </svg>\n        `;\n        return svg;\n    }\n}\n","/*\nDefines the custom element <ravel-switch>\n*/\n\nimport { RavelSwitch } from './src/RavelSwitch.js';\n\ncustomElements.define('ravel-switch', RavelSwitch);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\nimport { RavelEmoji } from '../../../../../modules/RavelEmoji.js';\n\nexport class RavelSwitch extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            position: absolute;\n            cursor: pointer;\n        }\n        #switch-wrapper {\n            display: flex;\n            flex: space-between;\n            width: 100%;\n            height: 100%;\n            background-color: rgba(0, 0, 0, 0.5);\n            padding: 5px;\n            border: 5px solid #444444;\n        }\n        .switch {\n            position: relative;\n            background-color: #999999;\n            height: 100%;\n            width: 20px;\n            margin: 1px;\n        }\n        .switch .active {\n            box-shadow: inset 0px 0px 4px 4px rgba(255, 255, 255, .25);\n        }\n        .switch-shadow {\n            position: absolute;\n            bottom: 0px;\n            width: 100%;\n            background-color: rgba(0, 0, 0, 0.5);\n            height: 20%;\n        }\n        .selected {\n            -webkit-box-shadow: 0px 0px 0px 10px rgba(255, 255, 0, 0.5); \n            box-shadow: 0px 0px 0px 10px rgba(255, 255, 0, 0.5);\n            background-color: rgba(255, 255, 0, 0.5);\n            border-radius: 14px;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"switch-wrapper\">\n        </div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, \n            'type', 'orientation', 'states', 'state', 'color', 'signals', 'w', 'h'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html\n            + this.constructor.baseStyles\n            + this.constructor.baseHtml;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.switchId = 0;\n        this.type = 'toggle';\n        this.size = '50';\n        this.orientation = 'horizontal';\n        this.states = 2;\n        this.state = 1;\n        this.stateDir = 1;\n        this.signals = [ ];\n        this.noClick = false;\n        this.showFeedback = false;\n        this.x = 0;\n        this.y = 0;\n        this.width = 100;\n        this.height = 100;\n        this.switchWidth = 50;\n        this.offColor = '#999999';\n    }\n  \n    setup = () => {\n        this.observedMessages = [`${this.id}`];\n        this.subscribe(this.observedMessages);\n        this.container.style.width = `${this.width}px`;\n        this.container.style.height = `${this.height}px`;\n        this.container.style.top = `${this.y}px`;\n        this.container.style.left = `${this.x}px`;\n        this.switchWidth = this.width / this.states;\n        console.log(this.width);\n\n        let wrapper = this.shadowRoot.querySelector('#switch-wrapper');\n        let widthAttribute = `${this.switchWidth}px`;\n        if (this.orientation === 'vertical') {\n            wrapper.style.flexDirection = 'column';\n            widthAttribute = '100%';\n        }\n\n        for (let i = 1; i <= this.states; i++) {\n            wrapper.innerHTML = wrapper.innerHTML + `\n                <div id=\"state-${i}\" class=\"switch\" style=\"width:${widthAttribute};\"><div class=\"switch-shadow\"></div><div>`;\n        }\n        this.shadowRoot.querySelector(`#state-${this.state}`).style.backgroundColor = this.color;\n        this.addEventListener('click', this.handleToggle);\n        this.addEventListener('toggle', this.handleToggle);\n\n        this.addEventListener(`${this.id}`, this.handleEvent);\n        this.broadcastMessage('register-sensor', this.id, this.container);\n        //this.broadcastMessage('register-sensor', this.id, { x: this.x + this.width/2, y: this.y + this.height/2 + 10, w: this.width, h: this.height });\n    }\n    \n    handleToggle = () => {\n        this.shadowRoot.querySelector(`#state-${this.state}`).style.backgroundColor = this.offColor;\n        if ((this.state === this.states) || ((this.state === 1) && (this.stateDir === -1))) {\n            this.stateDir = this.stateDir * -1;\n        }\n        this.state =  this.state + this.stateDir;\n        console.log(this.state);\n        this.shadowRoot.querySelector(`#state-${this.state}`).style.backgroundColor = this.color; \n        this.sendMessage(this.stateSignals[this.state - 1 ], '', '');\n        let evt = new CustomEvent(this.stateSignals[this.state], { detail: {}});\n        this.dispatchEvent(evt);\n    }\n    \n    handleEvent = (e) => {\n        e.preventDefault();\n        const type = e.detail.cmd;\n        console.log(type);\n        if (type === 'select') {\n            this.shadowRoot.querySelector('#switch-wrapper').classList.add('selected');\n        }\n        if (type === 'unselect') {\n            this.shadowRoot.querySelector('#switch-wrapper').classList.toggle('selected');\n        }\n        if (type === 'virtual-click') {\n            this.handleToggle();\n        }\n    }\n\n    teardown = () => {\n        this.unsubscribe(this.observedMessages);\n        this.broadcastMessage('register-sensor', this.id);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'w') {\n            this.width = Number(newValue);\n        }\n        if (name === 'h') {\n            this.height = Number(newValue);\n        }\n        if (name === 'orientation') {\n            this.orientation = newValue;\n        }\n        if (name === 'type') {\n            this.type = newValue;\n        }\n        if (name === 'states') {\n            this.states = parseInt(newValue, 10);\n        }\n        if (name === 'state') {\n            this.state = parseInt(newValue, 10);\n        }\n        if (name === 'color') {\n            this.color = newValue;\n        }\n        if (name === 'signals') {\n            this.stateSignals = newValue.split(',');\n        }\n        if (name === 'no-click') {\n            this.noClick = true;\n        }\n        if (name === 'show-feedback') {\n            this.showFeedback = true;\n        }\n    }\n}\n\n","/*\nDefines the custom element <ravel-tally-grid>\n*/\n\nimport { RavelTallyGrid } from './src/RavelTallyGrid.js';\n\ncustomElements.define('ravel-tally-grid', RavelTallyGrid);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelTallyGrid extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        :host {\n            display: block;\n            width: 100%;\n            height: 100%;\n        }\n        #container {\n            display: grid;\n            width: 100%;\n            height: 100%;\n        }\n        .cell {\n            background: #eeeeee;\n            border: 1px solid #ffffff;\n            aspect-ratio: 1 / 1;\n            cursor: pointer;\n            transition: background 0.2s;\n        }\n        .cell.active {\n            background: black;\n        }\n        .cell.extra {\n            background: none;\n            border: 1px solid none;\n            pointer-events: none;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'color', 'cells'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#touch-pad-container');\n        this.handle = this.shadowRoot.querySelector('#touch-handle');\n        this.cells = 14; \n        this.interactive = false;\n        this.filled = false;\n    }\n  \n    setup = () => {\n        this.observedMessages = [`${this.id}`];\n        this.subscribe(this.observedMessages);   \n        this.size = Math.ceil(Math.sqrt(this.cells)); \n        this.container = this.shadowRoot.querySelector('#container');\n        this.container.style.gridTemplateColumns = `repeat(${this.size}, 1fr)`;\n        this.container.style.gridTemplateRows = `repeat(${this.size}, 1fr)`;\n        this.addEventListener(`${this.id}`, this.handleEvent);\n        for (let i = 0; i < this.size * this.size; i++) {\n            const cell = document.createElement('div');\n            cell.className = 'cell';\n            cell.id = `cell-${i}`;\n            if (i >= this.cells) {\n                cell.classList.add('extra');\n            }\n            this.container.appendChild(cell);\n        }\n    }\n\n    returnEmoji = (evt) => {\n        \n    }\n    \n    handleEvent = (evt) => {\n        if (evt.detail.cmd === 'activate') {\n            if (this.shadowRoot.querySelector(`#cell-${evt.detail.content}`)) {\n                this.shadowRoot.querySelector(`#cell-${evt.detail.content}`).classList.add('active');\n            }\n        }\n    }\n\n    teardown = () => {\n        this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'cells') {\n            this.cells = parseInt(newValue, 10);\n        }\n        if (name === 'color') {\n            this.color = newValue;\n        }\n    }\n}","/*\nDefines the custom element <ravel-touch-pad>\n*/\n\nimport { RavelTouchPad } from './src/RavelTouchPad.js';\n\ncustomElements.define('ravel-touch-pad', RavelTouchPad);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelTouchPad extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #touch-handle {\n            position: absolute;\n            font-size:12px;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"touch-pad-container\">\n        <ravel-emoji-grid emoji=\"\" size=\"80\"></ravel-emoji-grid>\n        <div id=\"touch-handle\"></div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, 'background', 'touch-x-list', 'touch-y-list', \"touch-points\", 'width', 'height', 'x', 'y'];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#touch-pad-container');\n        this.handle = this.shadowRoot.querySelector('#touch-handle');\n        this.width = 160;\n        this.height = 160;\n    }\n  \n    setup = () => {\n        this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);   \n        this.container.style.width = `${this.width}`; \n        this.container.style.height = `${this.height}`;\n        this.centerX = this.handle.getBoundingClientRect().left;\n        this.centerY = this.handle.getBoundingClientRect().top;\n        this.containerX = this.container.getBoundingClientRect().left;\n        this.containerY = this.container.getBoundingClientRect().top;\n        this.updateValue();\n        this.addEventListener('mousedown', (e) => { \n            console.log(\"mousedown\");\n            e.preventDefault();\n            this.startX = e.clientX;\n            this.startY = e.clientY;\n            this.handle.style.left = e.clientX - this.centerX - 6;\n            this.handle.style.top = e.clientY - this.centerY - 6;\n            this.mouseMoveCallback = this.dragElement.bind(this); \n            this.mouseUpCallback = this.endDragElement.bind(this);\n            document.addEventListener('mousemove', this.mouseMoveCallback);\n            document.addEventListener('mouseup', this.mouseUpCallback);\n           // document.addEventListener('mouseout', this.mouseUpCallback);\n            document.addEventListener('mouseleave', this.mouseUpCallback);\n  \t  });\n    }\n    \n    dragElement(e) {\n        e.preventDefault();\n        let x = this.startX - e.clientX;\n        let y = this.startY - e.clientY;\n        this.startX = e.clientX;\n        this.startY = e.clientY;\n        let newX = (this.handle.offsetLeft - x);\n        let newY = (this.handle.offsetTop - y);\n        if (this.inBounds(newX, newY)) {\n            this.handle.style.left = newX + 'px';\n            this.handle.style.top = newY + 'px';\n        }\n     }\n\n    endDragElement() {\n        //console.log(\"mouseout\");\n        document.removeEventListener('mousemove', this.mouseMoveCallback);\n        document.removeEventListener('mouseup', this.mouseUpCallback);\n     //   document.removeEventListener('mouseout', this.mouseUpCallback);\n        document.removeEventListener('mouseleave', this.mouseUpCallback);\n    }\n     \n    updateValue() {\n       /* if (this.orientation === 'horizontal') {\n            this.value = (this.handleX - (this.containerX + this.padding * 2)) / this.length;\n        } else {\n            this.value = ((this.containerY + this.padding * 2) - this.handleY) / this.length;\n        }\n        console.log(this.value);*/\n    }\n    \n\tinBounds(x1, y1) {\n        return true; // FIXME\n        console.log(x1 + \">\" + this.containerX );\n\t\tif ((x1 < (this.containerX + this.width)) && (x1 > this.containerX) &&\n\t\t\t(y1 < (this.containerY + this.height)) && (y1 > this.containerY)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n    \n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'size') {\n            this.size = Number(newValue);\n        }\n        if (name === 'x') {\n            this.container.style.position = 'fixed';\n            this.x = newValue;\n            this.container.style.left = newValue;\n        }\n        if (name === 'y') {\n            this.container.style.position = 'fixed';\n            this.y = newValue;\n            this.container.style.top = newValue;\n        }\n        if (name === 'orientation') {\n            this.orientation = newValue;\n        }\n        if (name === 'width') {\n            this.width = newValue;\n        }\n        if (name === 'height') {\n            this.height = newValue;\n        }\n    }\n}","/*\nDefines the custom element <ravel-visualizer-1>\n*/\n\nimport { RavelVisualizer1 } from './src/RavelVisualizer1.js';\n\n\ncustomElements.define('ravel-visualizer-1', RavelVisualizer1);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelVisualizer1 extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            position: absolute;\n            cursor: pointer;\n            user-select: none;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n        #screen {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n        }\n        #sensor {\n            position: absolute;\n            background-color: rgba(255, 255, 0, 0.5);\n            border-radius: 24px;\n        }\n        #waveform {\n            position: absolute;\n        }\n        .pixelArt {\n            position: absolute;\n        }\n        .transparent {\n            background-color: rgba(255, 255, 255, 0);\n        }\n        .light-pixel {\n            background-color: #aaaaaa;\n        }\n        .dark-pixel {\n            background-color: #000000;\n        }\n        .color-pixel {\n            background-color: #FFFF00;\n        }\n        .shadow {\n            height: 10%;\n            opacity: 0.5;\n            background-color: #000000;\n        }\n        @-webkit-keyframes pulse {\n          to {\n            -webkit-transform: scale(1.1);\n            transform: scale(1.1);\n          }\n        }\n        @keyframes pulse {\n          to {\n            -webkit-transform: scale(1.1);\n            transform: scale(1.1);\n          }\n        }\n        .pulse {\n          display: inline-block;\n          vertical-align: middle;\n          -webkit-transform: perspective(1px) translateZ(0);\n          transform: perspective(1px) translateZ(0);\n          box-shadow: 0 0 1px rgba(0, 0, 0, 0);\n         -webkit-animation-name: pulse;\n          animation-name: pulse;\n          -webkit-animation-duration: 0.3s;\n          animation-duration: 0.3s;\n          -webkit-animation-timing-function: linear;\n          animation-timing-function: linear;\n          -webkit-animation-iteration-count: infinite;\n          animation-iteration-count: infinite;\n          -webkit-animation-direction: alternate;\n          animation-direction: alternate;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"screen\">\n            <div id=\"top-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"left-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"right-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"bottom-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"p5-container\" class=\"light-pixel pixelArt\">       \n            </div>\n            <div id=\"container-shadow\" class=\"shadow pixelArt\"></div>\n        </div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, \n            'w', 'h', 'color', 'pixel-size', 'signals', 'signal-out' ];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.center = this.shadowRoot.querySelector('#p5-container');\n        this.waveform = this.shadowRoot.querySelector('#waveform');\n        this.x = 0;\n        this.y = 0;\n        this.width = 50;\n        this.height = 50;\n        this.pixelSize = 20;\n        this.padding = 10;\n        this.color = '#ff0000';\n        this.analyser = null; \n        this.dataArray = null;\n    }\n  \n    setup = () => {\n        //this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);  \n        this.container.style.top = `${this.y}px`;\n        this.container.style.left = `${this.x}px`;\n        this.container.style.width = `${this.width}px`;\n        this.container.style.height = `${this.height}px`;\n        this.buildScreen();\n        this.center.style.backgroundColor = `${this.color}`;\n        \n        this.p5instance = new p5((p) => this.sketch1(p));\n        //this.p5instance = new p5(this.sketch1); \n    \n    }\n    \n    buildScreen = () => {\n        let innerW = this.width - this.pixelSize * 2;\n        let innerH = this.height - this.pixelSize * 2;\n        let centerW = innerW;\n        this.innerMax = centerW;\n\n        console.log(`${innerW} ${innerH}`);\n        this.setPixelDimensions('top-side', innerW, this.pixelSize);\n        this.setPixelDimensions('left-side', this.pixelSize, innerH);\n        this.setPixelDimensions('bottom-side', innerW, this.pixelSize);\n        this.setPixelDimensions('right-side', this.pixelSize, innerH );\n        this.setPixelDimensions('p5-container', centerW, innerH);\n        this.setPixelDimensions('container-shadow', innerW, this.pixelSize);\n\n        this.setPixelPosition('top-side', this.pixelSize, 0);\n        this.setPixelPosition('left-side', 0, this.pixelSize);\n        this.setPixelPosition('bottom-side', this.pixelSize, innerH + this.pixelSize);\n        this.setPixelPosition('right-side', innerW + this.pixelSize, this.pixelSize);\n        this.setPixelPosition('p5-container', this.pixelSize, this.pixelSize);\n        this.setPixelPosition('container-shadow', this.pixelSize, innerH);\n    }\n\n    setPixelDimensions = (id, w, h) => {\n        this.shadowRoot.querySelector(`#${id}`).style.width = `${w}px`;\n        this.shadowRoot.querySelector(`#${id}`).style.height = `${h}px`;\n    }\n\n    setPixelPosition = (id, x, y) => {\n        this.shadowRoot.querySelector(`#${id}`).style.top = `${y}px`;\n        this.shadowRoot.querySelector(`#${id}`).style.left = `${x}px`;\n    }\n\n    setAnalyser(analyser) {\n        this.analyser = analyser;\n        this.dataArray = new Uint8Array(analyser.fftSize);\n    }\n\n    teardown = () => {\n        // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'signals') {\n            this.signals = newValue.split(',');\n        }\n        if (name === 'signal-out') {\n            this.signalOut = newValue;\n        }\n        if (name === 'no-click') {\n            this.noClick = true;\n        }\n        if (name === 'color') {\n            this.color = newValue;\n        }\n        if (name === 'pixel-size') {\n            this.pixelSize = Number(newValue);\n        }\n    }\n\n    sketch1 = (p) => {\n        p.setup = () => {\n            const canvas = p.createCanvas(this.width - this.pixelSize * 2, this.height - this.pixelSize * 2);\n            canvas.parent(this.shadowRoot.querySelector('#p5-container'));\n            canvas.style('visibility', 'visible');\n            p.frameRate(15); \n            console.log('setup!');\n        };\n\n        p.draw = () => {\n            p.background(this.color);\n            if (this.analyser && this.dataArray) {\n                //let midY = p.height / 2;\n                this.analyser.getByteTimeDomainData(this.dataArray);\n                //p.noStroke();\n                //p.fill(0, 255, 0);\n                p.stroke(0, 255, 0);\n                p.strokeWeight(2);\n                p.noFill();\n                p.beginShape();\n                for (let i = 0; i < this.dataArray.length; i++) {\n                    const x = p.map(i, 0, this.dataArray.length, 0, p.width);\n                    const y = p.map(this.dataArray[i], 0, 255, 0, p.height - this.padding);\n                    p.vertex(x, y);\n                    //p.rect(x, (midY), 1, (y - (midY)) * 1.5, 20);\n                }\n                p.endShape();\n            } else {\n                p.fill(25);\n                p.textAlign(p.CENTER, p.CENTER);\n                p.text(\"No analyser connected\", p.width / 2, p.height / 2);\n            }\n        }\n    }   \n}","/*\nDefines the custom element <ravel-visualizer-2>\n*/\n\nimport { RavelVisualizer2 } from './src/RavelVisualizer2.js';\n\n\ncustomElements.define('ravel-visualizer-2', RavelVisualizer2);\n","import { RavelElement } from '../../../base/ravel-element/src/RavelElement.js';\nimport globalStyles from '../../../../common/global-styles.js';\n\nexport class RavelVisualizer2 extends RavelElement {\n    static get localStyles() {\n        return `\n        <style>\n        #container {\n            position: absolute;\n            cursor: pointer;\n            user-select: none;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n        #screen {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n        }\n        #sensor {\n            position: absolute;\n            background-color: rgba(255, 255, 0, 0.5);\n            border-radius: 24px;\n        }\n        #waveform {\n            position: absolute;\n        }\n        .pixelArt {\n            position: absolute;\n        }\n        .transparent {\n            background-color: rgba(255, 255, 255, 0);\n        }\n        .light-pixel {\n            background-color: #aaaaaa;\n        }\n        .dark-pixel {\n            background-color: #000000;\n        }\n        .color-pixel {\n            background-color: #FFFF00;\n        }\n        .shadow {\n            height: 10%;\n            opacity: 0.5;\n            background-color: #000000;\n        }\n        @-webkit-keyframes pulse {\n          to {\n            -webkit-transform: scale(1.1);\n            transform: scale(1.1);\n          }\n        }\n        @keyframes pulse {\n          to {\n            -webkit-transform: scale(1.1);\n            transform: scale(1.1);\n          }\n        }\n        .pulse {\n          display: inline-block;\n          vertical-align: middle;\n          -webkit-transform: perspective(1px) translateZ(0);\n          transform: perspective(1px) translateZ(0);\n          box-shadow: 0 0 1px rgba(0, 0, 0, 0);\n         -webkit-animation-name: pulse;\n          animation-name: pulse;\n          -webkit-animation-duration: 0.3s;\n          animation-duration: 0.3s;\n          -webkit-animation-timing-function: linear;\n          animation-timing-function: linear;\n          -webkit-animation-iteration-count: infinite;\n          animation-iteration-count: infinite;\n          -webkit-animation-direction: alternate;\n          animation-direction: alternate;\n        }\n        </style>\n        `;\n    }\n  \n    static get html() { \n        return `\n        <div id=\"container\">\n        <div id=\"screen\">\n            <div id=\"top-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"left-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"right-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"bottom-side\" class=\"dark-pixel pixelArt\"></div>\n            <div id=\"p5-container\" class=\"light-pixel pixelArt\">       \n            </div>\n            <div id=\"container-shadow\" class=\"shadow pixelArt\"></div>\n        </div>\n        </div>\n        `;\n    }\n \n    static get observedAttributes() { \n        return [...super.baseObservedAttributes, \n            'w', 'h', 'color', 'pixel-size', 'signals', 'signal-out' ];\n    }\n\n    constructor() {\n        super();\n        const template = document.createElement('template');\n        template.innerHTML = globalStyles\n            + this.constructor.localStyles\n            + this.constructor.html;\n        this.attachShadow({ mode: 'open' });\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        this.initialize();\n    }\n  \n    connectedCallback() {\n        this.setup();\n    }\n    \n    disconnectedCallback() {\n        this.teardown();\n    }\n    \n    initialize() {\n        this.container = this.shadowRoot.querySelector('#container');\n        this.center = this.shadowRoot.querySelector('#p5-container');\n        this.waveform = this.shadowRoot.querySelector('#waveform');\n        this.x = 0;\n        this.y = 0;\n        this.width = 50;\n        this.height = 50;\n        this.pixelSize = 20;\n        this.color = '#ff0000';\n        this.audioBuffer = null;\n        this.audioBuffer = null;\n        this.playheadSample = null;\n    }\n  \n    setup = () => {\n        //this.observedMessages = ['message'];\n        //this.subscribe(this.observedMessages);  \n        this.container.style.top = `${this.y}px`;\n        this.container.style.left = `${this.x}px`;\n        this.container.style.width = `${this.width}px`;\n        this.container.style.height = `${this.height}px`;\n        this.buildScreen();\n        this.center.style.backgroundColor = `${this.color}`;\n        \n        this.p5instance = new p5((p) => this.sketch1(p));\n        //this.p5instance = new p5(this.sketch1); \n    \n    }\n    \n    buildScreen = () => {\n        let innerW = this.width - this.pixelSize * 2;\n        let innerH = this.height - this.pixelSize * 2;\n        let centerW = innerW;\n        this.innerMax = centerW;\n\n        console.log(`${innerW} ${innerH}`);\n        this.setPixelDimensions('top-side', innerW, this.pixelSize);\n        this.setPixelDimensions('left-side', this.pixelSize, innerH);\n        this.setPixelDimensions('bottom-side', innerW, this.pixelSize);\n        this.setPixelDimensions('right-side', this.pixelSize, innerH );\n        this.setPixelDimensions('p5-container', centerW, innerH);\n        this.setPixelDimensions('container-shadow', innerW, this.pixelSize);\n\n        this.setPixelPosition('top-side', this.pixelSize, 0);\n        this.setPixelPosition('left-side', 0, this.pixelSize);\n        this.setPixelPosition('bottom-side', this.pixelSize, innerH + this.pixelSize);\n        this.setPixelPosition('right-side', innerW + this.pixelSize, this.pixelSize);\n        this.setPixelPosition('p5-container', this.pixelSize, this.pixelSize);\n        this.setPixelPosition('container-shadow', this.pixelSize, innerH);\n    }\n\n    setPixelDimensions = (id, w, h) => {\n        this.shadowRoot.querySelector(`#${id}`).style.width = `${w}px`;\n        this.shadowRoot.querySelector(`#${id}`).style.height = `${h}px`;\n    }\n\n    setPixelPosition = (id, x, y) => {\n        this.shadowRoot.querySelector(`#${id}`).style.top = `${y}px`;\n        this.shadowRoot.querySelector(`#${id}`).style.left = `${x}px`;\n    }\n\n    setBuffer(buffer) {\n        this.audioBuffer = buffer;\n        this.p5instance.redraw();\n    }\n\n    setPosition(sampleIndex) {\n        this.playheadSample = sampleIndex;\n        this.p5instance.redraw();\n    }\n\n    teardown = () => {\n       // this.unsubscribe(this.observedMessages);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        // Call the parent's attributeChangedCallback to preserve its behavior\n        super.attributeChangedCallback(name, oldValue, newValue);\n        if (name === 'signals') {\n            this.signals = newValue.split(',');\n        }\n        if (name === 'signal-out') {\n            this.signalOut = newValue;\n        }\n        if (name === 'no-click') {\n            this.noClick = true;\n        }\n        if (name === 'color') {\n            this.color = newValue;\n        }\n        if (name === 'pixel-size') {\n            this.pixelSize = Number(newValue);\n        }\n    }\n\n    sketch1 = (p) => {\n        p.setup = () => {\n            const canvas = p.createCanvas(this.width - this.pixelSize * 2, this.height - this.pixelSize * 2);\n            canvas.parent(this.shadowRoot.querySelector('#p5-container'));\n            canvas.style('visibility', 'visible');\n            p.frameRate(30); // update at 30fps\n        };\n\n        p.draw = () => {\n            p.background(this.color);\n\n            if (!this.audioBuffer) {\n                p.fill(this.color);\n                p.textAlign(p.CENTER, p.CENTER);\n                p.text(\"No audio loaded\", p.width / 2, p.height / 2);\n                return;\n            }\n\n            const channelData = this.audioBuffer.getChannelData(0);\n            const step = Math.ceil(channelData.length / p.width);\n            const midY = p.height / 2;\n\n            p.noStroke();\n\n            // Draw waveform\n            for (let x = 0; x < p.width; x++) {\n                const sliceStart = x * step;\n                let min = 1.0, max = -1.0;\n                for (let i = 0; i < step; i++) {\n                    const s = channelData[sliceStart + i] || 0;\n                    if (s < min) min = s;\n                    if (s > max) max = s;\n                }\n                const y1 = midY + min * midY;\n                const y2 = midY + max * midY;\n                let squiggleMax = 2;\n                let squiggle = (Math.random() * squiggleMax) - (squiggleMax / 2);\n                p.noFill();\n                p.stroke(25, 25, 25);\n                p.rect(x, y1 + squiggle, 1, y2 - y1 + squiggle);\n            }\n\n            // Draw playhead (yellow)\n            if (this.playheadSample != null) {\n                const playheadX = Math.floor(this.playheadSample / step);\n                if (playheadX >= 0 && playheadX < p.width) {\n                    const sliceStart = playheadX * step;\n                    let min = 1.0, max = -1.0;\n                    for (let i = 0; i < step; i++) {\n                        const s = channelData[sliceStart + i] || 0;\n                        if (s < min) min = s;\n                        if (s > max) max = s;\n                    }\n                    const y1 = midY + min * midY;\n                    const y2 = midY + max * midY;\n                    p.noStroke();\n                    p.fill(255, 255, 255, 100); // yellow\n                    //p.rect(playheadX, y1-10, 3, y2 - y1 + 10);\n                    p.circle(playheadX, midY, y2 - y1);\n                    p.circle(playheadX, midY, (y2 - y1) / 2);\n                    p.circle(playheadX, midY, 4);\n                }\n            }\n        }\n    }   \n}","import './custom-elements/assemblies/index.js';\nimport './custom-elements/ballyhoo/index.js';\nimport './custom-elements/base/index.js';\nimport './custom-elements/document/index.js';\nimport './custom-elements/gadgets/index.js';\nimport './custom-elements/gidgets/index.js';","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { RavelMessages } from \"../../core/modules/RavelMessages.js\";\nimport \"../../core/web-components/index.js\";\n\n// For handling anchors\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const anchor = location.hash.slice(1);\n    if (anchor) RavelMessages.sendMessage('scrapbook', 'open', anchor);\n});\n\n// For the embedded Thompson Folk Motif tool:\nlet folkMotifItems = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n\t\t\nfunction chooseTenFolkMotifItems() {\n  for ( i=0; i < 10; i++) {\n    if (folkMotifItems[i] != 0) document.getElementById(\"a\" + folkMotifItems[i]).style['display'] = \"none\";\n    folkMotifItems[i] = Math.floor(Math.random() * 42355) + 1;\n    document.getElementById(\"a\" + folkMotifItems[i]).style['display'] = \"block\";\n  }\n}\n\nconst fluxlyAsciiLogo = `\n                                                    \n             @@@@@@@@@@@@@@@@@@@@@                  \n         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@             \n       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@          \n     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@        \n    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@      \n   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*-::::::+%@@@@     \n   @@@@@@@@@@#****#@@@@@@@@@@@@+-:::....:::-#@@@    \n  @@@@@@@@*-:::::::-=%@@@@@@@@=::.....-:...::*@@@   \n @@@@@@@%-::..::...::-%@@@@@@#::...=@@@@@-..::#@@@  \n @@@@@@%=:..=@@@@@:.::-@@@@@@=::..=@@@@@@@=..:-@@@@ \n @@@@@@+::.-@@@@@@%..::@@@@@@-:...@@@@@@@@@:.::%@@@ \n @@@@@@+:..=@@@@@@@..::@@@@@@=::..@@@@@@@@@..::@@@@@\n @@@@@@+:..-%@@@@@:..:-@@@@@@%::..-@@@@@@%:.::+@@@@@\n @@@@@@#-:...-*+:...::%@@@@@@@=::...:*#=...::-%@@@@@\n @@@@@@@#::........::*@@@@@@@@@*-:::.....:::=%@@@@@@\n @@@@@@@@@+::::::::-%@@@@@@@@@@@@%*=::::::-#@@@@@@@@\n @@@@@@@@@@@%+::-#@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@ \n @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ \n  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ \n  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  \n   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   \n     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    \n      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     \n        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@      \n          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         \n              @@@@@@@@@@@@@@@@@@@@@@@@@@            \n                    @@@@@@@@@@@                     \n`;\nconsole.log(fluxlyAsciiLogo);\n\n"],"names":[],"ignoreList":[],"sourceRoot":""}